{"version":3,"file":"src_app_routes_organizzazione_rilevazioni_rilevazioni_module_ts.js","mappings":"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","sources":["./src/app/routes/organizzazione/rilevazioni/modal-dettagli-segnalazione/modal-dettagli-segnalazione.component.ts","./src/app/routes/organizzazione/rilevazioni/modal-dettagli-segnalazione/modal-dettagli-segnalazione.component.html","./src/app/routes/organizzazione/rilevazioni/modal-modifica-segnalazione/modal-modifica-segnalazione.component.ts","./src/app/routes/organizzazione/rilevazioni/modal-modifica-segnalazione/modal-modifica-segnalazione.component.html","./src/app/routes/organizzazione/rilevazioni/modale-testi-aspetti/modale-testi-aspetti.component.ts","./src/app/routes/organizzazione/rilevazioni/modale-testi-aspetti/modale-testi-aspetti.component.html","./src/app/routes/organizzazione/rilevazioni/pagina-risolvi-aspetto/pagina-risolvi-aspetto.component.ts","./src/app/routes/organizzazione/rilevazioni/pagina-risolvi-aspetto/pagina-risolvi-aspetto.component.html","./src/app/routes/organizzazione/rilevazioni/rilevazioni-nuova/rilevazioni-nuova.component.ts","./src/app/routes/organizzazione/rilevazioni/rilevazioni-nuova/rilevazioni-nuova.component.html","./src/app/routes/organizzazione/rilevazioni/rilevazioni-routing.module.ts","./src/app/routes/organizzazione/rilevazioni/rilevazioni.component.ts","./src/app/routes/organizzazione/rilevazioni/rilevazioni.component.html","./src/app/routes/organizzazione/rilevazioni/rilevazioni.module.ts","./src/app/routes/organizzazione/rilevazioni/stepper-dialog-creazione-aspetto/stepper-dialog-creazione-aspetto.component.ts","./src/app/routes/organizzazione/rilevazioni/stepper-dialog-creazione-aspetto/stepper-dialog-creazione-aspetto.component.html","./src/app/routes/organizzazione/rilevazioni/stepper-dialog-modifica/stepper-dialog-modifica.component.ts","./src/app/routes/organizzazione/rilevazioni/stepper-dialog-modifica/stepper-dialog-modifica.component.html","./src/app/shared/models/attore.model.ts","./src/app/shared/models/procedura-riferimento.model.ts","./src/app/shared/models/rilevazione.model.ts","./src/app/shared/models/stato-salvataggio-rilevazione.model.ts","./src/app/shared/models/tipologia-ricorso.model.ts"],"sourcesContent":["import { Component, Inject, OnInit } from '@angular/core';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { StorageService } from '@shared';\r\nimport { AspettoProdotti } from '@shared/interfaces/aspettoProdotti';\r\nimport { segnalazioneContenzioso } from '@shared/interfaces/segnalazioneContenzioso';\r\nimport { segnalazioneProdotto } from '@shared/interfaces/segnalazioneProdotto';\r\nimport { RilevazioneService } from '@shared/services/rilevazione.service';\r\nimport { StepperService } from '@shared/services/stepper.service';\r\n// import { DialogData } from 'app/routes/area-amministrativa/dettaglio-comunicazione/dettaglio-comunicazione.component';\r\n\r\n@Component({\r\n  selector: 'app-modal-dettagli-segnalazione',\r\n  templateUrl: './modal-dettagli-segnalazione.component.html',\r\n  styleUrls: ['./modal-dettagli-segnalazione.component.scss']\r\n})\r\nexport class ModalDettagliSegnalazioneComponent implements OnInit {\r\n\r\n  datiAspetto: AspettoProdotti[] = [];\r\n  aspetto: AspettoProdotti[] = [];\r\n  nomeSettoreMateria: string | undefined = '';\r\n  nomeAreaProdotto: string | undefined = '';\r\n  nomeSede: string | string | undefined = '';\r\n  nomeContenzioso: string | undefined = '';\r\n  sedeId: number | undefined = 0;\r\n  dataInvio: string | undefined = '';\r\n  idAspettoSegnalazione : number = 0;\r\n  idStatoSalvataggioSegnalazione: number | undefined = 0 ;\r\n  displayedColumns: string[] = ['criticita', 'suggerimento'];\r\n  ruolo: string = '';\r\n  titolo!: string;\r\n  segnalazioneProdotto!: segnalazioneProdotto;\r\n  segnalazioneContenzioso!: segnalazioneContenzioso;\r\n\r\n\r\n  form1 = this.formBuilder.group({\r\n    criticita: [''],\r\n    suggerimento: [''],\r\n    readOnlyNoteDR: [''],\r\n    readOnlyNoteDC: ['']\r\n  });\r\n\r\n  constructor(\r\n     @Inject(MAT_DIALOG_DATA) public data: any, private storageService: StorageService,\r\n     private stepperService: StepperService, private rilevazioneService: RilevazioneService,\r\n     private formBuilder: FormBuilder ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.loadData();\r\n  }\r\n     loadData(){\r\n      this.titolo = this.stepperService.inserimentoTipoSegnalazione$.value!;\r\n      this.idAspettoSegnalazione = <any>this.data as number;\r\n      this.ruolo = this.storageService.getItem('allroles');\r\n      const prodotto = 'Prodotto';\r\n      const contenzioso = 'Contenzioso';\r\n\r\n      switch (this.titolo){\r\n        case prodotto:{\r\n          this.segnalazioneProdotto = this.stepperService.datiSegnalazioneProdotto$.value!;\r\n          this.idStatoSalvataggioSegnalazione = this.segnalazioneProdotto.statoId;\r\n          if(this.idStatoSalvataggioSegnalazione == 5){\r\n            this.displayedColumns.push('integrazioneDR', 'integrazioneDC');\r\n          }\r\n          this.nomeSettoreMateria = this.segnalazioneProdotto.settoreMateria;\r\n          this.nomeAreaProdotto = this.segnalazioneProdotto.areaProdotto;\r\n          this.nomeSede = this.segnalazioneProdotto.sede;\r\n          this.sedeId = this.segnalazioneProdotto.sedeId;\r\n          this.dataInvio = this.segnalazioneProdotto.data1;\r\n          this.rilevazioneService.getDettagliAspettoSegnalazioneById(this.idAspettoSegnalazione).subscribe({\r\n            next: (aspettoSegnalazione: any) => {\r\n              this.datiAspetto.push(aspettoSegnalazione);\r\n              this.aspetto = this.datiAspetto;\r\n              this.aspetto.forEach(aspetto => {\r\n                this.form1.patchValue({\r\n                  criticita: aspetto.criticita,\r\n                  suggerimento: aspetto.suggerimento,\r\n                  readOnlyNoteDR: aspetto.integrazioneDR,\r\n                  readOnlyNoteDC: aspetto.integrazioneDC\r\n                });\r\n              });\r\n            },\r\n            error: (err) => {\r\n              // console.error('Errore durante il caricamento di aspettoSegnalazione:', err);\r\n              this.datiAspetto = [];  // Imposta a un array vuoto in caso di errore\r\n            }\r\n          });\r\n          break;\r\n        }\r\n        case contenzioso:{\r\n          this.segnalazioneContenzioso = this.stepperService.datiSegnalazioneContenzioso$.value!;\r\n          this.idStatoSalvataggioSegnalazione = this.segnalazioneContenzioso.statoId;\r\n          if(this.idStatoSalvataggioSegnalazione == 5){\r\n            this.displayedColumns.push('integrazioneDR', 'integrazioneDC');\r\n          }\r\n          this.nomeSettoreMateria = this.segnalazioneContenzioso.settoreMateria;\r\n          this.nomeAreaProdotto = this.segnalazioneContenzioso.areaProdotto;\r\n          this.nomeSede = this.segnalazioneContenzioso.sede;\r\n          this.sedeId = this.segnalazioneContenzioso.sedeId;\r\n          this.nomeContenzioso = this.segnalazioneContenzioso.contenziosoDesc;\r\n          this.dataInvio = this.segnalazioneContenzioso.data1;\r\n          this.rilevazioneService.getDettagliAspettoSegnalazioneContenziosoById(this.idAspettoSegnalazione).subscribe({\r\n            next: (aspettoSegnalazione: any) => {\r\n              this.datiAspetto.push(aspettoSegnalazione);\r\n              this.aspetto = this.datiAspetto;\r\n              this.aspetto.forEach(aspetto => {\r\n                this.form1.patchValue({\r\n                  criticita: aspetto.criticita,\r\n                  suggerimento: aspetto.suggerimento,\r\n                  readOnlyNoteDR: aspetto.integrazioneDR,\r\n                  readOnlyNoteDC: aspetto.integrazioneDC\r\n                });\r\n              });\r\n            },\r\n            error: (err) => {\r\n              console.error('Errore durante il caricamento di aspettoSegnalazioneContenzioso:', err);\r\n              this.datiAspetto = [];  // Imposta a un array vuoto in caso di errore\r\n            }\r\n          });\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n}\r\n","<div class = \"display-title\" *ngIf=\"titolo === 'Prodotto'\">\r\n  <div>\r\n    <h3><span class=\"top-title\">Data Invio</span>\r\n    <span class=\"sub-title\">{{dataInvio}}</span></h3>\r\n  </div>\r\n  <div>\r\n    <h3><span class=\"top-title\">Settore/Materia</span>\r\n    <span class=\"sub-title\">{{nomeSettoreMateria}}</span></h3>\r\n  </div>\r\n  <div>\r\n    <h3><span class=\"top-title\">Area/Prodotto</span>\r\n    <span class=\"sub-title\">{{nomeAreaProdotto}}</span></h3>\r\n  </div>\r\n  <div>\r\n    <h3><span class=\"top-title\">Sede</span>\r\n    <span class=\"sub-title\">{{nomeSede}}</span></h3>\r\n  </div>\r\n</div>\r\n\r\n<div class = \"display-title\" *ngIf=\"titolo === 'Contenzioso'\">\r\n  <div>\r\n    <h3><span class=\"top-title\">Data Invio</span>\r\n    <span class=\"sub-title\">{{dataInvio}}</span></h3>\r\n  </div>\r\n  <div>\r\n    <h3><span class=\"top-title\">Tipologia Contezioso</span>\r\n    <span class=\"sub-title\">{{nomeContenzioso}}</span></h3>\r\n  </div>\r\n  <div>\r\n    <h3><span class=\"top-title\">Settore/Materia</span>\r\n    <span class=\"sub-title\">{{nomeSettoreMateria}}</span></h3>\r\n  </div>\r\n  <div>\r\n    <h3><span class=\"top-title\">Area/Prodotto</span>\r\n    <span class=\"sub-title\">{{nomeAreaProdotto}}</span></h3>\r\n  </div>\r\n  <div>\r\n    <h3><span class=\"top-title\">Sede</span>\r\n    <span class=\"sub-title\">{{nomeSede}}</span></h3>\r\n  </div>\r\n</div>\r\n<p><mat-icon class=\"main-ico\">build</mat-icon>{{aspetto[0]?.nomeAspetto}}</p>\r\n\r\n<form [formGroup]=\"form1\">\r\n  <table mat-table [dataSource]=\"aspetto\">\r\n    <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n    <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n\r\n    <ng-container matColumnDef=\"criticita\">\r\n      <th mat-header-cell *matHeaderCellDef>Criticitá</th>\r\n      <td mat-cell *matCellDef=\"let element\">\r\n        <ng-container>\r\n          <textarea matInput\r\n          [style.width.%]=\"99\"\r\n          [style.height.px]=\"150\"\r\n          [rows]=\"10\"\r\n          [cols]=\"40\"\r\n          formControlName=\"criticita\" readonly></textarea>\r\n        </ng-container>\r\n      </td>\r\n    </ng-container>\r\n\r\n    <ng-container matColumnDef=\"suggerimento\">\r\n      <th mat-header-cell *matHeaderCellDef>Suggerimento</th>\r\n      <td mat-cell *matCellDef=\"let element\">\r\n        <ng-container>\r\n          <textarea matInput\r\n          [style.width.%]=\"99\"\r\n          [style.height.px]=\"150\"\r\n          [rows]=\"10\"\r\n          [cols]=\"40\"\r\n          formControlName=\"suggerimento\" readonly></textarea>\r\n        </ng-container>\r\n      </td>\r\n    </ng-container>\r\n\r\n    <ng-container matColumnDef=\"integrazioneDR\">\r\n      <th mat-header-cell *matHeaderCellDef>Integrazione DR</th>\r\n      <td mat-cell *matCellDef=\"let element\">\r\n        <ng-container>\r\n          <textarea matInput\r\n          [style.width.%]=\"99\"\r\n          [style.height.px]=\"150\"\r\n          [rows]=\"10\"\r\n          [cols]=\"40\"\r\n          formControlName=\"readOnlyNoteDR\" readonly></textarea>\r\n        </ng-container>\r\n      </td>\r\n    </ng-container>\r\n\r\n    <ng-container matColumnDef=\"integrazioneDC\">\r\n      <th mat-header-cell *matHeaderCellDef>Integrazione DC</th>\r\n      <td mat-cell *matCellDef=\"let element\">\r\n        <ng-container>\r\n          <textarea matInput\r\n          [style.width.%]=\"99\"\r\n          [style.height.px]=\"150\"\r\n          [rows]=\"10\"\r\n          [cols]=\"40\"\r\n          formControlName=\"readOnlyNoteDC\" readonly></textarea>\r\n        </ng-container>\r\n        </td>\r\n      </ng-container>\r\n  </table>\r\n\r\n  <mat-dialog-actions align=\"center\">\r\n    <button mat-button mat-dialog-close class=\"btn-back\"><mat-icon>arrow_back</mat-icon>Torna indietro</button>\r\n  </mat-dialog-actions>\r\n</form>\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatDialog, MatDialogConfig, MatDialogRef } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\nimport { StorageService } from '@shared';\r\nimport { AspettoProdotti } from '@shared/interfaces/aspettoProdotti';\r\nimport { AspettoAllegato } from '@shared/interfaces/aspettoAllegato';\r\nimport { DocumentiService } from '@shared/services/documenti.service';\r\nimport { RilevazioneService } from '@shared/services/rilevazione.service';\r\nimport { StepperService } from '@shared/services/stepper.service';\r\nimport { firstValueFrom } from 'rxjs';\r\nimport { forkJoin } from 'rxjs';\r\nimport { ModalDettagliSegnalazioneComponent } from '../modal-dettagli-segnalazione/modal-dettagli-segnalazione.component';\r\nimport { segnalazioneProdotto } from '@shared/interfaces/segnalazioneProdotto';\r\nimport { segnalazioneContenzioso } from '@shared/interfaces/segnalazioneContenzioso';\r\n\r\n@Component({\r\n  selector: 'app-modal-modifica-segnalazione',\r\n  templateUrl: './modal-modifica-segnalazione.component.html',\r\n  styleUrls: ['./modal-modifica-segnalazione.component.scss']\r\n})\r\nexport class ModalModificaSegnalazioneComponent implements OnInit, OnDestroy {\r\n\r\n  titolo!: string;\r\n  statoSegnalazione!: number;\r\n  ruolo: string = '';\r\n  segnalazioneProdotto!: segnalazioneProdotto;\r\n  segnalazioneContenzioso!: segnalazioneContenzioso;\r\n  listaAspettiAggiunti: AspettoProdotti[] = [];\r\n  idAspetti: number[] = [];\r\n  allegatiAspetti: AspettoAllegato[] = [];\r\n  isAllegatoSegnalazione: boolean = false;\r\n\r\n  data: segnalazioneProdotto[] = [];\r\n\r\n  displayedColumns: string[] = [\r\n    'nomeAspetto', 'descrizioneCriticita','descrizioneSuggerimento','allegato'\r\n  ]\r\n\r\n\r\n  constructor(private stepperService: StepperService,private dialog: MatDialog,\r\n              private router: Router,private rilevazioneSrv: RilevazioneService,\r\n              private documentiService: DocumentiService, private storageService: StorageService,\r\n              private dialogRef: MatDialogRef<ModalModificaSegnalazioneComponent>) { }\r\n\r\n  ngOnInit(): void {\r\n    this.titolo = this.stepperService.inserimentoTipoSegnalazione$.value!;\r\n    this.ruolo = this.storageService.getItem('allroles');\r\n    this.loadDatiSegnalazione();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.listaAspettiAggiunti = [];\r\n  }\r\n\r\n  loadDatiSegnalazione() {\r\n\r\n    const prodotto = 'Prodotto';\r\n    const contenzioso = 'Contenzioso';\r\n\r\n    switch (this.titolo) {\r\n\r\n      case prodotto: {\r\n        this.segnalazioneProdotto = this.stepperService.datiSegnalazioneProdotto$.value!;\r\n        this.statoSegnalazione = this.segnalazioneProdotto.statoId;\r\n        if(this.statoSegnalazione == 5 && (this.ruolo.includes('P12801') || this.ruolo.includes('P12689'))){\r\n          this.displayedColumns.splice(3, 0, 'integrazioneDR', 'integrazioneDC');\r\n        }\r\n        this.data.push(this.segnalazioneProdotto);\r\n        this.rilevazioneSrv\r\n          .getDettagliSegnalazioneById(this.stepperService.datiSegnalazioneProdotto$.value!.id)\r\n          .subscribe(\r\n            (data: AspettoProdotti[]) => {\r\n                this.listaAspettiAggiunti = data;\r\n                this.listaAspettiAggiunti.forEach(aspetto =>{\r\n                  if(aspetto.idAspetto){\r\n                    this.idAspetti.push(aspetto.idAspetto)\r\n                  }\r\n                });\r\n                this.documentiService.findAllegatiAspetti(this.segnalazioneProdotto.id, this.idAspetti, \"Prodotto\", \"\").subscribe({\r\n                next: (res: AspettoAllegato[]) => {\r\n                this.allegatiAspetti = res;\r\n                this.listaAspettiAggiunti.forEach(aspetto => {\r\n                  const isAllegato = this.allegatiAspetti.find(a => a.idAspetto === aspetto.idAspetto);\r\n                  if (isAllegato) aspetto.hasAllegato = isAllegato.esito;\r\n                });\r\n              }\r\n            });\r\n            },\r\n            error => {\r\n              console.error('Errore durante la ricerca dei dettagli della segnalazione prodotto: ', error);\r\n            }\r\n          );\r\n        this.documentiService.findAllegatoSegnalazione(this.segnalazioneProdotto.id, '', \"Prodotto\").subscribe({\r\n          next: (res) => {\r\n            this.isAllegatoSegnalazione = res.esito;\r\n          }\r\n        });\r\n\r\n        break;\r\n      }\r\n\r\n      case contenzioso: {\r\n        this.segnalazioneContenzioso = this.stepperService.datiSegnalazioneContenzioso$.value!;\r\n        this.statoSegnalazione = this.segnalazioneContenzioso.statoId;\r\n        if(this.statoSegnalazione == 5 && (this.ruolo.includes('P12801') || this.ruolo.includes('P12689'))){\r\n          this.displayedColumns.splice(3, 0, 'integrazioneDR', 'integrazioneDC');\r\n        }\r\n        this.data.push(this.segnalazioneContenzioso);\r\n        this.rilevazioneSrv\r\n          .getDettagliSegnalazioneContenziosoById(this.stepperService.datiSegnalazioneContenzioso$.value!.id)\r\n          .subscribe(\r\n            (data: AspettoProdotti[]) => {\r\n              this.listaAspettiAggiunti = data;\r\n              this.listaAspettiAggiunti.forEach(aspetto =>{\r\n                if(aspetto.idAspetto){\r\n                  this.idAspetti.push(aspetto.idAspetto)\r\n                }\r\n              });\r\n            this.documentiService.findAllegatiAspetti(this.segnalazioneContenzioso.id, this.idAspetti, \"Contenzioso\", \"\").subscribe({\r\n              next: (res: AspettoAllegato[]) => {\r\n                this.allegatiAspetti = res;\r\n                this.listaAspettiAggiunti.forEach(aspetto => {\r\n                  const isAllegato = this.allegatiAspetti.find(a => a.idAspetto === aspetto.idAspetto);\r\n                  if (isAllegato) aspetto.hasAllegato = isAllegato.esito;\r\n                });\r\n              }\r\n            });\r\n            },\r\n            error => {\r\n              console.error('Errore durante la ricerca dei dettagli della segnalazione contenzioso: ', error);\r\n            }\r\n          );\r\n\r\n          // Aggiungi questa parte per trovare l'allegato della segnalazione\r\n        this.documentiService.findAllegatoSegnalazione(this.segnalazioneContenzioso.id, '', \"Contenzioso\").subscribe({\r\n          next: (res) => {\r\n            this.isAllegatoSegnalazione = res.esito;\r\n          }\r\n        });\r\n\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  modifyDialogStepperModifica() {\r\n    this.router.navigate(['/segnalazione/inserimento/nuova']);\r\n    this.closeDialogStepperModifica();\r\n  }\r\n\r\n  async deleteDialogStepperModifica() {\r\n    const prodotto = 'Prodotto';\r\n    const contenzioso = 'Contenzioso';\r\n\r\n    switch(this.titolo) {\r\n      case prodotto: {\r\n        forkJoin([\r\n          this.rilevazioneSrv.deleteSegnalazione(this.titolo, this.segnalazioneProdotto.id),\r\n          this.documentiService.deleteAllFileSegnalazione(this.segnalazioneProdotto.id, this.titolo)\r\n        ]).subscribe({\r\n          next: ([]) => {\r\n          },\r\n          error: (err) => {\r\n            console.error('Errore durante l\\'eliminazione:', err);\r\n          },\r\n          complete: () => {\r\n            // console.log('Eliminazione completata con successo.');\r\n          }\r\n        });\r\n        break;\r\n      }\r\n      case contenzioso: {\r\n        forkJoin([\r\n          this.rilevazioneSrv.deleteSegnalazione(this.titolo, this.segnalazioneContenzioso.id),\r\n          this.documentiService.deleteAllFileSegnalazione(this.segnalazioneContenzioso.id, this.titolo)\r\n        ]).subscribe({\r\n          next: ([]) => {\r\n          },\r\n          error: (err) => {\r\n            console.error('Errore durante l\\'eliminazione:', err);\r\n          },\r\n          complete: () => {\r\n            // console.log('Eliminazione completata con successo.');\r\n          }\r\n        });\r\n        break;\r\n      }\r\n    }\r\n\r\n    this.closeDialogStepperModifica();\r\n  }\r\n\r\n\r\n\r\n  sendDialogStepperModifica() {\r\n    if (this.titolo == 'Prodotto') {\r\n\r\n      this.rilevazioneSrv.sendSegnalazione(this.titolo, this.segnalazioneProdotto.id, this.segnalazioneProdotto.statoId).subscribe( (response: any) => {\r\n      });\r\n    }\r\n    else {\r\n      this.rilevazioneSrv.sendSegnalazione(this.titolo, this.segnalazioneContenzioso.id, this.segnalazioneContenzioso.statoId).subscribe( (response: any) => {\r\n      });\r\n    }\r\n    this.closeDialogStepperModifica();\r\n  }\r\n\r\n  closeDialogStepperModifica() {\r\n    this.dialog.closeAll();\r\n  }\r\n\r\n  showFieldStato(stato: number) {\r\n    const statoMap: { [key: number]: string } = {\r\n      1: '../../../../assets/images/yellow_status.png',\r\n      2: '../../../../assets/images/green_status.png',\r\n      3: '../../../../assets/images/green_status.png',\r\n      4: '../../../../assets/images/attesadefi.png',\r\n      5: '../../../../assets/images/attesadefi.png',\r\n      6: '../../../../assets/images/attesadefi.png',\r\n    };\r\n\r\n    return statoMap[stato] || '../../../../assets/images/red_status.png';\r\n  }\r\n\r\n  showFieldInviata(inviata: boolean): string {\r\n    if (inviata == true) {\r\n      var output = 'Sì';\r\n    }\r\n    else {\r\n      var output = 'No';\r\n    }\r\n    return output;\r\n  }\r\n\r\n  showFieldSede(codiceSede: number, nomeSede: string): string {\r\n    if (\r\n      codiceSede != null &&\r\n      codiceSede != undefined &&\r\n      codiceSede != Number('') &&\r\n      nomeSede != null &&\r\n      nomeSede != undefined &&\r\n      nomeSede != ''\r\n    ) {\r\n      return codiceSede + ' - ' + nomeSede;\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  showDescrizioneTroncata(descrizione: string | null | undefined): string {\r\n    if (!!descrizione && descrizione.length > 23) {\r\n      return descrizione.substring(0, 20) + '...';\r\n    } else {\r\n      return descrizione || 'N/A';\r\n    }\r\n  }\r\n\r\n  openDettagli(idAspettoSegnalazione: number){\r\n    if(this.ruolo.includes('P12689') || this.ruolo.includes('P12801') || this.ruolo.includes('P12799')){\r\n      this.dialogRef.close();\r\n      const dialogConfig = new MatDialogConfig();\r\n      dialogConfig.autoFocus = true;\r\n      dialogConfig.width = '75vw';\r\n      dialogConfig.height = 'auto';\r\n      dialogConfig.data = idAspettoSegnalazione;\r\n      const dialogRef = this.dialog.open(ModalDettagliSegnalazioneComponent, dialogConfig);\r\n      dialogRef.afterClosed().subscribe(()=>{\r\n        const dialgoRef2 = this.dialog.open(ModalModificaSegnalazioneComponent,{\r\n          autoFocus: true,\r\n          width: 'auto',\r\n          height: 'auto',\r\n        });\r\n      });\r\n    }\r\n    else\r\n      return;\r\n  }\r\n\r\n  downloadFileSegnalazione() {\r\n    const prodotto = \"Prodotto\";\r\n    const contenzioso = \"Contenzioso\";\r\n\r\n    switch(this.titolo){\r\n      case prodotto:{\r\n        this.documentiService.getFileSegnalazione(this.segnalazioneProdotto.id, this.titolo, \"\").subscribe(response =>{\r\n          const contentDisposition = response.headers.get('Content-Disposition');\r\n          const fileName = this.getFileNameFromContentDisposition(contentDisposition);\r\n\r\n          const blob = response.body;\r\n          const url = window.URL.createObjectURL(blob as (Blob | MediaSource));\r\n\r\n          const a = document.createElement('a');\r\n          a.href = url;\r\n          a.download = fileName || 'download';\r\n          document.body.appendChild(a);\r\n          a.click();\r\n          document.body.removeChild(a);\r\n\r\n          window.URL.revokeObjectURL(url);\r\n        });\r\n        break;\r\n      }\r\n      case contenzioso: {\r\n        this.documentiService.getFileSegnalazione(this.segnalazioneContenzioso.id, this.titolo, \"\").subscribe(response =>{\r\n          const contentDisposition = response.headers.get('Content-Disposition');\r\n          const fileName = this.getFileNameFromContentDisposition(contentDisposition);\r\n\r\n          const blob = response.body;\r\n          const url = window.URL.createObjectURL(blob as (Blob | MediaSource));\r\n\r\n          const a = document.createElement('a');\r\n          a.href = url;\r\n          a.download = fileName || 'download';\r\n          document.body.appendChild(a);\r\n          a.click();\r\n          document.body.removeChild(a);\r\n\r\n          window.URL.revokeObjectURL(url);\r\n        });\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  downloadFileAspetto(idAspetto: number){\r\n    const prodotto = \"Prodotto\";\r\n    const contenzioso = \"Contenzioso\";\r\n\r\n    switch(this.titolo){\r\n      case prodotto: {\r\n        this.documentiService.getFileAspetti(this.segnalazioneProdotto.id, idAspetto, this.titolo, \"\").subscribe(response => {\r\n          const contentDisposition = response.headers.get('content-disposition');\r\n          const fileName = this.getFileNameFromContentDisposition(contentDisposition);\r\n\r\n          const blob = response.body;\r\n          const url = window.URL.createObjectURL(blob as (Blob | MediaSource));\r\n\r\n          const a = document.createElement('a');\r\n          a.href = url;\r\n          a.download = fileName || 'download';\r\n          document.body.appendChild(a);\r\n          a.click();\r\n          document.body.removeChild(a);\r\n\r\n          window.URL.revokeObjectURL(url);\r\n        });\r\n        break;\r\n      }\r\n      case contenzioso: {\r\n        this.documentiService.getFileAspetti(this.segnalazioneContenzioso.id, idAspetto, this.titolo, \"\").subscribe(response => {\r\n          const contentDisposition = response.headers.get('content-disposition');\r\n          const fileName = this.getFileNameFromContentDisposition(contentDisposition);\r\n\r\n          const blob = response.body;\r\n          const url = window.URL.createObjectURL(blob as (Blob | MediaSource));\r\n\r\n          const a = document.createElement('a');\r\n          a.href = url;\r\n          a.download = fileName || 'download';\r\n          document.body.appendChild(a);\r\n          a.click();\r\n          document.body.removeChild(a);\r\n\r\n          window.URL.revokeObjectURL(url);\r\n        });\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  getFileNameFromContentDisposition(contentDisposition: string | null): string {\r\n    if (!contentDisposition) {\r\n      return 'download';\r\n    }\r\n\r\n    const filenameRegex = /filename[^;=\\n]*=((['\"]).*?\\2|[^;\\n]*)/;\r\n    const matches = filenameRegex.exec(contentDisposition);\r\n    if (matches != null && matches[1]) {\r\n      return matches[1].replace(/['\"]/g, '');\r\n    }\r\n\r\n    const filenameStarRegex = /filename\\*=UTF-8''(.*?)(?:;|$)/;\r\n    const matchesStar = filenameStarRegex.exec(contentDisposition);\r\n    if (matchesStar != null && matchesStar[1]) {\r\n      return decodeURIComponent(matchesStar[1]);\r\n    }\r\n\r\n    return 'download';\r\n  }\r\n}\r\n","<div class=\"modal-container\">\r\n\r\n  <div class=\"modal-content\">\r\n\r\n    <div class=\"title\">Dettaglio Segnalazione {{ titolo }}</div> <br>\r\n\r\n    <div class=\"container-data\">\r\n      <div class=\"table\">\r\n        <div class=\"display-title\" *ngIf=\"titolo == 'Prodotto'\">\r\n          <div>\r\n            <h3><span class=\"top-title\">Data Creazione</span>\r\n              <span class=\"sub-title\">{{segnalazioneProdotto.data1}}</span></h3>\r\n          </div>\r\n          <div>\r\n            <h3><span class=\"top-title\">Settore/Materia</span>\r\n              <span class=\"sub-title\">{{segnalazioneProdotto.settoreMateria}}</span></h3>\r\n          </div>\r\n          <div>\r\n            <h3><span class=\"top-title\">Area/Prodotto</span>\r\n              <span class=\"sub-title\">{{segnalazioneProdotto.areaProdotto}}</span></h3>\r\n          </div>\r\n          <div>\r\n            <h3><span class=\"top-title\">Sede</span>\r\n              <span class=\"sub-title\">{{segnalazioneProdotto.sede}}</span></h3>\r\n          </div>\r\n          <div *ngIf=\"isAllegatoSegnalazione\">\r\n            <h3><span class=\"top-title\">Allegato</span>\r\n            <button class=\"sub-title\" mat-button (click)=\"downloadFileSegnalazione()\"><mat-icon>attachment</mat-icon></button></h3>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"display-title\" *ngIf=\"titolo == 'Contenzioso'\">\r\n          <div>\r\n            <h3><span class=\"top-title\">Data Creazione</span>\r\n              <span class=\"sub-title\">{{segnalazioneContenzioso.data1}}</span></h3>\r\n          </div>\r\n          <div>\r\n            <h3><span class=\"top-title\">Tipologia Contenzioso</span>\r\n              <span class=\"sub-title\">{{segnalazioneContenzioso.contenziosoDesc}}</span></h3>\r\n          </div>\r\n          <div>\r\n            <h3><span class=\"top-title\">Settore/Materia</span>\r\n              <span class=\"sub-title\">{{segnalazioneContenzioso.settoreMateria}}</span></h3>\r\n          </div>\r\n          <div>\r\n            <h3><span class=\"top-title\">Area/Prodotto</span>\r\n              <span class=\"sub-title\">{{segnalazioneContenzioso.areaProdotto}}</span></h3>\r\n          </div>\r\n          <div>\r\n            <h3><span class=\"top-title\">Sede</span>\r\n              <span class=\"sub-title\">{{segnalazioneContenzioso.sede}}</span></h3>\r\n          </div>\r\n          <div *ngIf=\"isAllegatoSegnalazione\">\r\n            <h3>\r\n              <span class=\"top-title\">Allegato</span>\r\n              <mat-icon>attach_file</mat-icon>\r\n            </h3>\r\n          </div>\r\n        </div>\r\n\r\n        <div *ngIf=\"listaAspettiAggiunti.length == 0\" class=\"title\">Nessun aspetto aggiunto</div> <br>\r\n\r\n        <div *ngIf=\"listaAspettiAggiunti.length > 0\" class=\"title\">Aspetti Aggiunti</div> <br>\r\n\r\n        <table *ngIf=\"listaAspettiAggiunti.length > 0\" mat-table [dataSource]=\"listaAspettiAggiunti\"\r\n          class=\"mat-elevation-z8\">\r\n          <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n          <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"\r\n          (click)=\"openDettagli(row.idAspettoSegnalazione)\"></tr>\r\n\r\n          <ng-container matColumnDef=\"nomeAspetto\">\r\n            <th mat-header-cell mat-header=\"nomeAspetto\" *matHeaderCellDef>Nome Aspetto</th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.nomeAspetto}} </td>\r\n          </ng-container>\r\n\r\n          <ng-container matColumnDef=\"descrizioneCriticita\">\r\n            <th mat-header-cell mat-header=\"descrizioneCriticita\" *matHeaderCellDef>Criticità</th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{ showDescrizioneTroncata(element.criticita) }} </td>\r\n          </ng-container>\r\n\r\n          <ng-container matColumnDef=\"descrizioneSuggerimento\">\r\n            <th mat-header-cell mat-header=\"descrizioneSuggerimento\" *matHeaderCellDef>Suggerimento</th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{ showDescrizioneTroncata(element.suggerimento) }} </td>\r\n          </ng-container>\r\n\r\n          <ng-container *ngIf=\"this.statoSegnalazione == 5 && (ruolo.includes('P12689') || ruolo.includes('P12801'))\" matColumnDef=\"integrazioneDR\">\r\n            <th mat-header-cell mat-header=\"integrazioneDR\" *matHeaderCellDef>Integrazione DR</th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{ showDescrizioneTroncata(element.integrazioneDR) }} </td>\r\n          </ng-container>\r\n\r\n          <ng-container *ngIf=\"statoSegnalazione == 5 && (ruolo.includes('P12689') || ruolo.includes('P12801'))\" matColumnDef=\"integrazioneDC\">\r\n            <th mat-header-cell mat-header=\"integrazioneDC\" *matHeaderCellDef>Integrazione DC</th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{ showDescrizioneTroncata(element.integrazioneDC) }} </td>\r\n          </ng-container>\r\n\r\n          <ng-container matColumnDef=\"allegato\">\r\n            <th mat-header-cell *matHeaderCellDef>Allegato</th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n              <button mat-button *ngIf=\"element.hasAllegato\" (click)=\"downloadFileAspetto(element.idAspetto); $event.stopPropagation()\" ><mat-icon>attachment</mat-icon></button>\r\n            </td>\r\n          </ng-container>\r\n\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"container-buttons\">\r\n    <button *ngIf=\"statoSegnalazione == 1\" mat-button (click)=\"modifyDialogStepperModifica()\" class=\"btn-mod\">\r\n      <mat-icon>edit</mat-icon>Modifica\r\n    </button>\r\n\r\n    <button *ngIf=\"statoSegnalazione == 1\" mat-button (click)=\"deleteDialogStepperModifica()\" class=\"btn-dlt\">\r\n      <mat-icon>delete</mat-icon>Elimina\r\n    </button>\r\n\r\n    <button *ngIf=\"statoSegnalazione == 2\" mat-button (click)=\"sendDialogStepperModifica()\" class=\"btn-mod\">Invia\r\n    </button>\r\n\r\n    <button (click)=\"closeDialogStepperModifica()\" mat-button class=\"btn-back\">\r\n      <mat-icon>arrow_back</mat-icon>Chiudi\r\n    </button>\r\n  </div>\r\n\r\n</div>\r\n","import { Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\n\r\n@Component({\r\n  selector: 'app-modale-testi-aspetti',\r\n  templateUrl: './modale-testi-aspetti.component.html',\r\n  styleUrls: ['./modale-testi-aspetti.component.scss']\r\n})\r\nexport class ModaleTestiAspettiComponent {\r\n\r\n  constructor(\r\n    public dialogRef: MatDialogRef<ModaleTestiAspettiComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { text: string }\r\n  ) { }\r\n\r\n  onClose(): void {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n}","<h1 mat-dialog-title>Testo Completo</h1>\r\n<div mat-dialog-content>\r\n  <p class=\"text-black text-lg\">{{ data.text }}</p>\r\n</div>\r\n<div class=\"flex flex-row  justify-center my-5\">\r\n  <button mat-button (click)=\"onClose()\">Chiudi</button>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { Location } from '@angular/common';\r\nimport { ModaleTestiAspettiComponent } from '../modale-testi-aspetti/modale-testi-aspetti.component';\r\nimport { ModalRisolviComponent } from '../modal-risolvi/modal-risolvi.component';\r\nimport { StepperService } from '@shared/services/stepper.service';\r\n\r\n@Component({\r\n  selector: 'app-pagina-risolvi-aspetto',\r\n  templateUrl: './pagina-risolvi-aspetto.component.html',\r\n  styleUrls: ['./pagina-risolvi-aspetto.component.scss']\r\n})\r\nexport class PaginaRisolviAspettoComponent implements OnInit {\r\n\r\n  // aspetto: Aspetto[] = [];\r\n  aspettoConNote: AspettoConNote | undefined = undefined;\r\n  listaAspettiConNote: AspettoConNote[] = [];\r\n  \r\n  constructor(private location : Location, private dialog: MatDialog, private stepperService: StepperService){}\r\n\r\n  ngOnInit(): void {\r\n\r\n    for (let i=0; i<this.aspetti.length; i++) {\r\n      this.aspettoConNote = {\r\n        idAspetto: this.aspetti[i].idAspetto,\r\n        nomeAspetto: this.aspetti[i].nomeAspetto,\r\n        descrizioneCriticita: this.aspetti[i].descrizioneCriticita,\r\n        descrizioneSuggerimento: this.aspetti[i].descrizioneSuggerimento,\r\n        descrizioneNote: ''\r\n        }\r\n      this.listaAspettiConNote.push(this.aspettoConNote);\r\n    }\r\n  }\r\n\r\n  goBack() {\r\n    this.location.back();\r\n    }\r\n\r\n  handleSpecialClick(aspetto: Aspetto, nuovoAspetto: boolean) {\r\n    this.stepperService.setcheckNuovoAspetto(nuovoAspetto);\r\n    // this.stepperService.datiAspettoDaRisolvere$.next(aspetto);\r\n    const dialogRef = this.dialog.open(ModalRisolviComponent,{\r\n      width: '75%',\r\n      height: '60%',\r\n      // data: aspetto\r\n    })\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      // patchvalue per note\r\n      this.stepperService.datiAspetto$.next(undefined);\r\n    });\r\n  }\r\n\r\n    mostraTesto(testo: string,  id: number) {\r\n      if(id !==9 && testo.trim() !== ''){\r\n        this.dialog.open(ModaleTestiAspettiComponent,\r\n          {\r\n            // width: 'auto',\r\n            width: '75%',\r\n            height: '60%',\r\n            data : {text: testo}\r\n          });\r\n      }\r\n  }\r\n\r\n  showDescrizioneTroncata(descrizione: string): string {\r\n    if (descrizione.length > 53) { return descrizione.substring(0,50)+'...'}\r\n    else { return descrizione; }\r\n  }\r\n\r\n  // eliminaAspetto(aspetto: Aspetto, event: Event) {\r\n  //   event.stopPropagation(); // Impedisce che l'evento si propaghi alla riga\r\n  //   this.aspetti = this.aspetti.filter(a => a.idAspetto !== aspetto.idAspetto);\r\n  // }\r\n\r\n aspetti:  Aspetto[] = [\r\n  { idAspetto: 1, nomeAspetto: 'Aspetti Informatici', descrizioneCriticita: 'Problemi di rete', descrizioneSuggerimento: 'Migliorare infrastruttura IT' },\r\n  { idAspetto: 2, nomeAspetto: 'Aspetti Organizzativi', descrizioneCriticita: 'Scarsa comunicazione interna', descrizioneSuggerimento: 'Implementare riunioni settimanali' },\r\n  { idAspetto: 5, nomeAspetto: 'Fattori Esogeni', descrizioneCriticita: 'Influenza esterna', descrizioneSuggerimento: '' },\r\n  { idAspetto: 9, nomeAspetto: 'Aspetti Ambientali', descrizioneCriticita: 'Inquinamento ambientale', descrizioneSuggerimento: 'Promuovere pratiche green' },\r\n];\r\n\r\n//  aspettiConNote:  AspettoConNote[] = [\r\n//   { idAspetto: 1, nomeAspetto: 'Aspetti Informatici', descrizioneCriticita: 'Problemi di rete', descrizioneSuggerimento: 'Migliorare infrastruttura IT', descrizioneNote: '' },\r\n//   { idAspetto: 2, nomeAspetto: 'Aspetti Organizzativi', descrizioneCriticita: 'Scarsa comunicazione interna', descrizioneSuggerimento: 'Implementare riunioni settimanali', descrizioneNote: '' },\r\n//   { idAspetto: 5, nomeAspetto: 'Fattori Esogeni', descrizioneCriticita: 'Influenza esterna', descrizioneSuggerimento: '', descrizioneNote: '' },\r\n//   { idAspetto: 9, nomeAspetto: 'Aspetti Ambientali', descrizioneCriticita: 'Inquinamento ambientale', descrizioneSuggerimento: 'Promuovere pratiche green', descrizioneNote: '' },\r\n// ];\r\n\r\n}\r\n\r\ninterface Aspetto {\r\n  idAspetto: number,\r\n  nomeAspetto: string,\r\n  descrizioneCriticita: string,\r\n  descrizioneSuggerimento: string\r\n}\r\n\r\ninterface AspettoConNote {\r\n  idAspetto: number,\r\n  nomeAspetto: string,\r\n  descrizioneCriticita: string,\r\n  descrizioneSuggerimento: string,\r\n  descrizioneNote: string\r\n}\r\n\r\n\r\n","<page-header></page-header>\r\n\r\n<!-- <div class=\"flex justify-center my-10 text-4xl font-bold\"> -->\r\n<div class=\"title\">\r\n  <h2>Risolvi Aspetti</h2>\r\n</div>\r\n<!-- <div class=\"flex flex-row justify-center my-10\"> -->\r\n<!-- <div class=\"container-data\"> -->\r\n<div  class=\"container-table\">\r\n  <!-- <table class=\"text-base text-left rtl:text-right\"> -->\r\n  <table class=\"table\">\r\n    <thead class=\"text-sm uppercase text-white bg-blue-600\">\r\n      <tr>\r\n        <th scope=\"col\" class=\"px-6 py-3\">NOME ASPETTO</th>\r\n        <th scope=\"col\" class=\"px-6 py-3\">CRITICITÀ</th>\r\n        <th scope=\"col\" class=\"px-6 py-3\">SUGGERIMENTO</th>\r\n        <!-- <th scope=\"col\" class=\"px-6 py-3\">ELIMINA</th> -->\r\n        <th scope=\"col\" class=\"px-6 py-3\">NOTE AGGIUNTIVE</th>\r\n      </tr>\r\n    </thead>\r\n\r\n    <tbody><!-- da aggiungere la condizione per il check del nuovo aspetto -->\r\n      <tr *ngFor=\"let aspetto of listaAspettiConNote\"\r\n          [ngClass]=\"{'bg-yellow-500 cursor-pointer': aspetto.idAspetto === 9}\"\r\n          (dblclick)=\"aspetto.idAspetto === 9 ? handleSpecialClick(aspetto,true) : handleSpecialClick(aspetto,false)\"\r\n          (click)=\"aspetto.idAspetto !== 9 ? null : $event.stopPropagation()\">\r\n      <!-- <tr *ngFor=\"let aspetto of aspetti\"\r\n          [ngClass]=\"{'bg-yellow-500 cursor-pointer': aspetto.idAspetto === 9}\"\r\n          (dblclick)=\"aspetto.idAspetto === 9 ? handleSpecialClick(aspetto) : null\"\r\n          (click)=\"aspetto.idAspetto !== 9 ? null : $event.stopPropagation()\"> -->\r\n        <td class=\"px-6 py-4 truncate\">{{ aspetto.nomeAspetto }}</td>\r\n        <td class=\"px-6 py-4 truncate nota-cell\">{{ showDescrizioneTroncata(aspetto.descrizioneCriticita) }}</td>\r\n        \r\n        <!-- <td class=\"px-6 py-4 truncate\" (click)=\"mostraTesto(la.descrizioneCriticita, la.idAspetto)\">\r\n          {{( la.descrizioneCriticita.length > 10)? ( la.descrizioneCriticita | slice:0:8)+ '...':(\r\n          la.descrizioneCriticita )}}</td> -->\r\n         \r\n        <td class=\"px-6 py-4 truncate nota-cell\">{{ showDescrizioneTroncata(aspetto.descrizioneSuggerimento) }}</td>\r\n        <!-- <td class=\"px-6 py-4 truncate\"\r\n            (click)=\"mostraTesto(la.descrizioneSuggerimento, la.idAspetto)\">{{(\r\n          la.descrizioneSuggerimento.length > 10)? ( la.descrizioneSuggerimento | slice:0:8)+\r\n          '...':( la.descrizioneSuggerimento )}}</td> -->\r\n\r\n        <!-- <td class=\"px-6 py-4 truncate\">\r\n          <button class=\"text-red-600 hover:text-red-700\"\r\n                  (click)=\"eliminaAspetto(la, $event)\"><mat-icon>delete_forever</mat-icon></button>\r\n        </td> -->\r\n        <!-- <td class=\"align-text-center\">\r\n          <button type=\"button\" (click)=\"eliminaAspetto(la, $event)\"\r\n            class=\"material-icons w-auto h-auto text-base border-2 shadow-md text-black bg-red-600 hover:bg-red-700 focus:ring-4 rounded-2xl px-5 py-2.5 text-center\">delete</button>\r\n        </td> -->\r\n\r\n        <td class=\"px-6 py-4 truncate nota-cell\">{{ showDescrizioneTroncata(aspetto.descrizioneNote) }}</td>\r\n\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n\r\n<!-- <div class=\"flex justify-center w-full my-10\"> -->\r\n<div class=\"container-buttons\">\r\n  <button type=\"button\" (click)=\"goBack()\" class=\"child-buttons child-buttons-chiudi\">\r\n    Indietro</button>\r\n  <button type=\"submit\" class=\"child-buttons child-buttons-risolvi\">\r\n    Manda a conferma\r\n  </button>\r\n</div>","import { Component, IterableDiffers, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { Aree } from '@shared/services/areeservice.service';\r\nimport { Area } from '@shared/models/area.model';\r\nimport { Sottoarea } from '@shared/models/sottoarea.model';\r\nimport { ProdottiService } from '@shared/services/prodotti.service';\r\nimport { Prodotto } from '@shared/models/prodotto.model';\r\nimport { Componente } from '@shared/models/componente.model';\r\nimport { TaComponentiCriteri } from '@shared/models/ta-componenti-criteri.model';\r\nimport { RilevazioneService } from '@shared/services/rilevazione.service';\r\nimport { StatiRilevazione } from '@shared/models/stati-rilevazione.model';\r\nimport { RilevazioneTaComponenteCriterioService } from '@shared/services/rilevazione-ta-componente-criterio.service';\r\nimport { Router } from '@angular/router';\r\nimport {\r\n  AbstractControl,\r\n  FormBuilder,\r\n  FormControl,\r\n  ValidationErrors,\r\n  ValidatorFn,\r\n  Validators,\r\n} from '@angular/forms';\r\nimport { MatDialog, MatDialogConfig } from '@angular/material/dialog';\r\nimport { Aspetto, StepperService } from '@shared/services/stepper.service';\r\nimport { MatStepper } from '@angular/material/stepper';\r\nimport { StepperDialogModificaComponent } from '../stepper-dialog-modifica/stepper-dialog-modifica.component';\r\nimport { StepperDialogCreazioneAspettoComponent } from '../stepper-dialog-creazione-aspetto/stepper-dialog-creazione-aspetto.component';\r\nimport { SettoreMateriaService } from '@shared/services/settore-materia.service';\r\nimport { TerritorioService } from '@shared/services/territorio.service';\r\nimport { ContenziosoService } from '@shared/services/contenzioso.service';\r\nimport { StorageService } from '@shared/services/storage.service';\r\nimport { MatTable } from '@angular/material/table';\r\nimport { PopupErroreInserimentoComponent } from '../../../popup-errore-inserimento/popup-errore-inserimento.component'; // Importa il componente del dialogo di errore\r\nimport { map, Observable, startWith } from 'rxjs';\r\nimport { AreaService } from '../data.service';\r\nimport { DocumentiService } from '@shared/services/documenti.service';\r\nimport { InfoFile } from '@shared/interfaces/infoFile';\r\nimport { AspettoAllegato } from '@shared/interfaces/aspettoAllegato';\r\n\r\n@Component({\r\n  selector: 'app-rilevazioni-nuova',\r\n  templateUrl: './rilevazioni-nuova.component.html',\r\n  styleUrls: ['./rilevazioni-nuova.component.scss'],\r\n})\r\nexport class RilevazioniNuovaComponent implements OnInit, OnDestroy {\r\n  aree: Area[] = [];\r\n  sottoaree: Sottoarea[] = [];\r\n  prodotti: Prodotto[] = [];\r\n  sede: Sede[] = [];\r\n  tipologieContenzioso: TipologieContenzioso[] = [];\r\n  componenti: Componente[] = [];\r\n  taComponentiCriteri: TaComponentiCriteri[] = [];\r\n  statiRilevazioni: StatiRilevazione[] = [];\r\n  ruoloRegionale: string = 'P12799';\r\n  ruoloProvinciale: string = 'P12801';\r\n  ruoloAmministrativo: string = 'P12690';\r\n  dataFileSegnalazione: InfoFile[] = [];\r\n  idAspetti: number[] = [];\r\n  nomiFileAspetti: {idAspetto: number, fileName: string}[] = []\r\n  // NUOVO\r\n  listaAspettiAggiunti: Aspetto[] = [];\r\n  role: string | null = null;\r\n  codiceSede: string[] = [];\r\n  isLinear = false;\r\n  aspettoSelezionato: Aspetto | undefined;\r\n  maxIdAspettiDaValutare!: number;\r\n  checkNuovoAspetto: boolean = false;\r\n\r\n  displayedColumnsStep2: string[] = [\r\n    'modifica',\r\n    'rimuovi',\r\n    'nomeAspetto',\r\n    'descrizioneCriticita',\r\n    'allegato',\r\n  ];\r\n  displayedColumnsStep3: string[] = [\r\n    'modifica',\r\n    'nomeAspetto',\r\n    'descrizioneCriticita',\r\n    'descrizioneSuggerimento',\r\n  ];\r\n  displayedColumnsStep4: string[] = [\r\n    'nomeAspetto',\r\n    'descrizioneCriticita',\r\n    'descrizioneSuggerimento',\r\n  ];\r\n  fileColumns: string[] = [\r\n    'fileName',\r\n    'fileSize',\r\n    'download',\r\n    'rimuovi'\r\n  ];\r\n\r\n  showGestioneFileDatiGenerali: boolean = false;\r\n  isFileDatiGenerali: boolean = false;\r\n  isFileAspetti: AspettoAllegato[] = [];\r\n\r\n  @ViewChild('stepper') stepper!: MatStepper;\r\n  @ViewChild('tableStep2') tableStep2!: MatTable<any>;\r\n  @ViewChild('tableStep3') tableStep3!: MatTable<any>;\r\n  @ViewChild('tableStep4') tableStep4!: MatTable<any>;\r\n\r\n  firstFormGroup = this._formBuilder.group({\r\n    settoreMateria: ['', Validators.required],\r\n    areaProdotto: ['', Validators.required],\r\n    sede: ['', Validators.required],\r\n    tipologiaContenzioso: ['', Validators.required],\r\n  });\r\n\r\n  secondFormGroup = this._formBuilder.group({\r\n    step2Criticita: [''], //, this.checkFormEGriglia()],\r\n    step2Aspetti: [''], //, this.checkFormEGriglia()],\r\n    step2ArrayAspettiCriticita: [[] as Aspetto[], Validators.required],\r\n    // step2ListaAspettiCriticita: [[] as Aspetto[], Validators.required]\r\n  });\r\n\r\n  thirdFormGroup = this._formBuilder.group({\r\n    step3Aspetti: ['', Validators.required],\r\n    step3Suggerimenti: [''],\r\n  });\r\n  segnalazioneContenzioso: segnalazioneContenzioso | null = null;\r\n  segnalazioneProdotto: segnalazioneProdotto | null = null;\r\n  statoSegnalazione: number = 1;\r\n  idSegnalazioneCasoInvia: number = 0;\r\n\r\n  settoreCtrl = new FormControl();\r\n  areaCtrl = new FormControl();\r\n  sedeCtrl = new FormControl();\r\n  tipologiaCtrl = new FormControl();\r\n  aspettiCtrl = new FormControl();\r\n\r\n  filteredSettoreMateria!: Observable<SettoreMateria[]>;\r\n  filteredAreaProdotto!: Observable<AreaProdotto[]>;\r\n  filteredSede!: Observable<Sede[]>;\r\n  filteredTipologia!: Observable<TipologieContenzioso[]>;\r\n  filteredAspettiDaValutare!: Observable<AspettoConDescrizione[]>;\r\n\r\n  // STEP1: DROPDOWN LIST\r\n  settoreMateria: SettoreMateria[] | undefined = [];\r\n  areaProdotto: AreaProdotto[] | undefined = [];\r\n  areeProdotti: AreaProdotto | undefined;\r\n  nomeSettoreMateria!: string;\r\n  nomeAreaProdotto!: string;\r\n  nomeSede!: string;\r\n  numeroCodiceSede!: string;\r\n  nomeCodiceSede!: string;\r\n  nomeTipologiaContenzioso!: string;\r\n  loadTipoSegnalazioni: any;\r\n  // STEP2: DROPDOWN LIST ASPETTI DA VALUTARE\r\n  aspettiDaValutare: AspettoConDescrizione[] = [];\r\n  fileSegnalazione: File | null = null;\r\n  filesAspetti: { file: File; idAspetto: number }[] = [];\r\n\r\n  constructor(\r\n    private prodottiSrv: ProdottiService, private rilevazioneSrv: RilevazioneService, private router: Router,\r\n    private _formBuilder: FormBuilder, private dialog: MatDialog, private stepperService: StepperService,\r\n    private settoreMateriaService: SettoreMateriaService, private areeProdottiService: Aree, private territorioService: TerritorioService,\r\n    private contenziosoService: ContenziosoService, private storageService: StorageService, private documentiService: DocumentiService\r\n  ) {}\r\n\r\n  ngOnDestroy(): void {\r\n    this.stepperService.datiSegnalazioneProdotto$.next(undefined);\r\n    this.stepperService.datiSegnalazioneContenzioso$.next(undefined);\r\n    this.listaAspettiAggiunti = [];\r\n  }\r\n\r\n  formatToSixDigits(value: any): string {\r\n    const numberValue = Number(value);\r\n    if (isNaN(numberValue)) {\r\n      return '';\r\n    }\r\n    return numberValue.toString().padStart(6, '0');\r\n  }\r\n\r\n  async ngOnInit() {\r\n    try {\r\n      const codiceSedeString = this.storageService.getItem('listaSedi');\r\n      this.role = this.storageService.getItem('allroles');\r\n      this.codiceSede = codiceSedeString;\r\n      this.loadTipoSegnalazioni = this.stepperService.inserimentoTipoSegnalazione$.value;\r\n\r\n      await this.getSettoriMaterie();\r\n      await this.getAllAreaProdotto();\r\n      await this.loadTipologieContenzioso();\r\n      this.loadAspettiDaValutare();\r\n\r\n      await this.getSedi();\r\n      await this.ensureSediLoaded();\r\n\r\n      const savedSegnalazioneProdotto = this.stepperService.datiSegnalazioneProdotto$.value;\r\n      const savedSegnalazioneContenzioso = this.stepperService.datiSegnalazioneContenzioso$.value;\r\n\r\n      if (this.loadTipoSegnalazioni === 'Prodotto' && savedSegnalazioneProdotto) {\r\n        this.segnalazioneProdotto = savedSegnalazioneProdotto;\r\n        const ruolo = this.selectRole();\r\n        this.documentiService.findAllegatoSegnalazione(this.segnalazioneProdotto.id, ruolo, \"Prodotto\").subscribe({\r\n          next:(res) => {\r\n            this.showGestioneFileDatiGenerali = res.esito;\r\n            this.isFileDatiGenerali = res.esito;\r\n            if(this.isFileDatiGenerali && this.segnalazioneProdotto){\r\n              this.documentiService.getFileSegnalazione(this.segnalazioneProdotto.id, \"Prodotto\", ruolo).subscribe({\r\n                next: (response) => {\r\n                  const contentDisposition = response.headers.get('Content-Disposition');\r\n                  const fileName = this.getFileNameFromContentDisposition(contentDisposition);\r\n                  const blob = response.body;\r\n                  const fileSize = blob?.size;\r\n                  const fileSizeMb = fileSize?fileSize/(1024*1024): 0;\r\n                  const fileData = [{\r\n                    fileName,\r\n                    fileSize: fileSizeMb\r\n                  }]\r\n                  this.dataFileSegnalazione = fileData;\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n\r\n        const settore = this.settoreMateria?.find(\r\n          option => option.id === this.segnalazioneProdotto?.settoreId\r\n        );\r\n        if (settore) {\r\n          this.settoreCtrl.setValue(settore);\r\n          this.firstFormGroup.patchValue({ settoreMateria: settore.id });\r\n        }\r\n\r\n        if (this.segnalazioneProdotto?.settoreId) {\r\n          await this.areeProdottiService\r\n            .newGetAllByIdSettore(this.segnalazioneProdotto?.settoreId)\r\n            .toPromise();\r\n          const area = this.areaProdotto?.find(\r\n            option => option.id === this.segnalazioneProdotto?.areaId\r\n          );\r\n          if (area) {\r\n            this.areaCtrl.setValue(area);\r\n            this.firstFormGroup.patchValue({ areaProdotto: area.id });\r\n          }\r\n        }\r\n        const sedeIdFormatted = this.formatToSixDigits(this.segnalazioneProdotto?.sedeId);\r\n        const sede = this.sede?.find(\r\n          option => this.formatToSixDigits(option.id?.toString() ?? '') === sedeIdFormatted\r\n        );\r\n        if (sede) {\r\n          this.sedeCtrl.setValue(sede);\r\n          this.firstFormGroup.patchValue({ sede: sede.id });\r\n        } else {\r\n        }\r\n        await this.loadDettagliSegnalazioneProdotto(this.segnalazioneProdotto.id);\r\n      } else if (this.loadTipoSegnalazioni === 'Contenzioso' && savedSegnalazioneContenzioso) {\r\n        this.segnalazioneContenzioso = savedSegnalazioneContenzioso;\r\n        const ruolo = this.selectRole()\r\n        this.documentiService.findAllegatoSegnalazione(this.segnalazioneContenzioso.id, ruolo, \"Contenzioso\").subscribe({\r\n          next: (res) => {\r\n            this.showGestioneFileDatiGenerali = res.esito;\r\n            this.isFileDatiGenerali = res.esito;\r\n            if(this.isFileDatiGenerali && this.segnalazioneContenzioso){\r\n              this.documentiService.getFileSegnalazione(this.segnalazioneContenzioso.id, \"Contenzioso\", ruolo).subscribe({\r\n                next: (res) => {\r\n                  const contentDisposition = res.headers.get('Content-Disposition');\r\n                  const fileName = this.getFileNameFromContentDisposition(contentDisposition);\r\n                  const blob = res.body;\r\n                  const fileSize = blob?.size;\r\n                  const fileSizeMb = fileSize?fileSize/(1024*1024): 0;\r\n                  const fileData = [{\r\n                    fileName,\r\n                    fileSize: fileSizeMb\r\n                  }]\r\n                  this.dataFileSegnalazione = fileData;\r\n                }\r\n              })\r\n            }\r\n          }\r\n        });\r\n        const settore = this.settoreMateria?.find(\r\n          option => option.id === this.segnalazioneContenzioso?.settoreId\r\n        );\r\n        if (settore) {\r\n          this.settoreCtrl.setValue(settore);\r\n          this.firstFormGroup.patchValue({ settoreMateria: settore.id });\r\n        }\r\n\r\n        if (this.segnalazioneContenzioso?.settoreId) {\r\n          await this.areeProdottiService\r\n            .newGetAllByIdSettore(this.segnalazioneContenzioso?.settoreId)\r\n            .toPromise();\r\n          const area = this.areaProdotto?.find(\r\n            option => option.id === this.segnalazioneContenzioso?.areaId\r\n          );\r\n          if (area) {\r\n            this.areaCtrl.setValue(area);\r\n            this.firstFormGroup.patchValue({ areaProdotto: area.id });\r\n          }\r\n        }\r\n\r\n        const sedeIdFormatted = this.formatToSixDigits(this.segnalazioneContenzioso?.sedeId);\r\n\r\n        const sede = this.sede?.find(\r\n          option => this.formatToSixDigits(option.id?.toString() ?? '') === sedeIdFormatted\r\n        );\r\n        if (sede) {\r\n          this.sedeCtrl.setValue(sede);\r\n          this.firstFormGroup.patchValue({ sede: sede.id });\r\n        }\r\n        const tipologia = this.tipologieContenzioso?.find(\r\n          option => option.id === this.segnalazioneContenzioso?.contenziosoId\r\n        );\r\n        if (tipologia) {\r\n          this.tipologiaCtrl.setValue(tipologia);\r\n          this.firstFormGroup.patchValue({ tipologiaContenzioso: tipologia.id });\r\n        }\r\n        await this.loadDettagliSegnalazioneContenzioso(this.segnalazioneContenzioso.id);\r\n      }\r\n\r\n      this.filteredSettoreMateria = this.settoreCtrl.valueChanges.pipe(\r\n        startWith(this.settoreCtrl.value ?? ''),\r\n        map(value => this._filterSettore(value))\r\n      );\r\n\r\n      this.filteredAreaProdotto = this.areaCtrl.valueChanges.pipe(\r\n        startWith(this.areaCtrl.value ?? ''),\r\n        map(value => this._filterArea(value))\r\n      );\r\n\r\n      this.filteredSede = this.sedeCtrl.valueChanges.pipe(\r\n        startWith(this.sedeCtrl.value ?? ''),\r\n        map(value => this._filterSede(value))\r\n      );\r\n\r\n      this.filteredTipologia = this.tipologiaCtrl.valueChanges.pipe(\r\n        startWith(this.tipologiaCtrl.value ?? ''),\r\n        map(value => this._filterTipologia(value))\r\n      );\r\n      this.filteredAspettiDaValutare = this.aspettiCtrl.valueChanges.pipe(\r\n        startWith(this.aspettiCtrl.value ?? ''),\r\n        map(value => this._filterAspetti(value))\r\n      );\r\n\r\n    } catch (error) {\r\n      // console.error('Error in ngOnInit:', error);\r\n    }\r\n\r\n    this.statoSegnalazione =\r\n      this.segnalazioneProdotto == null\r\n        ? this.statoSegnalazione\r\n        : this.segnalazioneProdotto.statoId;\r\n    this.statoSegnalazione =\r\n      this.segnalazioneContenzioso == null\r\n        ? this.statoSegnalazione\r\n        : this.segnalazioneContenzioso.statoId;\r\n  }\r\n\r\n  async ensureSediLoaded() {\r\n    while (!this.sede || !this.sede.length) {\r\n      await new Promise(resolve => setTimeout(resolve, 100));\r\n    }\r\n  }\r\n\r\n  async loadDettagliSegnalazioneProdotto(id: number) {\r\n    try {\r\n      const data = await this.rilevazioneSrv.getDettagliSegnalazioneById(id).toPromise();\r\n\r\n      // Mappa gli aspetti già aggiunti\r\n      this.listaAspettiAggiunti = data.map((item: any) => ({\r\n        idAspetto: item.idAspetto,\r\n        nomeAspetto: item.nomeAspetto,\r\n        descrizioneCriticita: item.criticita,\r\n        descrizioneSuggerimento: item.suggerimento,\r\n        nuovoAspetto: item.nuovoAspetto\r\n      }));\r\n\r\n      // Verifico se presente un nuovo aspetto per disabilitare il'opzione Altro della select aspettiDaValutare\r\n      for (let i = 0; i < data.length; i++) {\r\n        if (data[i].nuovoAspetto === true) {\r\n          this.checkNuovoAspetto = true;\r\n        }\r\n      }\r\n\r\n      // Rimuovi gli aspetti già aggiunti dalla lista degli aspetti da valutare\r\n      this.aspettiDaValutare = this.aspettiDaValutare.filter(aspetto =>\r\n        !this.listaAspettiAggiunti.some(aggiunto => aggiunto.idAspetto === aspetto.idAspetto)\r\n      );\r\n\r\n      // Aggiungi gli idAspetti degli aspetti già aggiunti alla segnalazione\r\n      this.listaAspettiAggiunti.forEach(aspetto => {\r\n        if (aspetto.idAspetto) {\r\n          this.idAspetti.push(aspetto.idAspetto);\r\n        }\r\n      });\r\n\r\n      if (this.segnalazioneProdotto?.id != null) {\r\n        const ruolo = this.selectRole();\r\n        this.documentiService.findAllegatiAspetti(this.segnalazioneProdotto?.id, this.idAspetti, \"Prodotto\", ruolo).subscribe({\r\n          next: (res: AspettoAllegato[]) => {\r\n            this.isFileAspetti = res;\r\n\r\n            this.listaAspettiAggiunti.forEach(aspetto => {\r\n              const isAllegato = this.isFileAspetti.find(a => a.idAspetto === aspetto.idAspetto);\r\n              if (isAllegato) {\r\n                aspetto.hasAllegato = isAllegato.esito;\r\n                if (aspetto.hasAllegato && this.segnalazioneProdotto?.id != null) {\r\n                  this.documentiService.getFileAspetti(this.segnalazioneProdotto.id, aspetto.idAspetto, \"Prodotto\", ruolo).subscribe({\r\n                    next: (res) => {\r\n                      const contentDisposition = res.headers.get('Content-Disposition');\r\n                      const aspettoFileName = {\r\n                        idAspetto: aspetto.idAspetto,\r\n                        fileName: this.getFileNameFromContentDisposition(contentDisposition)\r\n                      };\r\n                      this.nomiFileAspetti.push(aspettoFileName);\r\n                    }\r\n                  });\r\n                }\r\n              }\r\n            });\r\n          }\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Errore durante la ricerca dei dettagli della segnalazione: ', error);\r\n    }\r\n  }\r\n\r\n  async loadDettagliSegnalazioneContenzioso(id: number) {\r\n    try {\r\n      const data = await this.rilevazioneSrv.getDettagliSegnalazioneContenziosoById(id).toPromise();\r\n\r\n      // Mappa gli aspetti già aggiunti\r\n      this.listaAspettiAggiunti = data.map((item: any) => ({\r\n        idAspetto: item.idAspetto,\r\n        nomeAspetto: item.nomeAspetto,\r\n        descrizioneCriticita: item.criticita,\r\n        descrizioneSuggerimento: item.suggerimento,\r\n        hasAllegato: false,\r\n        nuovoAspetto: item.nuovoAspetto\r\n      }));\r\n      // Verifico se presente un nuovo aspetto per disabilitare il'opzione Altro della select aspettiDaValutare\r\n      for (let i = 0; i < data.length; i++) {\r\n        if (data[i].nuovoAspetto === true) {\r\n          this.checkNuovoAspetto = true;\r\n        }\r\n      }\r\n\r\n      // Rimuovi gli aspetti già aggiunti dalla lista degli aspetti da valutare\r\n      this.aspettiDaValutare = this.aspettiDaValutare.filter(aspetto =>\r\n        !this.listaAspettiAggiunti.some(aggiunto => aggiunto.idAspetto === aspetto.idAspetto)\r\n      );\r\n\r\n      // Aggiungi gli idAspetti degli aspetti già aggiunti alla segnalazione\r\n      this.listaAspettiAggiunti.forEach(aspetto => {\r\n        if (aspetto.idAspetto) {\r\n          this.idAspetti.push(aspetto.idAspetto);\r\n        }\r\n      });\r\n\r\n      if (this.segnalazioneContenzioso && this.segnalazioneContenzioso.id != null) {\r\n        const ruolo = this.selectRole();\r\n        this.documentiService.findAllegatiAspetti(this.segnalazioneContenzioso.id, this.idAspetti, \"Contenzioso\", ruolo).subscribe({\r\n          next: (res: AspettoAllegato[]) => {\r\n            this.isFileAspetti = res;\r\n\r\n            this.listaAspettiAggiunti.forEach(aspetto => {\r\n              const allegato = this.isFileAspetti.find(a => a.idAspetto === aspetto.idAspetto);\r\n              if (allegato && allegato.esito) {\r\n                aspetto.hasAllegato = true;\r\n\r\n                if (aspetto.idAspetto !== undefined && this.segnalazioneContenzioso?.id != null) {\r\n                  this.documentiService.getFileAspetti(this.segnalazioneContenzioso.id, aspetto.idAspetto, \"Contenzioso\", ruolo).subscribe({\r\n                    next: (res) => {\r\n                      const contentDisposition = res.headers.get('Content-Disposition');\r\n                      const aspettoFileName = {\r\n                        idAspetto: aspetto.idAspetto,\r\n                        fileName: this.getFileNameFromContentDisposition(contentDisposition)\r\n                      };\r\n                      this.nomiFileAspetti.push(aspettoFileName);\r\n                    }\r\n                  });\r\n                }\r\n              }\r\n            });\r\n          }\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Errore durante la ricerca dei dettagli della segnalazione: ', error);\r\n    }\r\n  }\r\n\r\n  // NUOVO\r\n\r\n  private _filterSettore(value: string | SettoreMateria): SettoreMateria[] {\r\n    const filterValue = (typeof value === 'string' ? value : value?.nome || '').toLowerCase();\r\n    return (\r\n      this.settoreMateria?.filter(option => option.nome.toLowerCase().includes(filterValue)) ?? []\r\n    );\r\n  }\r\n\r\n  private _filterArea(value: string | AreaProdotto): AreaProdotto[] {\r\n    const filterValue = (typeof value === 'string' ? value : value?.nome || '').toLowerCase();\r\n    return (\r\n      this.areaProdotto?.filter(option => option.nome.toLowerCase().includes(filterValue)) ?? []\r\n    );\r\n  }\r\n\r\n  private _filterSede = (value: string | Sede): Sede[] => {\r\n    const filterValue = (\r\n      typeof value === 'string' ? value : this.formatToSixDigits(value?.id?.toString() ?? '')\r\n    ).toLowerCase();\r\n    return (\r\n      this.sede?.filter(\r\n        option =>\r\n          this.formatToSixDigits(option.id?.toString() ?? '')\r\n            ?.toLowerCase()\r\n            .includes(filterValue) || option.nome.toLowerCase().includes(filterValue)\r\n      ) ?? []\r\n    );\r\n  };\r\n\r\n  private _filterTipologia = (value: string | TipologieContenzioso): TipologieContenzioso[] => {\r\n    const filterValue = (typeof value === 'string' ? value : value?.nome || '').toLowerCase();\r\n    return (\r\n      this.tipologieContenzioso?.filter(option =>\r\n        option.nome.toLowerCase().includes(filterValue)\r\n      ) ?? []\r\n    );\r\n  };\r\n\r\n  private _filterAspetti(value: any): AspettoConDescrizione[] {\r\n    let filterValue = '';\r\n\r\n    if (typeof value === 'string') {\r\n      filterValue = value.toLowerCase();\r\n    } else if (value && value.nomeAspetto) {\r\n      filterValue = value.nomeAspetto.toLowerCase();\r\n    }\r\n\r\n    return this.aspettiDaValutare\r\n      .filter(option => option && option.nomeAspetto) // Assicurati che l'opzione abbia un nome\r\n      .filter(option => option.nomeAspetto.toLowerCase().includes(filterValue));\r\n  }\r\n\r\n\r\n  displayAspetto(aspetto?: AspettoConDescrizione): string {\r\n    return aspetto && aspetto.nomeAspetto ? aspetto.nomeAspetto :  '';\r\n  }\r\n\r\n  async getSettoriMaterie() {\r\n    this.settoreMateriaService.getSettoriConAreeProdotti().subscribe((data: SettoreMateria[] | string) => {\r\n      const emptyObject: SettoreMateria = { id: null, nome: '' };\r\n      if (Array.isArray(data)) {\r\n        this.settoreMateria = [emptyObject, ...data];\r\n      } else {\r\n        this.settoreMateria = [emptyObject];\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  async getAllAreaProdotto() {\r\n    await this.areeProdottiService.getAllAreaProdotto().subscribe((data: any) => {\r\n      const emptyObject: AreaProdotto = { id: null, nome: '' };\r\n      this.areaProdotto = [emptyObject, ...data];\r\n    });\r\n  }\r\n\r\n  settoreSelected(event: any) {\r\n    const selectedSettore = event.option.value;\r\n    const selectedId = selectedSettore.id;\r\n\r\n    this.firstFormGroup.patchValue({ settoreMateria: selectedId });\r\n\r\n    if (selectedId && selectedId !== null && selectedId !== undefined) {\r\n      this.areeProdottiService.newGetAllByIdSettore(selectedId).subscribe(\r\n        (data: any) => {\r\n          const emptyObject: AreaProdotto = { id: null, nome: '' };\r\n          this.areaProdotto = [emptyObject, ...data];\r\n        },\r\n        error => {\r\n          console.error('Errore durante il caricamento delle aree prodotti:', error);\r\n        }\r\n      );\r\n    } else {\r\n      console.warn('ID Settore non valido:', selectedId);\r\n    }\r\n  }\r\n\r\n  areaSelected(event: any) {\r\n    if (event.option && event.option.value) {\r\n      const selectedArea = event.option.value;\r\n      const selectedAreaId = selectedArea.id;\r\n      const selectedSettoreId = selectedArea.idSettore;\r\n      this.firstFormGroup.patchValue({ areaProdotto: selectedAreaId });\r\n\r\n      const selectedSettore = this.settoreMateria?.find(option => option.id === selectedSettoreId);\r\n      if (selectedSettore) {\r\n        this.firstFormGroup.patchValue({ settoreMateria: selectedSettore.id });\r\n        this.settoreCtrl.setValue(selectedSettore);\r\n      } else {\r\n        console.warn('Settore non trovato per ID:', selectedSettoreId);\r\n      }\r\n    } else {\r\n      console.error('Evento non contiene un valore valido:', event);\r\n    }\r\n  }\r\n\r\n  sedeSelected(event: any) {\r\n    if (event.option && event.option.value) {\r\n      const selectedSede = event.option.value;\r\n      const selectedSedeId = selectedSede.id;\r\n      this.firstFormGroup.patchValue({ sede: selectedSedeId });\r\n    } else {\r\n      console.error('Evento non contiene un valore valido:', event);\r\n    }\r\n  }\r\n\r\n  tipologiaSelected(event: any) {\r\n    const selectedTipologia = event.option.value;\r\n    const selectedId = selectedTipologia.id;\r\n    this.firstFormGroup.patchValue({ tipologiaContenzioso: selectedId });\r\n  }\r\n\r\n  aspettoSelected(selectedAspetto: AspettoConDescrizione) {\r\n    if (!selectedAspetto || !selectedAspetto.nomeAspetto) {\r\n        return;\r\n    }\r\n\r\n    this.aspettiCtrl.setValue(selectedAspetto);\r\n    this.secondFormGroup.patchValue({ step2Aspetti: selectedAspetto.idAspetto });\r\n}\r\n\r\n\r\n  clearSettore() {\r\n    this.settoreCtrl.setValue('');\r\n    this.firstFormGroup.patchValue({ settoreMateria: '' });\r\n    this.getAllAreaProdotto();\r\n    this.clearArea();\r\n  }\r\n\r\n  clearArea() {\r\n    this.areaCtrl.setValue('');\r\n    this.firstFormGroup.patchValue({ areaProdotto: '' });\r\n\r\n    const settoreId = this.settoreCtrl.value ? this.settoreCtrl.value.id : null;\r\n    if (settoreId !== null) {\r\n      this.areeProdottiService.newGetAllByIdSettore(settoreId).subscribe(\r\n        (data: any) => {\r\n          const emptyObject: AreaProdotto = { id: null, nome: '' };\r\n          this.areaProdotto = [emptyObject, ...data];\r\n          this.filteredAreaProdotto = this.areaCtrl.valueChanges.pipe(\r\n            startWith(this.areaCtrl.value),\r\n            map(value => this._filterArea(value))\r\n          );\r\n        },\r\n        error => {\r\n          console.error('Errore durante il caricamento delle aree prodotti:', error);\r\n        }\r\n      );\r\n    } else {\r\n      // Se non c'è un settore selezionato, carica tutte le aree prodotto\r\n      this.getAllAreaProdotto();\r\n    }\r\n  }\r\n\r\n\r\n  clearSede() {\r\n    this.sedeCtrl.setValue('');\r\n    this.firstFormGroup.patchValue({ sede: '' });\r\n  }\r\n\r\n  clearTipologia() {\r\n    this.tipologiaCtrl.setValue('');\r\n    this.firstFormGroup.patchValue({ tipologiaContenzioso: '' });\r\n  }\r\n\r\n  /*clearAspetto() {\r\n    this.aspettiCtrl.setValue('');\r\n    this.secondFormGroup.patchValue({ step2Aspetti: '' });\r\n  }*/\r\n  clearAspetto() {\r\n    if (this.aspettiCtrl.value.idAspetto > this.maxIdAspettiDaValutare) {\r\n      this.aspettiDaValutare.pop();\r\n      this.checkNuovoAspetto = false;\r\n    }\r\n    // Imposta il valore del controllo su una stringa vuota\r\n    this.aspettiCtrl.setValue('');\r\n    // Rimuove il valore dal form group (se necessario)\r\n    this.secondFormGroup.patchValue({ step2Aspetti: null });\r\n\r\n    // Forza il filtro a ritriggerare inviando un valore vuoto o spazio per rilanciare il filtro\r\n    this.filteredAspettiDaValutare = this.aspettiCtrl.valueChanges.pipe(\r\n      startWith(''),\r\n      map(value => this._filterAspetti(value || ''))\r\n    );\r\n  }\r\n\r\n  onFocus(ctrl: FormControl): void {\r\n    if (!ctrl.value || ctrl.value === '') {\r\n      ctrl.setValue(' ');\r\n      setTimeout(() => ctrl.setValue(''), 1);\r\n    }\r\n  }\r\n\r\n\r\n  displaySettore(settore?: SettoreMateria): string {\r\n    return settore ? settore.nome : '';\r\n  }\r\n\r\n  displayArea(area?: AreaProdotto): string {\r\n    return area ? area.nome : '';\r\n  }\r\n\r\n  displaySede = (sede?: Sede): string => {\r\n    if (!sede || sede.id === null || sede.id === undefined) {\r\n      return '';\r\n    }\r\n    const formattedId = this.formatToSixDigits(sede.id?.toString() ?? '');\r\n    return `${formattedId} - ${sede.nome}`;\r\n  };\r\n\r\n  displayTipologia(tipologia?: TipologieContenzioso): string {\r\n    return tipologia ? tipologia.nome : '';\r\n  }\r\n\r\n\r\n  async areaProdottoSelezionato(idSettore: number, tipoSegnalazione: string) {\r\n    const prodotto = 'Prodotto';\r\n    const contenzioso = 'Contenzioso';\r\n\r\n    this.areeProdottiService.newGetAllByIdSettore(idSettore).subscribe((data: any) => {\r\n      this.areaProdotto = [...data];\r\n\r\n      for (let i = 0; i < data.length; i++) {\r\n        this.areaProdotto![i].id = data[i].id;\r\n        this.areaProdotto![i].nome = data[i].nome;\r\n      }\r\n\r\n      switch (tipoSegnalazione) {\r\n        case prodotto: {\r\n          for (let i = 0; i < this.areaProdotto!.length; i++) {\r\n            if (\r\n              this.stepperService.datiSegnalazioneProdotto$.value!.areaProdotto ==\r\n              this.areaProdotto![i].nome\r\n            ) {\r\n              this.firstFormGroup.patchValue({ areaProdotto: this.areaProdotto![i].id });\r\n              break;\r\n            }\r\n          }\r\n          break;\r\n        }\r\n\r\n        case contenzioso: {\r\n          for (let i = 0; i < this.areaProdotto!.length; i++) {\r\n            if (\r\n              this.stepperService.datiSegnalazioneContenzioso$.value!.areaProdotto ==\r\n              this.areaProdotto![i].nome\r\n            ) {\r\n              this.firstFormGroup.patchValue({ areaProdotto: this.areaProdotto![i].id });\r\n              break;\r\n            }\r\n          }\r\n          break;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  toggleAllegaDatiGenerali() {\r\n\r\n    if(!this.isFileDatiGenerali || this.showGestioneFileDatiGenerali)\r\n      this.showGestioneFileDatiGenerali = !this.showGestioneFileDatiGenerali;\r\n  }\r\n\r\n  onFilesAddedDatiGenerali(file: any) {\r\n    this.fileSegnalazione = file;\r\n  }\r\n\r\n  removeFileSegnalazione(file: any) {\r\n    if (\r\n      this.fileSegnalazione &&\r\n      this.fileSegnalazione.name === file.name &&\r\n      this.fileSegnalazione.size === file.size\r\n    ) {\r\n      this.fileSegnalazione = null;\r\n    }\r\n  }\r\n\r\n  removeFileAspetti(event: { file: File; idAspetto?: number }) {\r\n    const index = this.filesAspetti.findIndex(\r\n      f =>\r\n        f.file.name === event.file.name &&\r\n        f.file.size === event.file.size &&\r\n        f.idAspetto === event.idAspetto\r\n    );\r\n    if (index !== -1) {\r\n      this.filesAspetti.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  onFilesAddedCriticita(file: any) {\r\n    this.filesAspetti.push(file);\r\n  }\r\n\r\n  async getSedi() {\r\n    const ruoliTrimmed = this.role!.split(';').map(ruolo => ruolo.trim());\r\n\r\n    if (ruoliTrimmed.includes('P12689') || ruoliTrimmed.includes('P12690')) {\r\n      // Caso 1: specifici ruoli sono presenti\r\n    } else {\r\n      if (\r\n        (ruoliTrimmed.includes(this.ruoloRegionale) ||\r\n          ruoliTrimmed.includes(this.ruoloProvinciale)) &&\r\n        this.codiceSede.length === 0\r\n      ) {\r\n        alert('Non ci sono sedi associate al tuo account.');\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.territorioService\r\n      .getSedi(\r\n        this.role!,\r\n        this.codiceSede,\r\n        this.loadTipoSegnalazioni,\r\n        this.ruoloRegionale,\r\n        this.ruoloProvinciale\r\n      )\r\n      .subscribe((results: Sede[]) => {\r\n        const emptyObject: Sede = { id: null, nome: '' };\r\n        this.sede = [emptyObject, ...results];\r\n\r\n        if (this.sede.length === 0) {\r\n          alert('Non ci sono sedi disponibili.');\r\n          return;\r\n        }\r\n\r\n        const segnalazioneProdotto = this.stepperService.datiSegnalazioneProdotto$.value;\r\n        const segnalazioneContenzioso = this.stepperService.datiSegnalazioneContenzioso$.value;\r\n\r\n        const selectedSede =\r\n          this.loadTipoSegnalazioni === 'Prodotto' && segnalazioneProdotto\r\n            ? segnalazioneProdotto.sede\r\n            : segnalazioneContenzioso\r\n            ? segnalazioneContenzioso.sede\r\n            : null;\r\n\r\n        if (selectedSede) {\r\n          this.sede.forEach(sede => {\r\n            if (selectedSede === sede.nome) {\r\n              this.firstFormGroup.patchValue({ sede: sede.id });\r\n            }\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n\r\n  async loadTipologieContenzioso() {\r\n    this.contenziosoService.getAllTioplogie().subscribe((data: Sede[]) => {\r\n      this.tipologieContenzioso.unshift({ id: null, nome: '' });\r\n      const emptyObject: TipologieContenzioso = { id: null, nome: '' };\r\n      this.tipologieContenzioso = [emptyObject, ...data];\r\n\r\n      if (this.stepperService.datiSegnalazioneContenzioso$.value! != undefined) {\r\n        for (let i = 0; i < this.tipologieContenzioso!.length; i++) {\r\n          if (\r\n            this.stepperService.datiSegnalazioneContenzioso$.value!.contenziosoDesc ==\r\n            this.tipologieContenzioso![i].nome\r\n          ) {\r\n            this.firstFormGroup.patchValue({\r\n              tipologiaContenzioso: this.tipologieContenzioso![i].id,\r\n            });\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  stepperChange(event: any) {\r\n    this.formatIdToNameStep1();\r\n\r\n    if (event.selectedIndex == 2) {\r\n      this.tableStep3.renderRows();\r\n    }\r\n    if (event.selectedIndex == 3) {\r\n      this.tableStep4.renderRows();\r\n    }\r\n  }\r\n\r\n  aggiungiAspettoCriticita() {\r\n    const esito = this.stepperService.checkStringOnlySpaces(this.secondFormGroup.value.step2Criticita!.trim());\r\n    if (!esito) {\r\n      const aspettoId = Number(this.secondFormGroup.value.step2Aspetti!);\r\n      const aspetto = this.aspettiDaValutare.find(a => a.idAspetto === aspettoId);\r\n      if (aspetto) {\r\n\r\n        this.listaAspettiAggiunti.push({\r\n          idAspetto: aspetto.idAspetto > this.maxIdAspettiDaValutare ? -1 : aspetto.idAspetto,\r\n          nomeAspetto: aspetto.nomeAspetto,\r\n          descrizioneCriticita: this.secondFormGroup.value.step2Criticita!.trim(),\r\n          descrizioneSuggerimento: '',\r\n          hasAllegato: false,\r\n          nuovoAspetto: aspetto.idAspetto > this.maxIdAspettiDaValutare ? true : false\r\n        });\r\n        // Verifico la presenza di nuovi aspetti\r\n        if (aspetto.idAspetto > this.maxIdAspettiDaValutare) {\r\n          this.checkNuovoAspetto = true;\r\n        }\r\n\r\n        // Rimuovi dalla lista degli aspetti da valutare\r\n        this.aspettiDaValutare = this.aspettiDaValutare.filter(a => a.idAspetto !== aspettoId);\r\n\r\n        // Ordina gli aspetti in modo che quelli con ID negativi (nuovi) siano in fondo\r\n        this.aspettiDaValutare.sort((a, b) => a.idAspetto - b.idAspetto);\r\n        // this.aspettiDaValutare.sort((a, b) => (a.idAspetto > b.idAspetto ? 1 : -1));\r\n\r\n        // this.clearAspetto();\r\n        // Imposta il valore del controllo su una stringa vuota\r\n        this.aspettiCtrl.setValue('');\r\n        // Rimuove il valore dal form group (se necessario)\r\n        this.secondFormGroup.patchValue({ step2Aspetti: null });\r\n\r\n        // Forza il filtro a ritriggerare inviando un valore vuoto o spazio per rilanciare il filtro\r\n        this.filteredAspettiDaValutare = this.aspettiCtrl.valueChanges.pipe(\r\n          startWith(''),\r\n          map(value => this._filterAspetti(value || ''))\r\n        );\r\n\r\n        this.secondFormGroup.reset();\r\n        if (this.listaAspettiAggiunti.length - 1 > 0) { // conto l'elemento appena aggiunto; evito errore nella console\r\n          this.tableStep2.renderRows();\r\n        }\r\n      }\r\n    } else {\r\n      alert('Inserire una descrizione valida per proseguire.');\r\n    }\r\n\r\n    this.clearAspetto();\r\n  }\r\n\r\n  rimuoviAspettoAggiunto(idAspettoAggiunto: number) {\r\n\r\n    for (let i = 0; i < this.listaAspettiAggiunti.length; i++) {\r\n\r\n      if (this.listaAspettiAggiunti[i].idAspetto == idAspettoAggiunto) {\r\n\r\n        // Verifico che sia un aspetto standard (aspetto Altro ha id negativo) &&\r\n        // && che non sia un aspetto Altro inserito precedentemente e ora recuperato per la modifica\r\n        if (idAspettoAggiunto > 0 && this.listaAspettiAggiunti[i].nuovoAspetto == false) {\r\n          this.aspettiDaValutare.push({\r\n            idAspetto: this.listaAspettiAggiunti[i].idAspetto,\r\n            nomeAspetto: this.listaAspettiAggiunti[i].nomeAspetto,\r\n            descrizioneAspetto: '',\r\n          });\r\n        }\r\n        else {\r\n          this.checkNuovoAspetto = false;\r\n        }\r\n\r\n        if (this.listaAspettiAggiunti[i].hasAllegato){\r\n          this.deleteFileAspetto(idAspettoAggiunto);\r\n        }\r\n\r\n        this.listaAspettiAggiunti.splice(i, 1);\r\n        this.tableStep2.renderRows();\r\n\r\n        this.aspettiDaValutare.sort((a, b) => (a.idAspetto > b.idAspetto ? 1 : -1));\r\n\r\n        this.filteredAspettiDaValutare = this.aspettiCtrl.valueChanges.pipe(\r\n          startWith(''),\r\n          map(value => this._filterAspetti(value || ''))\r\n        );\r\n        break;\r\n      }\r\n    }\r\n    const index = this.filesAspetti.findIndex(f => f.idAspetto === idAspettoAggiunto);\r\n    if (index !== -1) {\r\n      this.filesAspetti.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  modifica(aspettiAggiunti: Aspetto, casoDaModificare: string) {\r\n    const criticita = 'Criticita';\r\n    const suggerimento = 'Suggerimento';\r\n\r\n    this.stepperService.datiAspetto$.next(aspettiAggiunti);\r\n    this.stepperService.setTitolo(casoDaModificare);\r\n\r\n    casoDaModificare === criticita || casoDaModificare === suggerimento\r\n      ? this.dialogStepperModifica()\r\n      : null;\r\n  }\r\n\r\n  show(nota: string) {\r\n    alert(nota);\r\n  }\r\n\r\n  dialogStepperModifica() {\r\n    const dialogRef = this.dialog.open(StepperDialogModificaComponent, {\r\n      disableClose: true,\r\n      width: '75%',\r\n      height: '60%',\r\n    });\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      for (let i = 0; i < this.listaAspettiAggiunti.length; i++) {\r\n        if (\r\n          this.stepperService.datiAspetto$.value!.idAspetto ==\r\n          this.listaAspettiAggiunti[i].idAspetto\r\n        ) {\r\n          this.listaAspettiAggiunti[i].descrizioneCriticita =\r\n            this.stepperService.datiAspetto$.value!.descrizioneCriticita;\r\n          this.listaAspettiAggiunti[i].descrizioneSuggerimento =\r\n            this.stepperService.datiAspetto$.value!.descrizioneSuggerimento;\r\n          break;\r\n        }\r\n      }\r\n      this.stepperService.datiAspetto$.next(undefined);\r\n    });\r\n  }\r\n\r\n  dialogStepperCreazioneAspetto() {\r\n    const dialogConfig = new MatDialogConfig();\r\n    dialogConfig.disableClose = true;\r\n    dialogConfig.autoFocus = true;\r\n    dialogConfig.data = 2;\r\n\r\n    let dialogRef = this.dialog.open(StepperDialogCreazioneAspettoComponent, dialogConfig);\r\n\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      if (this.stepperService.nuovoAspetto$.value !== '') {\r\n        const nuovoAspetto = {\r\n          nomeAspetto: this.stepperService.nuovoAspetto$.value,\r\n          idAspetto: this.maxIdAspettiDaValutare + 1,\r\n          descrizioneAspetto: '',\r\n        };\r\n        this.aspettiDaValutare.push(nuovoAspetto);\r\n        this.checkNuovoAspetto = true;\r\n        const ultimoAspetto = this.aspettiDaValutare[this.aspettiDaValutare.length - 1];\r\n        this.aspettiCtrl.setValue(ultimoAspetto)\r\n        this._filterAspetti(ultimoAspetto)\r\n        this.secondFormGroup.patchValue({\r\n          step2Aspetti: nuovoAspetto.idAspetto,\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  invia(statoSegnalazione: number) {\r\n    let datiSegnalazione: any;\r\n    if (this.loadTipoSegnalazioni === 'Prodotto') {\r\n      datiSegnalazione = this.stepperService.datiSegnalazioneProdotto$.value || {};\r\n    } else if (this.loadTipoSegnalazioni === 'Contenzioso') {\r\n      datiSegnalazione = this.stepperService.datiSegnalazioneContenzioso$.value || {};\r\n    }\r\n    datiSegnalazione.Id = statoSegnalazione == 3 ? this.idSegnalazioneCasoInvia : datiSegnalazione.Id;\r\n\r\n    if (\r\n      (datiSegnalazione?.statoId === 3 && statoSegnalazione < 3) ||\r\n      (datiSegnalazione?.statoId === 2 && statoSegnalazione < 2)\r\n    ) {\r\n      alert(\r\n        'Errore: non si può più modificare una segnalazione inviata o salvare in bozza una segnalazione già salvata'\r\n      );\r\n      return;\r\n    }\r\n\r\n    // Controllo se Settore/Materia è selezionato senza Area/Prodotto\r\n    if (\r\n      this.firstFormGroup.value.settoreMateria &&\r\n      (!this.firstFormGroup.value.areaProdotto || this.firstFormGroup.value.areaProdotto === '')\r\n    ) {\r\n      this.openErrorDialog(\r\n        'Per salvare in bozza devi aggiungere un Area/Prodotto al Settore/Materia selezionato'\r\n      );\r\n\r\n      return;\r\n    }\r\n\r\n    if ((statoSegnalazione === 2 || statoSegnalazione === 3) && !this.isValidFormGroup()) {\r\n      alert('Errore: tutti i campi tranne i suggerimenti devono essere non vuoti e non null');\r\n      return;\r\n    }\r\n\r\n    if (this.loadTipoSegnalazioni === 'Prodotto') {\r\n      this.inviaSegnalazioneProdotto(datiSegnalazione, statoSegnalazione);\r\n    } else if (this.loadTipoSegnalazioni === 'Contenzioso') {\r\n      this.inviaSegnalazioneContenzioso(datiSegnalazione, statoSegnalazione);\r\n    }\r\n  }\r\n\r\n  selectRole(): string {\r\n    if (!this.role) {\r\n      // console.error('Il ruolo non è stato impostato correttamente.');\r\n      return '';\r\n    }\r\n\r\n    else if (this.role.split(';').map(ruolo => ruolo.trim()).some(ruolo => ruolo === this.ruoloRegionale)){\r\n      return this.ruoloRegionale;\r\n    }\r\n\r\n    else if (this.role.split(';').map(ruolo => ruolo.trim()).some(ruolo => ruolo === this.ruoloProvinciale)){\r\n      return this.ruoloProvinciale;\r\n    }\r\n\r\n    else if (this.role.split(';').map(ruolo => ruolo.trim()).some(ruolo => ruolo === 'P12689')){\r\n      return 'P12689';\r\n    }\r\n\r\n    return '';\r\n  }\r\n\r\n  private inviaSegnalazioneProdotto(datiSegnalazione: any, statoSegnalazione: number) {\r\n    const segnalazioneProdotto: SegnalazioneProdotto = {\r\n      id: datiSegnalazione.id ?? 0,\r\n      creato: datiSegnalazione.creato ?? new Date().toISOString(),\r\n      aggiornato: new Date().toISOString(),\r\n      confermata: true,\r\n      matricolaIns: this.storageService.getItem('matricola') ?? 'matins',\r\n      scadenza: new Date().toISOString(),\r\n      matricolaIncarico: 'matinc',\r\n      sede: this.formatToSixDigits(this.firstFormGroup.value.sede),\r\n      idStatoSalvataggioRilevazione: statoSegnalazione,\r\n      ruoloIns: this.selectRole(),\r\n      idArea: Number(this.firstFormGroup.value.areaProdotto) ?? datiSegnalazione.areaId,\r\n      aspettiSegnalazione: this.listaAspettiAggiunti.map(aspetto => ({\r\n        id: 0,\r\n        creato: new Date().toISOString(),\r\n        aggiornato: new Date().toISOString(),\r\n        idAspetto: aspetto.idAspetto < 0 ? 0 : aspetto.idAspetto, // Se ID è negativo, invialo come 0\r\n        nome: aspetto.nomeAspetto.replace(/\\s+/g,' ').trim(),\r\n        idSegnalazioneProdotto: 0,\r\n        criticita: aspetto.descrizioneCriticita,\r\n        suggerimento: aspetto.descrizioneSuggerimento,\r\n      })),\r\n    };\r\n\r\n    let formData = new FormData();\r\n\r\n    (Object.keys(segnalazioneProdotto) as Array<keyof SegnalazioneProdotto>).forEach(key => {\r\n      if (key === 'aspettiSegnalazione') {\r\n        segnalazioneProdotto.aspettiSegnalazione.forEach((aspetto, index) => {\r\n          Object.keys(aspetto).forEach(aspettoKey => {\r\n            const fieldKey = `aspettiSegnalazione[${index}].${aspettoKey}`;\r\n            const fieldValue = (aspetto as any)[aspettoKey] ?? 'null'; // Convert null/undefined to empty string\r\n            formData.append(fieldKey, fieldValue);\r\n          });\r\n        });\r\n      } else {\r\n        formData.append(key, segnalazioneProdotto[key] as any);\r\n      }\r\n    });\r\n\r\n    if (this.fileSegnalazione) {\r\n      formData.append('fileSegnalazione', this.fileSegnalazione);\r\n    }\r\n\r\n    const idAspetti: number[] = [];\r\n    if (this.filesAspetti.length > 0) {\r\n      this.filesAspetti.forEach(item => {\r\n        formData.append(`filesAspetti`, item.file);\r\n        idAspetti.push(item.idAspetto);\r\n      });\r\n    }\r\n    formData.append('idAspetti', JSON.stringify(idAspetti));\r\n\r\n    this.rilevazioneSrv.salvaSegnalazioneProdotto(formData).subscribe({\r\n      next: response => {\r\n        if (response && response.id !== null && response.id !== undefined) {\r\n          statoSegnalazione == 2 ? null : this.router.navigate(['/segnalazione/inserimento']);\r\n          this.statoSegnalazione = statoSegnalazione;\r\n          this.idSegnalazioneCasoInvia = response.id;\r\n        } else {\r\n          // console.error(\"Errore durante l'invio dei dati: Il backend ha restituito false\");\r\n          this.openErrorDialog(\"Errore durante l'invio dei dati\");\r\n        }\r\n      },\r\n      error: error => {\r\n        // console.error(\"Errore durante l'invio dei dati:\", error);\r\n        if(error.error.message == 'Esiste già una segnalazione identica con lo stato di bozza.')\r\n          this.openErrorDialog(error.error.message);\r\n        else\r\n          this.openErrorDialog(\"Errore durante l'invio dei dati\")\r\n      },\r\n    });\r\n  }\r\n\r\n  private inviaSegnalazioneContenzioso(datiSegnalazione: any, statoSegnalazione: number) {\r\n    const segnalazioneContenzioso: SegnalazioneContenzioso = {\r\n      id: datiSegnalazione.id ?? 0,\r\n      creato: datiSegnalazione.creato ?? new Date().toISOString(),\r\n      aggiornato: new Date().toISOString(),\r\n      confermata: true,\r\n      matricolaIns: this.storageService.getItem('matricola') ?? 'matins',\r\n      scadenza: new Date().toISOString(),\r\n      matricolaIncarico: 'matinc',\r\n      sede: this.formatToSixDigits(this.firstFormGroup.value.sede),\r\n      idStatoSalvataggioRilevazione: statoSegnalazione,\r\n      ruoloIns: this.selectRole(),\r\n      idArea: Number(this.firstFormGroup.value.areaProdotto) ?? datiSegnalazione.areaId,\r\n      aspettiSegnalazione: this.listaAspettiAggiunti.map(aspetto => ({\r\n        id: 0,\r\n        creato: new Date().toISOString(),\r\n        aggiornato: new Date().toISOString(),\r\n        idAspetto: aspetto.idAspetto < 0 ? 0 : aspetto.idAspetto, // Se ID è negativo, invialo come 0         //da mettere anche sul contenzioso\r\n        nome: aspetto.nomeAspetto.replace(/\\s+/g,' ').trim(),\r\n        idSegnalazioneProdotto: 0,\r\n        criticita: aspetto.descrizioneCriticita,\r\n        suggerimento: aspetto.descrizioneSuggerimento,\r\n      })),\r\n      contenziosoId:\r\n        Number(this.firstFormGroup.value.tipologiaContenzioso) ?? datiSegnalazione.contenziosoId,\r\n    };\r\n\r\n    let formData = new FormData();\r\n\r\n    (Object.keys(segnalazioneContenzioso) as Array<keyof SegnalazioneProdotto>).forEach(key => {\r\n      if (key === 'aspettiSegnalazione') {\r\n        segnalazioneContenzioso.aspettiSegnalazione.forEach((aspetto, index) => {\r\n          Object.keys(aspetto).forEach(aspettoKey => {\r\n            formData.append(\r\n              `aspettiSegnalazione[${index}].${aspettoKey}`,\r\n              (aspetto as any)[aspettoKey]\r\n            );\r\n          });\r\n        });\r\n      } else {\r\n        formData.append(key, segnalazioneContenzioso[key] as any);\r\n      }\r\n    });\r\n\r\n    if (this.fileSegnalazione) {\r\n      formData.append('fileSegnalazione', this.fileSegnalazione);\r\n    }\r\n\r\n    const idAspetti: number[] = [];\r\n    if (this.filesAspetti.length > 0) {\r\n      this.filesAspetti.forEach(item => {\r\n        formData.append(`filesAspetti`, item.file);\r\n        idAspetti.push(item.idAspetto);\r\n      });\r\n    }\r\n    formData.append('idAspetti', JSON.stringify(idAspetti));\r\n\r\n    this.rilevazioneSrv.salvaSegnalazioneContenzioso(formData).subscribe({\r\n      next: response => {\r\n        if (response.id !== null || response.id !== undefined) {\r\n          statoSegnalazione == 2 ? null : this.router.navigate(['/segnalazione/inserimento']);\r\n          this.statoSegnalazione = statoSegnalazione;\r\n          segnalazioneContenzioso.id = response.id;\r\n          this.idSegnalazioneCasoInvia = response.id;\r\n        } else {\r\n          console.error(\"Errore durante l'invio dei dati: Il backend ha restituito false\");\r\n          this.openErrorDialog(\"Errore durante l'invio dei dati\");\r\n        }\r\n      },\r\n      error: error => {\r\n        console.error(\"Errore durante l'invio dei dati:\", error);\r\n        if(error.error.message == 'Esiste già una segnalazione identica con lo stato di bozza.')\r\n          this.openErrorDialog(error.error.message);\r\n        else\r\n          this.openErrorDialog(\"Errore durante l'invio dei dati\")\r\n      },\r\n    });\r\n  }\r\n\r\n  sendDialogStepperModifica(statoId: number) {\r\n    if (this.loadTipoSegnalazioni == 'Prodotto') {\r\n      this.rilevazioneSrv\r\n        .sendSegnalazione(this.loadTipoSegnalazioni, this.idSegnalazioneCasoInvia, statoId - 1)\r\n        .subscribe({\r\n          next: response => {\r\n            if (response.success === true) {\r\n              this.router.navigate(['/segnalazione/inserimento']);\r\n            } else {\r\n              console.error(\"Errore durante l'invio dei dati: Il backend ha restituito false\");\r\n            }\r\n          },\r\n          error: error => {\r\n            console.error(\"Errore durante l'invio dei dati:\", error);\r\n          },\r\n        });\r\n    } else {\r\n      this.rilevazioneSrv\r\n        .sendSegnalazione(this.loadTipoSegnalazioni, this.idSegnalazioneCasoInvia, statoId-1)\r\n        .subscribe({\r\n          next: response => {\r\n            if (response.success === true) {\r\n              this.router.navigate(['/segnalazione/inserimento']);\r\n            } else {\r\n              console.error(\"Errore durante l'invio dei dati: Il backend ha restituito false\");\r\n            }\r\n          },\r\n          error: error => {\r\n            console.error(\"Errore durante l'invio dei dati:\", error);\r\n          },\r\n        });\r\n    }\r\n  }\r\n\r\n  isValidDatiGenerali(): boolean {\r\n    const requiredFields = [\r\n      this.firstFormGroup.value.settoreMateria,\r\n      this.firstFormGroup.value.areaProdotto,\r\n      this.firstFormGroup.value.sede,\r\n    ];\r\n\r\n    if (this.loadTipoSegnalazioni === 'Contenzioso') {\r\n      requiredFields.push(this.firstFormGroup.value.tipologiaContenzioso);\r\n    }\r\n\r\n    return requiredFields.every(field => field !== null && field !== '');\r\n  }\r\n\r\n  isValidFormGroup(): boolean {\r\n    if (!this.isValidDatiGenerali()) {\r\n      return false;\r\n    }\r\n\r\n    return (\r\n      this.listaAspettiAggiunti.length > 0 &&\r\n      this.listaAspettiAggiunti.every(aspetto => aspetto.descrizioneCriticita.trim() !== '')\r\n    );\r\n  }\r\n\r\n  formatIdToNameStep1() {\r\n    const prodotto = 'Prodotto';\r\n    const contenzioso = 'Contenzioso';\r\n\r\n    var checkFields = true;\r\n\r\n\r\n\r\n    switch (this.stepperService.inserimentoTipoSegnalazione$.value) {\r\n      case prodotto: {\r\n        if (\r\n          this.firstFormGroup.value.settoreMateria != '' &&\r\n          this.firstFormGroup.value.settoreMateria != null &&\r\n          this.firstFormGroup.value.settoreMateria != undefined\r\n        ) {\r\n          this.nomeSettoreMateria = this.settoreMateria!.find(\r\n            settore => settore.id == Number.parseInt(this.firstFormGroup.value.settoreMateria!)\r\n          )!.nome;\r\n        } else {\r\n          checkFields = false;\r\n        }\r\n        if (\r\n          this.firstFormGroup.value.areaProdotto != '' &&\r\n          this.firstFormGroup.value.areaProdotto != null &&\r\n          this.firstFormGroup.value.areaProdotto != undefined\r\n        ) {\r\n          for (let i = 0; i < this.areaProdotto!.length; i++) {\r\n            if (this.firstFormGroup.value.areaProdotto! == this.areaProdotto![i].id) {\r\n              this.nomeAreaProdotto = this.areaProdotto![i].nome;\r\n              break;\r\n            } else {\r\n              this.nomeAreaProdotto == '';\r\n            }\r\n          }\r\n        } else {\r\n          checkFields = false;\r\n        }\r\n        if (\r\n          this.firstFormGroup.value.sede != '' &&\r\n          this.firstFormGroup.value.sede != null &&\r\n          this.firstFormGroup.value.sede != undefined\r\n        ) {\r\n          this.nomeSede = this.sede.find(\r\n            sede => sede.id == Number.parseInt(this.firstFormGroup.value.sede!)\r\n          )!.nome;\r\n          this.numeroCodiceSede = this.firstFormGroup.value.sede!;\r\n        } else {\r\n          checkFields = false;\r\n        }\r\n\r\n        if (checkFields == false) {\r\n          this.nomeSettoreMateria = '';\r\n          this.nomeAreaProdotto = '';\r\n          this.nomeSede = '';\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n      case contenzioso: {\r\n        if (\r\n          this.firstFormGroup.value.settoreMateria != '' &&\r\n          this.firstFormGroup.value.settoreMateria != null &&\r\n          this.firstFormGroup.value.settoreMateria != undefined\r\n        ) {\r\n          this.nomeSettoreMateria = this.settoreMateria!.find(\r\n            settore => settore.id == Number.parseInt(this.firstFormGroup.value.settoreMateria!)\r\n          )!.nome;\r\n        } else {\r\n          checkFields = false;\r\n        }\r\n        if (\r\n          this.firstFormGroup.value.areaProdotto != '' &&\r\n          this.firstFormGroup.value.areaProdotto != null &&\r\n          this.firstFormGroup.value.areaProdotto != undefined\r\n        ) {\r\n          for (let i = 0; i < this.areaProdotto!.length; i++) {\r\n            if (this.firstFormGroup.value.areaProdotto! == this.areaProdotto![i].id) {\r\n              this.nomeAreaProdotto = this.areaProdotto![i].nome;\r\n              break;\r\n            } else {\r\n              this.nomeAreaProdotto == '';\r\n            }\r\n          }\r\n        } else {\r\n          checkFields = false;\r\n        }\r\n        if (\r\n          this.firstFormGroup.value.sede != '' &&\r\n          this.firstFormGroup.value.sede != null &&\r\n          this.firstFormGroup.value.sede != undefined\r\n        ) {\r\n          this.nomeSede = this.sede.find(\r\n            sede => sede.id == Number.parseInt(this.firstFormGroup.value.sede!)\r\n          )!.nome;\r\n          this.numeroCodiceSede = this.firstFormGroup.value.sede!;\r\n        } else {\r\n          checkFields = false;\r\n        }\r\n        if (\r\n          this.firstFormGroup.value.tipologiaContenzioso != '' &&\r\n          this.firstFormGroup.value.tipologiaContenzioso != null &&\r\n          this.firstFormGroup.value.tipologiaContenzioso != undefined\r\n        ) {\r\n          this.nomeTipologiaContenzioso = this.tipologieContenzioso.find(\r\n            contenzioso =>\r\n              contenzioso.id == Number.parseInt(this.firstFormGroup.value.tipologiaContenzioso!)\r\n          )!.nome;\r\n        } else {\r\n          checkFields = false;\r\n        }\r\n\r\n        if (checkFields == false) {\r\n          this.nomeSettoreMateria = '';\r\n          this.nomeAreaProdotto = '';\r\n          this.nomeSede = '';\r\n        }\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  showDescrizioneTroncata(descrizione: string | null | undefined): string {\r\n    if (!!descrizione && descrizione.length > 23) {\r\n      return descrizione.substring(0, 20) + '...';\r\n    } else {\r\n      return descrizione || '';\r\n    }\r\n  }\r\n\r\n  mostraNotaCompleta(nota: string) {\r\n    alert(nota); // Puoi sostituire questo con qualsiasi altra logica per mostrare il testo completo, come un modale\r\n  }\r\n\r\n  moveToStep(index: number) {\r\n    this.stepper.selectedIndex = index - 1;\r\n  }\r\n\r\n  checkFormEGriglia(): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const value = control.value;\r\n\r\n      if (this.listaAspettiAggiunti.length != 0) {\r\n        return { esito: true };\r\n      } else if (value != '' && this.listaAspettiAggiunti.length == 0) {\r\n        return { esito: true };\r\n      } else if (value == '' && this.listaAspettiAggiunti.length == 0) {\r\n        return { esito: false };\r\n      }\r\n\r\n      return { esito: null };\r\n    };\r\n  }\r\n\r\n  loadAspettiDaValutare() {\r\n    this.prodottiSrv\r\n      .getAspettiEDescrizioni(this.stepperService.inserimentoTipoSegnalazione$.value!)\r\n      .subscribe(data => {\r\n        data.forEach(item => {\r\n          this.aspettiDaValutare.push({\r\n            nomeAspetto: item.nome,\r\n            idAspetto: item.id,\r\n            descrizioneAspetto: item.descrizione,\r\n          });\r\n        });\r\n        const max = this.aspettiDaValutare.reduce(function (prev, current) {\r\n          return prev && prev.idAspetto > current.idAspetto ? prev : current;\r\n        });\r\n        this.maxIdAspettiDaValutare = Number(max.idAspetto);\r\n      });\r\n  }\r\n\r\n  showFieldSede(codiceSede: number, nomeSede: string): string {\r\n    if (\r\n      codiceSede != null &&\r\n      codiceSede != undefined &&\r\n      codiceSede != Number('') &&\r\n      nomeSede != null &&\r\n      nomeSede != undefined &&\r\n      nomeSede != ''\r\n    ) {\r\n      var codiceFormattato = this.formatToSixDigits(codiceSede);\r\n      return codiceFormattato + ' - ' + nomeSede;\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  canAddAspect(): boolean {\r\n    const aspetto = this.secondFormGroup.value.step2Aspetti;\r\n    const criticita = this.secondFormGroup.value.step2Criticita;\r\n    return aspetto && criticita && criticita.trim() !== '';\r\n  }\r\n\r\n  openErrorDialog(message: string): void {\r\n    this.dialog.open(PopupErroreInserimentoComponent, {\r\n      data: { message: message },\r\n    });\r\n  }\r\n\r\n  isAllFieldsValidContenzioso(): boolean {\r\n    return (\r\n      this.isValid(this.nomeSettoreMateria) &&\r\n      this.isValid(this.nomeAreaProdotto) &&\r\n      this.isValid(this.nomeSede) &&\r\n      this.isValid(this.nomeTipologiaContenzioso)\r\n    );\r\n  }\r\n\r\n  isAllFieldsValidProdotto(): boolean {\r\n    return (\r\n      this.isValid(this.nomeSettoreMateria) &&\r\n      this.isValid(this.nomeAreaProdotto) &&\r\n      this.isValid(this.nomeSede)\r\n    );\r\n  }\r\n\r\n  private isValid(field: string): boolean {\r\n    return field !== '' && field !== null && field !== undefined;\r\n  }\r\n\r\n  private getFileNameFromContentDisposition(contentDisposition: string | null): string {\r\n    if (!contentDisposition) {\r\n      return 'download';\r\n    }\r\n\r\n    const filenameRegex = /filename[^;=\\n]*=((['\"]).*?\\2|[^;\\n]*)/;\r\n    const matches = filenameRegex.exec(contentDisposition);\r\n    if (matches != null && matches[1]) {\r\n      return matches[1].replace(/['\"]/g, '');\r\n    }\r\n\r\n    const filenameStarRegex = /filename\\*=UTF-8''(.*?)(?:;|$)/;\r\n    const matchesStar = filenameStarRegex.exec(contentDisposition);\r\n    if (matchesStar != null && matchesStar[1]) {\r\n      return decodeURIComponent(matchesStar[1]);\r\n    }\r\n\r\n    return 'download';\r\n  }\r\n\r\n  deleteFileSegnalazione(fileName: string){\r\n    const ruolo = this.selectRole();\r\n    if(this.segnalazioneProdotto?.id != null)\r\n      this.documentiService.deleteFileSegnalazione(this.segnalazioneProdotto.id, fileName, \"Prodotto\", ruolo).subscribe(() =>{\r\n        this.isFileDatiGenerali = false;\r\n    });\r\n    else if(this.segnalazioneContenzioso?.id != null)\r\n      this.documentiService.deleteFileSegnalazione(this.segnalazioneContenzioso.id, fileName, \"Contenzioso\", ruolo).subscribe(() =>{\r\n      this.isFileDatiGenerali = false\r\n    });\r\n  }\r\n\r\n  deleteFileAspetto(idAspetto: number){\r\n    const ruolo = this.selectRole()\r\n    let aspetto;\r\n    if(this.segnalazioneProdotto?.id != null){\r\n      const nomeFile = this.getNomeFileAspetto(idAspetto);\r\n      if(nomeFile)\r\n        this.documentiService.deleteFileAspetto(this.segnalazioneProdotto.id, idAspetto, nomeFile, \"Prodotto\", ruolo).subscribe((response) =>{\r\n          if(response.esito){\r\n            aspetto = this.listaAspettiAggiunti.find(a => a.idAspetto === idAspetto);\r\n            if(aspetto)\r\n              aspetto.hasAllegato = false;\r\n          }\r\n        });\r\n      }\r\n    else if(this.segnalazioneContenzioso?.id != null){\r\n      const nomeFile = this.getNomeFileAspetto(idAspetto);\r\n      if(nomeFile)\r\n        this.documentiService.deleteFileAspetto(this.segnalazioneContenzioso.id, idAspetto, nomeFile, \"Contenzioso\", ruolo).subscribe((response)=>{\r\n         if(response.esito){\r\n          aspetto = this.listaAspettiAggiunti.find(a => a.idAspetto === idAspetto);\r\n          if(aspetto)\r\n            aspetto.hasAllegato = false\r\n         }\r\n      })\r\n    }\r\n  }\r\n\r\n  downloadFileSegnalazione(){\r\n    const ruolo = this.selectRole();\r\n    if(this.segnalazioneProdotto?.id != null)\r\n      this.documentiService.getFileSegnalazione(this.segnalazioneProdotto?.id, \"Prodotto\", ruolo).subscribe(response =>{\r\n        const contentDisposition = response.headers.get('Content-Disposition');\r\n        const fileName = this.getFileNameFromContentDisposition(contentDisposition);\r\n        const blob = response.body;\r\n        const url = window.URL.createObjectURL(blob as (Blob | MediaSource));\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = fileName || 'download';\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        window.URL.revokeObjectURL(url);\r\n    });\r\n    else if(this.segnalazioneContenzioso?.id != null)\r\n      this.documentiService.getFileSegnalazione(this.segnalazioneContenzioso.id, \"Contenzioso\", ruolo).subscribe(response => {\r\n        const contentDisposition = response.headers.get('Content-Disposition');\r\n        const fileName = this.getFileNameFromContentDisposition(contentDisposition);\r\n        const blob = response.body;\r\n        const url = window.URL.createObjectURL(blob as (Blob | MediaSource));\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = fileName || 'download';\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        window.URL.revokeObjectURL(url);\r\n    });\r\n  }\r\n\r\n  downloadFileAspetto(idAspetto: number){\r\n    const ruolo = this.selectRole();\r\n    if(this.segnalazioneProdotto?.id != null){\r\n      this.documentiService.getFileAspetti(this.segnalazioneProdotto.id, idAspetto, \"Prodotto\", ruolo).subscribe(response => {\r\n        const contentDisposition = response.headers.get('content-disposition');\r\n        const fileName = this.getFileNameFromContentDisposition(contentDisposition);\r\n\r\n        const blob = response.body;\r\n        const url = window.URL.createObjectURL(blob as (Blob | MediaSource));\r\n\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = fileName || 'download';\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n\r\n        window.URL.revokeObjectURL(url);\r\n      });\r\n    }\r\n    else if(this.segnalazioneContenzioso?.id != null){\r\n      this.documentiService.getFileAspetti(this.segnalazioneContenzioso.id, idAspetto, \"Contenzioso\", ruolo).subscribe(response => {\r\n        const contentDisposition = response.headers.get('content-disposition');\r\n        const fileName = this.getFileNameFromContentDisposition(contentDisposition);\r\n\r\n        const blob = response.body;\r\n        const url = window.URL.createObjectURL(blob as (Blob | MediaSource));\r\n\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = fileName || 'download';\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n\r\n        window.URL.revokeObjectURL(url);\r\n      })\r\n    }\r\n  }\r\n\r\n  getNomeFileAspetto(idAspetto: number): string | undefined {\r\n    const fileInfo = this.nomiFileAspetti.find(file => file.idAspetto === idAspetto);\r\n    return fileInfo ? fileInfo.fileName : undefined;\r\n  }\r\n\r\n  truncateText(text: string | undefined, limit: number): string {\r\n    if (!text) return '';\r\n    return text.length > limit ? text.substring(0, limit) + '...' : text;\r\n  }\r\n\r\n}\r\n\r\ninterface SegnalazioneProdotto {\r\n  id: number | null;\r\n  creato: any;\r\n  aggiornato: string | null;\r\n  confermata: boolean;\r\n  matricolaIns: any | null;\r\n  scadenza: string | null;\r\n  matricolaIncarico: string | null;\r\n  sede: string | null;\r\n  idStatoSalvataggioRilevazione: number | null;\r\n  ruoloIns: any | null;\r\n  idArea: number | null;\r\n  aspettiSegnalazione: {\r\n    id: any | null;\r\n    creato: string | null;\r\n    aggiornato: string;\r\n    idAspetto: number | null;\r\n    nome: string | null;\r\n    idSegnalazioneProdotto: any | null;\r\n    criticita: string | null;\r\n    suggerimento: string | null;\r\n  }[];\r\n}\r\n\r\ninterface SegnalazioneContenzioso {\r\n  id: number | null;\r\n  creato: any;\r\n  aggiornato: string | null;\r\n  confermata: boolean;\r\n  matricolaIns: any | null;\r\n  scadenza: string | null;\r\n  matricolaIncarico: string | null;\r\n  sede: string | null;\r\n  idStatoSalvataggioRilevazione: number | null;\r\n  ruoloIns: any | null;\r\n  idArea: number | null;\r\n  contenziosoId: number | null;\r\n  aspettiSegnalazione: {\r\n    id: any | null;\r\n    creato: string | null;\r\n    aggiornato: string;\r\n    idAspetto: number | null;\r\n    nome: string | null;\r\n    idSegnalazioneProdotto: any | null;\r\n    criticita: string | null;\r\n    suggerimento: string | null;\r\n  }[];\r\n}\r\n\r\ninterface SettoreMateria {\r\n  id: number | null;\r\n  nome: string;\r\n}\r\n\r\ninterface AreaProdotto {\r\n  id: number | null;\r\n  nome: string;\r\n}\r\n\r\ninterface Sede {\r\n  id: number | null;\r\n  nome: string;\r\n}\r\n\r\ninterface TipologieContenzioso {\r\n  id: number | null;\r\n  nome: string;\r\n}\r\n\r\ninterface AspettoConDescrizione {\r\n  nomeAspetto: string;\r\n  idAspetto: number;\r\n  descrizioneAspetto: string;\r\n}\r\n\r\ninterface segnalazioneContenzioso {\r\n  areaId: number;\r\n  areaProdotto: string;\r\n  contenziosoDesc: string;\r\n  contenziosoId: number;\r\n  data1: string;\r\n  data2: string;\r\n  id: number;\r\n  inviata: boolean;\r\n  sede: string;\r\n  sedeId: number;\r\n  settoreId: number;\r\n  settoreMateria: string;\r\n  statoDesc: string;\r\n  statoId: number;\r\n}\r\n\r\ninterface segnalazioneProdotto {\r\n  areaId: number;\r\n  areaProdotto: string;\r\n  data1: string;\r\n  data2: string;\r\n  id: number;\r\n  inviata: boolean;\r\n  sede: string;\r\n  sedeId: number;\r\n  settoreId: number;\r\n  settoreMateria: string;\r\n  statoDesc: string;\r\n  statoId: number;\r\n}\r\n","<page-header></page-header>\r\n\r\n<mat-stepper [linear]=\"isLinear\" #stepper (selectionChange)=\"stepperChange($event)\">\r\n  <mat-step [stepControl]=\"firstFormGroup\">\r\n    <form [formGroup]=\"firstFormGroup\">\r\n      <ng-template matStepLabel>Dati generali</ng-template>\r\n\r\n      <!-- CASO INSERIMENTO NUOVO PRODOTTO -->\r\n      <!-- <div *ngIf=\"loadTipoSegnalazioni == 'Prodotto'\" class=\"container-data\"> -->\r\n        <div class=\"container-data\">\r\n          <mat-form-field class=\"child-data\">\r\n            <input matInput placeholder=\"Settore/Materia*\" [formControl]=\"settoreCtrl\" [matAutocomplete]=\"autoSettore\" (focus)=\"onFocus(settoreCtrl)\">\r\n            <mat-autocomplete #autoSettore=\"matAutocomplete\" (optionSelected)=\"settoreSelected($event)\" [displayWith]=\"displaySettore\">\r\n              <mat-option *ngFor=\"let option of filteredSettoreMateria | async\" [value]=\"option\">\r\n                {{option.nome}}\r\n              </mat-option>\r\n            </mat-autocomplete>\r\n            <button mat-icon-button matSuffix *ngIf=\"settoreCtrl.value\" (click)=\"clearSettore()\">\r\n              <mat-icon>clear</mat-icon>\r\n            </button>\r\n          </mat-form-field>\r\n\r\n          <mat-form-field class=\"child-data\">\r\n            <input matInput placeholder=\"Area/Prodotto*\" [formControl]=\"areaCtrl\" [matAutocomplete]=\"autoArea\" (focus)=\"onFocus(areaCtrl)\">\r\n            <mat-autocomplete #autoArea=\"matAutocomplete\" (optionSelected)=\"areaSelected($event)\" [displayWith]=\"displayArea\">\r\n              <mat-option *ngFor=\"let option of filteredAreaProdotto | async\" [value]=\"option\">\r\n                {{option.nome}}\r\n              </mat-option>\r\n            </mat-autocomplete>\r\n            <button mat-icon-button matSuffix *ngIf=\"areaCtrl.value\" (click)=\"clearArea()\">\r\n              <mat-icon>clear</mat-icon>\r\n            </button>\r\n          </mat-form-field>\r\n\r\n          <mat-form-field class=\"child-data\">\r\n            <input matInput placeholder=\"Sede*\" [formControl]=\"sedeCtrl\" [matAutocomplete]=\"autoSede\" (focus)=\"onFocus(sedeCtrl)\">\r\n            <mat-autocomplete #autoSede=\"matAutocomplete\" (optionSelected)=\"sedeSelected($event)\" [displayWith]=\"displaySede\">\r\n              <mat-option *ngFor=\"let option of filteredSede | async\" [value]=\"option\">\r\n                {{displaySede(option)}}\r\n              </mat-option>\r\n            </mat-autocomplete>\r\n            <button mat-icon-button matSuffix *ngIf=\"sedeCtrl.value\" (click)=\"clearSede()\">\r\n              <mat-icon>clear</mat-icon>\r\n            </button>\r\n          </mat-form-field>\r\n\r\n        </div>\r\n      <!-- FINE caso inserimento nuovo prodotto  -->\r\n\r\n      <!-- CASO INSERIMENTO NUOVO CONTENZIOSO -->\r\n      <div *ngIf=\"loadTipoSegnalazioni == 'Contenzioso'\" class=\"container-data\">\r\n        <mat-form-field class=\"child-data\">\r\n          <input matInput placeholder=\"Tipologia contenzioso*\" [formControl]=\"tipologiaCtrl\" [matAutocomplete]=\"autoTipologia\" (focus)=\"onFocus(tipologiaCtrl)\">\r\n          <mat-autocomplete #autoTipologia=\"matAutocomplete\" (optionSelected)=\"tipologiaSelected($event)\" [displayWith]=\"displayTipologia\">\r\n            <mat-option *ngFor=\"let option of filteredTipologia | async\" [value]=\"option\">\r\n              {{option.nome}}\r\n            </mat-option>\r\n          </mat-autocomplete>\r\n          <button mat-icon-button matSuffix *ngIf=\"tipologiaCtrl.value\" (click)=\"clearTipologia()\">\r\n            <mat-icon>clear</mat-icon>\r\n          </button>\r\n        </mat-form-field>\r\n\r\n        <div class=\"child-data\"></div>\r\n\r\n        <div class=\"child-data\"></div>\r\n\r\n      </div>\r\n\r\n      <div class=\"container-data\">\r\n        <button mat-button (click)=\"toggleAllegaDatiGenerali()\" [disabled]=\" showGestioneFileDatiGenerali\">\r\n          <mat-icon>attach_file</mat-icon> Inserisci Allegato\r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"container-data\" *ngIf=\"showGestioneFileDatiGenerali && !isFileDatiGenerali\">\r\n        <app-gestione-file\r\n          [idAspetto]=\"0\"\r\n          (fileEvent)=\"onFilesAddedDatiGenerali($event)\"\r\n          (fileRemovedEvent)=\"removeFileSegnalazione($event)\">\r\n        </app-gestione-file>\r\n      </div>\r\n\r\n      <div class=\"container-data\" *ngIf=\"isFileDatiGenerali\">\r\n        <table mat-table [dataSource]=\"dataFileSegnalazione\">\r\n          <tr mat-header-row *matHeaderRowDef=\"fileColumns\"></tr>\r\n          <tr mat-row *matRowDef=\"let row; columns: fileColumns;\"></tr>\r\n          <ng-container matColumnDef=\"fileName\">\r\n            <th mat-header-cell *matHeaderCellDef>Nome del File</th>\r\n            <td mat-cell *matCellDef=\"let element\">{{element.fileName}}</td>\r\n          </ng-container>\r\n          <ng-container matColumnDef=\"fileSize\">\r\n            <th mat-header-cell *matHeaderCellDef>Dimensione del File</th>\r\n            <td mat-cell *matCellDef=\"let element\">{{element.fileSize | number: '1.2-2'}} Mb</td>\r\n          </ng-container>\r\n          <ng-container matColumnDef=\"download\">\r\n            <th mat-header-cell *matHeaderCellDef>Download</th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n              <button mat-button class=\"material-icons w-auto h-auto text-base border-2 shadow-md text-white bg-green-600\r\n              hover:bg-green-700 focus:ring-4 rounded-2xl px-5 py-2.5 text-center\"\r\n              (click)=\"downloadFileSegnalazione()\">\r\n                <mat-icon>save_alt</mat-icon>\r\n              </button>\r\n            </td>\r\n          </ng-container>\r\n          <!-- <ng-container matColumnDef=\"rimuovi\">\r\n            <th mat-header-cell *matHeaderCellDef>Rimuovi</th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n              <button mat-button class=\"material-icons w-auto h-auto text-base border-2 shadow-md text-white bg-red-600\r\n                    hover:bg-red-700 focus:ring-4 rounded-2xl px-5 py-2.5 text-center\"\r\n                    (click)=\"deleteFileSegnalazione(element.fileName)\">\r\n              <mat-icon>delete</mat-icon>\r\n              </button>\r\n            </td>\r\n          </ng-container> -->\r\n          <ng-container matColumnDef=\"rimuovi\">\r\n            <th mat-header-cell mat-header=\"rimuovi\" *matHeaderCellDef>Rimuovi</th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n            <div class=\"btn-dlt-container\" [ngClass]=\"{'tooltip': !element.showConfirm}\">\r\n              <button mat-button class=\"material-icons w-auto h-auto text-base border-2 shadow-md text-white bg-red-600\r\n                hover:bg-red-700 focus:ring-4 rounded-2xl px-5 py-2.5 text-center\"\r\n                    (click)=\"element.showConfirm = !element.showConfirm\">\r\n                <mat-icon>delete</mat-icon>\r\n              </button>\r\n              <div class=\"tooltiptext\" *ngIf=\"element.showConfirm\">\r\n                  Eliminare definitivamente?<br>\r\n                <button class=\"btn-def btn-def-yes\" (click)=\"deleteFileSegnalazione(element.fileName)\">Sì</button>\r\n                <button class=\"btn-def btn-def-no\" (click)=\"element.showConfirm = false\">No</button>\r\n              </div>\r\n            </div>\r\n            </td>\r\n          </ng-container>\r\n        </table>\r\n      </div>\r\n\r\n\r\n      <div class=\"container-buttons\">\r\n        <button mat-button (click)=\"invia(1)\" [disabled]=\"statoSegnalazione !== 1 || !isValidDatiGenerali()\" class=\"child-buttons child-buttons-salvainbozza\">\r\n          Salva in bozza\r\n        </button>\r\n        <button mat-button matStepperNext class=\"child-buttons child-buttons-conferma\">\r\n          Avanti\r\n        </button>\r\n      </div>\r\n    </form>\r\n  </mat-step>\r\n\r\n  <mat-step [stepControl]=\"secondFormGroup\" label=\"Criticità\">\r\n    <form [formGroup]=\"secondFormGroup\">\r\n      <div class=\"container-data\">\r\n        <!--<mat-form-field class=\"child-data select-aspetto\">\r\n          <mat-label>Aspetti da valutare</mat-label>\r\n          <mat-select formControlName=\"step2Aspetti\" required>\r\n            <mat-option *ngFor=\"let aspetti of aspettiDaValutare\"\r\n                        title=\"{{aspetti.descrizioneAspetto}}\"\r\n                        [value]=\"aspetti.idAspetto\">{{aspetti.nomeAspetto}}</mat-option>\r\n            <mat-option (click)=\"dialogStepperCreazioneAspetto()\">Altro</mat-option>\r\n          </mat-select>\r\n        </mat-form-field>-->\r\n        <!-- <mat-form-field class=\"child-data\"> -->\r\n        <mat-form-field appearance=\"standard\">\r\n          <input matInput placeholder=\"Aspetti da valutare\"\r\n          [formControl]=\"aspettiCtrl\"\r\n          [matAutocomplete]=\"autoAspetto\">\r\n          <mat-autocomplete #autoAspetto=\"matAutocomplete\" (optionSelected)=\"aspettoSelected($event.option.value)\" [displayWith]=\"displayAspetto\">\r\n            <mat-option *ngFor=\"let option of filteredAspettiDaValutare | async\" [value]=\"option\">\r\n              {{ option.nomeAspetto }}\r\n            </mat-option>\r\n            <mat-option *ngIf=\"!checkNuovoAspetto\" (click)=\"dialogStepperCreazioneAspetto()\">\r\n              Altro\r\n            </mat-option>\r\n          </mat-autocomplete>\r\n          <button mat-icon-button matSuffix *ngIf=\"aspettiCtrl.value\" (click)=\"clearAspetto()\">\r\n            <mat-icon>clear</mat-icon>\r\n          </button>\r\n        </mat-form-field>\r\n\r\n        <mat-form-field class=\"child-data\">\r\n          <mat-label>Criticità</mat-label>\r\n          <textarea matInput maxlength=\"65535\" type=\"text\" rows=\"7\" class=\"textarea\"\r\n                    formControlName=\"step2Criticita\"></textarea>\r\n        </mat-form-field>\r\n      </div>\r\n\r\n      <div class=\"container-data\">\r\n        <button mat-button (click)=\"aggiungiAspettoCriticita()\"\r\n        [disabled]=\"!canAddAspect()\"\r\n                class=\"child-buttons child-buttons-conferma\">\r\n          Aggiungi</button>\r\n      </div>\r\n      <br>\r\n\r\n      <div *ngIf=\"listaAspettiAggiunti.length != 0\" class=\"title\">ASPETTI AGGIUNTI</div>\r\n      <div *ngIf=\"listaAspettiAggiunti.length != 0\" class=\"container-data\">\r\n\r\n        <table mat-table [dataSource]=\"listaAspettiAggiunti\" class=\"mat-elevation-z8\"\r\n               #tableStep2 matTableId=\"tableStep2\">\r\n          <tr mat-header-row *matHeaderRowDef=\"displayedColumnsStep2\"></tr>\r\n          <tr mat-row *matRowDef=\"let row; columns: displayedColumnsStep2;\"></tr>\r\n\r\n          <ng-container matColumnDef=\"modifica\">\r\n            <th mat-header-cell mat-header=\"modifica\" *matHeaderCellDef>Modifica\r\n            </th>\r\n            <td mat-cell *matCellDef=\"let element\" class=\"center-icon\">\r\n              <button mat-button (click)=\"modifica(element,'Criticita')\"\r\n                      class=\"material-icons w-auto h-auto text-base border-2 shadow-md text-white bg-green-600\r\n                          hover:bg-green-700 focus:ring-4 rounded-2xl px-5 py-2.5 text-center\"><mat-icon>edit</mat-icon></button>\r\n            </td>\r\n          </ng-container>\r\n\r\n          <ng-container matColumnDef=\"rimuovi\">\r\n            <th mat-header-cell mat-header=\"rimuovi\" *matHeaderCellDef>Rimuovi</th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n            <div class=\"btn-dlt-container\" [ngClass]=\"{'tooltip': !element.showConfirm}\">\r\n              <button mat-button class=\"material-icons w-auto h-auto text-base border-2 shadow-md text-white bg-red-600\r\n                hover:bg-red-700 focus:ring-4 rounded-2xl px-5 py-2.5 text-center\"\r\n                    (click)=\"element.showConfirm = !element.showConfirm\">\r\n                <mat-icon>delete</mat-icon>\r\n              </button>\r\n              <div class=\"tooltiptext\" *ngIf=\"element.showConfirm\">\r\n                  Eliminare definitivamente l'aspetto?<br>\r\n                <button class=\"btn-def btn-def-yes\" (click)=\"rimuoviAspettoAggiunto(element.idAspetto)\">Sì</button>\r\n                <button class=\"btn-def btn-def-no\" (click)=\"element.showConfirm = false\">No</button>\r\n              </div>\r\n            </div>\r\n            </td>\r\n          </ng-container>\r\n\r\n          <ng-container matColumnDef=\"nomeAspetto\">\r\n            <th mat-header-cell mat-header=\"nomeAspetto\" *matHeaderCellDef>Nome Aspetto</th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.nomeAspetto}} </td>\r\n          </ng-container>\r\n\r\n          <ng-container matColumnDef=\"descrizioneCriticita\">\r\n            <th mat-header-cell mat-header=\"descrizioneCriticita\" *matHeaderCellDef>Criticità\r\n            </th>\r\n            <td mat-cell truncate (click)=\"show(element.descrizioneCriticita)\"\r\n                *matCellDef=\"let element\"> {{\r\n              showDescrizioneTroncata(element.descrizioneCriticita)}}</td>\r\n          </ng-container>\r\n\r\n          <ng-container matColumnDef=\"allegato\">\r\n            <th mat-header-cell mat-header=\"allegato\" *matHeaderCellDef>Allegato\r\n            </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n              <app-gestione-file *ngIf=\"!element.hasAllegato\"\r\n                [idAspetto]=\"element.idAspetto\"\r\n                (fileEvents)=\"onFilesAddedCriticita($event)\"\r\n                (fileRemovedEvents)=\"removeFileAspetti($event)\">\r\n              </app-gestione-file>\r\n\r\n              <div *ngIf=\"element.hasAllegato\" class=\"file-container\">\r\n                <span class=\"file-name\" [matTooltip]=\"getNomeFileAspetto(element.idAspetto)!\">{{truncateText(getNomeFileAspetto(element.idAspetto), 15)}}</span>\r\n\r\n                <button mat-button style=\"margin-right: 10px\" class=\"material-icons w-auto h-auto text-base border-2 shadow-md text-white bg-red-600\r\n                    hover:bg-red-700 focus:ring-4 rounded-2xl px-5 py-2.5 text-center\"\r\n                    (click)=\"element.showConfirmAllegato = !element.showConfirmAllegato\">\r\n              <mat-icon>delete</mat-icon>\r\n            </button>\r\n\r\n            <div class=\"tooltiptext\" *ngIf=\"element.showConfirmAllegato\">\r\n              Eliminare definitivamente l'allegato?<br>\r\n            <button class=\"btn-def btn-def-yes\" (click)=\"deleteFileAspetto(element.idAspetto)\">Sì</button>\r\n            <button class=\"btn-def btn-def-no\" (click)=\"element.showConfirmAllegato = false\">No</button>\r\n          </div>\r\n\r\n            <button mat-button class=\"material-icons w-auto h-auto text-base border-2 shadow-md text-white bg-green-600\r\n            hover:bg-green-700 focus:ring-4 rounded-2xl px-5 py-2.5 text-center\"\r\n            (click)=\"downloadFileAspetto(element.idAspetto)\">\r\n              <mat-icon>save_alt</mat-icon>\r\n            </button>\r\n              </div>\r\n            </td>\r\n          </ng-container>\r\n        </table>\r\n      </div>\r\n\r\n      <div class=\"container-buttons\">\r\n        <button mat-button matStepperPrevious class=\"child-buttons child-buttons-conferma\">\r\n          Indietro\r\n        </button>\r\n        <button mat-button (click)=\"invia(1)\" [disabled]=\"statoSegnalazione !== 1 || !isValidDatiGenerali()\" class=\"child-buttons child-buttons-salvainbozza\">\r\n          Salva in bozza\r\n        </button>\r\n        <button mat-button matStepperNext class=\"child-buttons child-buttons-conferma\">\r\n          Avanti\r\n        </button>\r\n      </div>\r\n    </form>\r\n  </mat-step>\r\n\r\n  <mat-step [stepControl]=\"thirdFormGroup\" label=\"Soluzioni e Suggerimenti\">\r\n    <form [formGroup]=\"thirdFormGroup\">\r\n\r\n      <div *ngIf=\"listaAspettiAggiunti.length == 0\" class=\"title\">\r\n        <br><br>\r\n        Non sono ancora stati aggiunti aspetti da valutare e le relative criticità.\r\n        <br><br>\r\n      </div>\r\n\r\n      <div *ngIf=\"listaAspettiAggiunti.length != 0\" class=\"title\">\r\n        <br>\r\n        ASPETTI AGGIUNTI</div>\r\n      <div *ngIf=\"listaAspettiAggiunti.length != 0\" class=\"container-data\">\r\n\r\n        <table mat-table [dataSource]=\"listaAspettiAggiunti\" class=\"mat-elevation-z8\"\r\n               #tableStep3 matTableId=\"tableStep3\">\r\n          <tr mat-header-row *matHeaderRowDef=\"displayedColumnsStep3\"></tr>\r\n          <tr mat-row *matRowDef=\"let row; columns: displayedColumnsStep3;\"></tr>\r\n\r\n          <ng-container matColumnDef=\"modifica\">\r\n            <th mat-header-cell mat-header=\"modifica\" *matHeaderCellDef>Modifica\r\n            <th>\r\n            <td mat-cell *matCellDef=\"let element\" class=\"center-icon\">\r\n              <button mat-button (click)=\"modifica(element,'Suggerimento')\"\r\n              class=\"material-icons w-auto h-auto text-base border-2 shadow-md text-white bg-green-600\r\n              hover:bg-green-700 focus:ring-4 rounded-2xl px-5 py-2.5 text-center\"><mat-icon>edit</mat-icon></button>\r\n            </td>\r\n          </ng-container>\r\n\r\n          <ng-container matColumnDef=\"nomeAspetto\">\r\n            <th mat-header-cell mat-header=\"nomeAspetto\" *matHeaderCellDef>Nome Aspetto</th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.nomeAspetto}} </td>\r\n          </ng-container>\r\n\r\n          <ng-container matColumnDef=\"descrizioneCriticita\">\r\n            <th mat-header-cell mat-header=\"descrizioneCriticita\" *matHeaderCellDef>Criticità\r\n            </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{\r\n              showDescrizioneTroncata(element.descrizioneCriticita) }} </td>\r\n          </ng-container>\r\n\r\n          <ng-container matColumnDef=\"descrizioneSuggerimento\">\r\n            <th mat-header-cell mat-header=\"descrizioneSuggerimento\" *matHeaderCellDef>\r\n              Suggerimento\r\n            </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{\r\n              showDescrizioneTroncata(element.descrizioneSuggerimento) }} </td>\r\n          </ng-container>\r\n\r\n        </table>\r\n        <br>\r\n      </div>\r\n\r\n      <!-- <div class=\"flex flex-row justify-end mt-10\"> -->\r\n      <div class=\"container-buttons\">\r\n        <button mat-button matStepperPrevious class=\"child-buttons child-buttons-conferma\">\r\n          Indietro\r\n        </button>\r\n        <button mat-button (click)=\"invia(1)\" [disabled]=\"statoSegnalazione !== 1 || !isValidDatiGenerali()\" class=\"child-buttons child-buttons-salvainbozza\">\r\n          Salva in bozza\r\n        </button>\r\n        <button mat-button matStepperNext class=\"child-buttons child-buttons-conferma\">\r\n          Avanti\r\n        </button>\r\n      </div>\r\n    </form>\r\n  </mat-step>\r\n\r\n  <mat-step>\r\n    <ng-template matStepLabel>Riepilogo</ng-template>\r\n    <!-- DATI INCOMPLETI - CASO PRODOTTO -->\r\n    <div *ngIf=\"loadTipoSegnalazioni == 'Prodotto'\" class=\"container-data\">\r\n      <div class=\"datiincompleti\" *ngIf=\"!isAllFieldsValidProdotto()\">\r\n        <a class=\"title\">Dati generali incompleti</a>\r\n        <button (click)=\"moveToStep(1)\" class=\"child-buttons child-buttons-salvainbozza\">\r\n          COMPLETA\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- STAMPA DEI DATI DI RIEPILOGO - CASO PRODOTTO -->\r\n    <div *ngIf=\"loadTipoSegnalazioni == 'Prodotto'\">\r\n      <div *ngIf=\"isAllFieldsValidProdotto()\" class=\"title\">\r\n          <div class=\"display-title\">\r\n          <div>\r\n            <h3><span class=\"top-title\">Settore/Materia</span>\r\n            <span class=\"sub-title\">{{nomeSettoreMateria}}</span></h3>\r\n          </div>\r\n          <div>\r\n            <h3><span class=\"top-title\">Area/Prodotto</span>\r\n            <span class=\"sub-title\">{{nomeAreaProdotto}}</span></h3>\r\n          </div>\r\n          <div>\r\n            <h3><span class=\"top-title\">Sede</span>\r\n            <span class=\"sub-title\">{{nomeSede}}</span></h3>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- DATI INCOMPLETI - CASO CONTENZIOSO -->\r\n    <div *ngIf=\"loadTipoSegnalazioni == 'Contenzioso'\" class=\"container-data\">\r\n      <div class=\"datiincompleti\" *ngIf=\"!isAllFieldsValidContenzioso()\">\r\n        <a class=\"title\">Dati generali incompleti</a>\r\n        <button (click)=\"moveToStep(1)\" class=\"child-buttons child-buttons-salvainbozza\">\r\n          COMPLETA\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- STAMPA DEI DATI DI RIEPILOGO - CASO CONTENZIOSO -->\r\n    <div *ngIf=\"loadTipoSegnalazioni == 'Contenzioso'\">\r\n      <div *ngIf=\"isAllFieldsValidContenzioso()\" class=\"title\">\r\n        <div class=\"display-title\">\r\n          <div>\r\n            <h3><span class=\"top-title\">Tipologia Contezioso</span>\r\n            <span class=\"sub-title\">{{nomeTipologiaContenzioso}}</span></h3>\r\n          </div>\r\n          <div>\r\n            <h3><span class=\"top-title\">Settore/Materia</span>\r\n            <span class=\"sub-title\">{{nomeSettoreMateria}}</span></h3>\r\n          </div>\r\n          <div>\r\n            <h3><span class=\"top-title\">Area/Prodotto</span>\r\n            <span class=\"sub-title\">{{nomeAreaProdotto}}</span></h3>\r\n          </div>\r\n          <div>\r\n            <h3><span class=\"top-title\">Sede</span>\r\n            <span class=\"sub-title\">{{nomeSede}}</span></h3>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!--aggiungi contenzioso-->\r\n\r\n\r\n    </div>\r\n\r\n    <div *ngIf=\"listaAspettiAggiunti.length != 0\" class=\"title\">ASPETTI AGGIUNTI</div>\r\n    <div *ngIf=\"listaAspettiAggiunti.length == 0\" class=\"container-data\">\r\n      <div class=\"datiincompleti\">\r\n        <a class=\"title\">Aspetti aggiunti incompleti</a>\r\n        <button (click)=\"moveToStep(2)\" class=\"child-buttons child-buttons-salvainbozza\">\r\n          COMPLETA\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div *ngIf=\"listaAspettiAggiunti.length != 0\" class=\"container-data\">\r\n\r\n      <table mat-table [dataSource]=\"listaAspettiAggiunti\" class=\"mat-elevation-z8\"\r\n             #tableStep4 matTableId=\"tableStep4\">\r\n        <tr mat-header-row *matHeaderRowDef=\"displayedColumnsStep4\"></tr>\r\n        <tr mat-row *matRowDef=\"let row; columns: displayedColumnsStep4;\"></tr>\r\n\r\n        <ng-container matColumnDef=\"nomeAspetto\">\r\n          <th mat-header-cell mat-header=\"nomeAspetto\" *matHeaderCellDef>Nome Aspetto</th>\r\n          <td mat-cell *matCellDef=\"let element\"> {{element.nomeAspetto}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"descrizioneCriticita\">\r\n          <th mat-header-cell mat-header=\"descrizioneCriticita\" *matHeaderCellDef>Criticità\r\n          </th>\r\n          <td mat-cell *matCellDef=\"let element\"> {{\r\n            showDescrizioneTroncata(element.descrizioneCriticita) }} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"descrizioneSuggerimento\">\r\n          <th mat-header-cell mat-header=\"descrizioneSuggerimento\" *matHeaderCellDef>\r\n            Suggerimento\r\n          </th>\r\n          <td mat-cell *matCellDef=\"let element\"> {{\r\n            showDescrizioneTroncata(element.descrizioneSuggerimento) }} </td>\r\n        </ng-container>\r\n\r\n      </table>\r\n    </div>\r\n\r\n    <!-- </div> -->\r\n    <div class=\"container-buttons\">\r\n      <!-- <button mat-button (click)=\"stepper.reset()\">Reset</button> -->\r\n      <button mat-button matStepperPrevious class=\"child-buttons child-buttons-conferma\">\r\n        Indietro\r\n      </button>\r\n      <button mat-button (click)=\"invia(1)\" [disabled]=\"statoSegnalazione !== 1 || !isValidDatiGenerali()\" class=\"child-buttons child-buttons-salvainbozza\">\r\n        Salva in bozza\r\n      </button>\r\n<!--       <button (click)=\"invia(2)\" [disabled]=\"statoSegnalazione !== 1 || !isValidFormGroup()\" class=\"child-buttons child-buttons-conferma\">\r\n        Salva\r\n      </button> -->\r\n      <button mat-button (click)=\"invia(3)\" [disabled]=\"statoSegnalazione !== 1 || !isValidDatiGenerali() || this.listaAspettiAggiunti.length == 0\" class=\"child-buttons child-buttons-conferma\">\r\n        Salva ed Invia\r\n      </button>\r\n    </div>\r\n  </mat-step>\r\n</mat-stepper>\r\n<!-- </form> -->\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { RilevazioniComponent } from './rilevazioni.component';\r\nimport { RilevazioniNuovaComponent } from './rilevazioni-nuova/rilevazioni-nuova.component';\r\n// import { RilevazioniModificaComponent } from './rilevazioni-modifica/rilevazioni-modifica.component';\r\nimport { PaginaRisolviAspettoComponent } from './pagina-risolvi-aspetto/pagina-risolvi-aspetto.component';\r\nimport { GestioneSegnalazioneGerarchicoComponent } from './gestione-segnalazione-gerarchico/gestione-segnalazione-gerarchico.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: RilevazioniComponent },\r\n  { path: 'nuova', component: RilevazioniNuovaComponent },\r\n  //{ path: '', component: GestioneSegnalazioneGerarchicoComponent },\r\n  // { path: 'nuova',\r\n  //   loadChildren: () => import('./rilevazioni/rilevazioni-nuova.module').then(m => m.RilevazioniNuovaComponent)\r\n  // },\r\n  // { path: 'modifica/:id', component: RilevazioniModificaComponent},\r\n  // NUOVO\r\n  { path: 'risolvi-aspetti', component: PaginaRisolviAspettoComponent},\r\n  // { path: 'risolvi-aspetti-gerarchico', component: GestioneSegnalazioneGerarchicoComponent},\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class RilevazioniRoutingModule {}\r\n","import { Component, OnInit, ViewChild, OnDestroy } from '@angular/core';\r\nimport { TablesDataService } from './data.service';\r\nimport { MtxDialog } from '@ng-matero/extensions/dialog';\r\nimport { Aree } from '@shared/services/areeservice.service';\r\nimport { TipologiaRicorso } from '@shared/models/tipologia-ricorso.model';\r\nimport { ProceduraRiferimento } from '@shared/models/procedura-riferimento.model';\r\nimport { Router } from '@angular/router';\r\nimport { RilevazioneService } from '@shared/services/rilevazione.service';\r\nimport { FormBuilder, FormControl, FormGroup } from '@angular/forms';\r\nimport { MatDialog, MatDialogConfig } from '@angular/material/dialog';\r\n// import { RilevazioniDialogComponent } from './rilevazioni-dialog/rilevazioni-dialog.component';\r\nimport { Sort } from '@angular/material/sort';\r\nimport { Rilevazione, RilevazioneToExcel } from '@shared/models/rilevazione.model';\r\nimport { StepperService } from '@shared/services/stepper.service';\r\nimport { SettoreMateriaService } from '@shared/services/settore-materia.service';\r\nimport { TerritorioService } from '@shared/services/territorio.service';\r\nimport { ContenziosoService } from '@shared/services/contenzioso.service';\r\nimport { ModalModificaSegnalazioneComponent } from './modal-modifica-segnalazione/modal-modifica-segnalazione.component';\r\nimport { StorageService } from '@shared';\r\nimport { map, Observable, startWith, switchMap, tap } from 'rxjs';\r\nimport * as XLSX from 'xlsx';\r\nimport { saveAs } from 'file-saver';\r\n//import * as XLSX from 'xlsx-style';\r\nimport { MatAutocompleteTrigger } from '@angular/material/autocomplete';\r\nimport * as moment from 'moment';\r\n\r\nconst EXCEL_TYPE =\r\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8';\r\nconst EXCEL_EXTENSION = '.xlsx';\r\n\r\n@Component({\r\n  selector: 'app-rilevazioni',\r\n  templateUrl: './rilevazioni.component.html',\r\n  styleUrls: ['./rilevazioni.component.scss'],\r\n  providers: [TablesDataService],\r\n})\r\nexport class RilevazioniComponent implements OnInit, OnDestroy {\r\n  @ViewChild('areaInput', { read: MatAutocompleteTrigger })\r\n  areaAutocompleteTrigger!: MatAutocompleteTrigger;\r\n  @ViewChild('sedeInput', { read: MatAutocompleteTrigger })\r\n  sedeAutocompleteTrigger!: MatAutocompleteTrigger;\r\n  @ViewChild('tipologiaContenziosoInput', { read: MatAutocompleteTrigger })\r\n  tipologiaContenziosoAutocompleteTrigger!: MatAutocompleteTrigger;\r\n  listaTipologieRicorsi: TipologiaRicorso[] = [];\r\n  listaProcedureRiferimenti: ProceduraRiferimento[] = [];\r\n  sottoCatDisab = true;\r\n  prodottoDisab = true;\r\n  prodottoTipLavDisab = true;\r\n  // list: any[] = [];\r\n  dataSource: any[] = [];\r\n  isLoading = true;\r\n  // ricercaAtt = false;\r\n  listaRilevazioni: Rilevazione[] = [];\r\n  imageUrl: string[] = [];\r\n  settoreMateria: SettoreMateria[] = [];\r\n  areaProdotto: AreaProdotto[] = [];\r\n  tutteLeAreeProdotto: AreaProdotto[] = [];\r\n  sede: Sede[] = [];\r\n  tipologieContenzioso: tipologieContenzioso[] = [];\r\n  prodotti: segnalazioneProdotto[] = [];\r\n  contenziosi: segnalazioneContenzioso[] = [];\r\n  aspetti: Aspetti[] = [\r\n    { id: null, nome: '' },\r\n    { id: 1, nome: 'Nuovi Aspetti' },\r\n    { id: 2, nome: 'Solo Aspetti Standard' },\r\n  ];\r\n  role: string | null = null;\r\n\r\n  tabProdotto: number = 0\r\n  checkCurrentComponent: string | null = null;  // verifica se sto navigando verso nuovo inserimento o un altro componente\r\n\r\n  errorMessage: string | null = null;\r\n  // codiceSede: string[] = [];\r\n  codiceSede: any[] = [];\r\n  readonly ruoloRegionale: string = 'P12799';\r\n  readonly ruoloProvinciale: string = 'P12801';\r\n  readonly ruoloAmministratore: string = 'P12689';\r\n  readonly ruoloDCO: string = 'P12690';\r\n  readonly ruoloInformatico: string = 'P12800';\r\n  readonly pagina: string = 'Inserimento';\r\n\r\n  /*nome del file excel che verrà scaricato. */\r\n  fileName = 'RilevazioniExcel';\r\n\r\n  /*parametri*/\r\n  formRicerca = this.formBuilder.group({\r\n    settore: null,\r\n    area: null,\r\n    idSottoarea: null,\r\n    idProdotto: null,\r\n    idProdottoTipLav: null,\r\n    idAttore: null,\r\n    idTipologiaRicorso: null,\r\n    idProceduraRiferimento: null,\r\n    dataInizio: null,\r\n    dataFine: null,\r\n    dataScadenza: false,\r\n    dimensione: null,\r\n    pagina: null,\r\n  });\r\n\r\n  displayedColumnsProdotto: string[] = [\r\n    'data1',\r\n    'data2',\r\n    'settoreMateria',\r\n    'areaProdotto',\r\n    'sede',\r\n    'stato',\r\n  ];\r\n  displayedColumnsContenzioso: string[] = [\r\n    'data1',\r\n    'data2',\r\n    'tipologiaContenzioso',\r\n    'settoreMateria',\r\n    'areaProdotto',\r\n    'sede',\r\n    'stato',\r\n  ];\r\n  dataInizio = new FormControl();\r\n  dataFine = new FormControl();\r\n  dataInizioContenzioso = new FormControl();\r\n  dataFineContenzioso = new FormControl();\r\n  settoreCtrl = new FormControl();\r\n  filteredSettore: Observable<SettoreMateria[]> | undefined;\r\n\r\n  areaCtrl = new FormControl();\r\n  sedeCtrl = new FormControl();\r\n  tipologiaContenziosoCtrl = new FormControl();\r\n\r\n  filteredArea: Observable<AreaProdotto[]> | undefined;\r\n  filteredSede: Observable<Sede[]> | undefined;\r\n  filteredTipologiaContenzioso: Observable<tipologieContenzioso[]> | undefined;\r\n\r\n  constructor(\r\n    public dialog: MtxDialog,\r\n    // private areeSrv: Aree,\r\n    private rilevazioniSrv: RilevazioneService,\r\n    private router: Router,\r\n    private formBuilder: FormBuilder,\r\n    public dialog2: MatDialog,\r\n    private stepperService: StepperService,\r\n    private settoreMateriaService: SettoreMateriaService,\r\n    private areeProdottiService: Aree,\r\n    private territorioService: TerritorioService,\r\n    private contenziosoService: ContenziosoService,\r\n    private storageService: StorageService\r\n  ) {}\r\n\r\n  // resetFiltro() {\r\n  //   this.formRicerca.reset();\r\n  //   this.sottoCatDisab = true;\r\n  //   this.prodottoDisab = true;\r\n  //   this.prodottoTipLavDisab = true;\r\n  //   this.list = [];\r\n  //   this.isLoading = true;\r\n  //   this.ricercaAtt = false;\r\n\r\n  //   this.formRicerca.value.dataInizio = null;\r\n  //   this.formRicerca.value.dataFine = null;\r\n  //   this.formRicerca.value.dataScadenza = false;\r\n  //   this.formRicerca.value.dimensione = null;\r\n  //   this.formRicerca.value.idAttore = null;\r\n  //   this.formRicerca.value.idProceduraRiferimento = null;\r\n  //   this.formRicerca.value.idProdottoTipLav = null;\r\n  //   this.formRicerca.value.idTipologiaRicorso = null;\r\n  //   this.formRicerca.value.pagina = 1;\r\n  //   this.formRicerca.value.area = null;\r\n  //   this.formRicerca.value.settore = null;\r\n  //   this.formRicerca.value.idSottoarea = null;\r\n  //   this.formRicerca.value.idProdotto = null;\r\n  //   this.ricercaAtt = false;\r\n  //   this.isLoading = true;\r\n  //   this.loadStack();\r\n  // }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.checkCurrentComponent == null) {\r\n      this.rilevazioniSrv.tabNomeSegnalazione$.next(undefined);\r\n    }\r\n  }\r\n\r\n  async ngOnInit() {\r\n    try {\r\n      this.checkCurrentTab();\r\n      this.resetPaginazioneProdotto();\r\n      this.resetPaginazioneContenzioso();\r\n      // this.ricercaAtt = false;\r\n      this.isLoading = true;\r\n      // this.loadStack();\r\n      this.getSettoriMaterie();\r\n      this.getAreaProdotto();\r\n\r\n      this.codiceSede = this.storageService.getItem('listaSedi');\r\n      this.role = this.storageService.getItem('allroles');\r\n      await this.getSedi();\r\n      this.loadTipologieContenzioso();\r\n\r\n    } catch (error) {\r\n    }\r\n\r\n    this.filteredSettore = this.settoreCtrl.valueChanges.pipe(\r\n      startWith(''),\r\n      map(value => this._filterSettore(value))\r\n    );\r\n\r\n    this.filteredArea = this.areaCtrl.valueChanges.pipe(\r\n      startWith(''),\r\n      map(value => this._filterArea(value))\r\n    );\r\n\r\n    this.filteredSede = this.sedeCtrl.valueChanges.pipe(\r\n      startWith(''),\r\n      map(value => this._filterSede(value))\r\n    );\r\n\r\n    this.filteredTipologiaContenzioso = this.tipologiaContenziosoCtrl.valueChanges.pipe(\r\n      startWith(''),\r\n      map(value => this._filterTipologiaContenzioso(value))\r\n    );\r\n\r\n    // Aggiungi un listener per il controllo del settore\r\n    this.settoreCtrl.valueChanges.subscribe(value => {\r\n      if (!value) {\r\n        this.getAreaProdotto();\r\n      }\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if(this.areaAutocompleteTrigger){\r\n      this.areaAutocompleteTrigger.panelClosingActions\r\n      .pipe(\r\n        switchMap(() => this.filteredArea || []),\r\n        tap(filtered => {\r\n          if (this.areaCtrl.value && !filtered.some(option => option.id === this.areaCtrl.value)) {\r\n            this.areaCtrl.setValue(null);\r\n          }\r\n        })\r\n      )\r\n      .subscribe();\r\n    }\r\n\r\n    if(this.sedeAutocompleteTrigger){\r\n      this.sedeAutocompleteTrigger.panelClosingActions\r\n      .pipe(\r\n        switchMap(() => this.filteredSede || []),\r\n        tap(filtered => {\r\n          if (this.sedeCtrl.value && !filtered.some(option => option.id === this.sedeCtrl.value)) {\r\n            this.sedeCtrl.setValue(null);\r\n          }\r\n        })\r\n      )\r\n      .subscribe();\r\n    }\r\n\r\n    if(this.tipologiaContenziosoAutocompleteTrigger){\r\n      this.tipologiaContenziosoAutocompleteTrigger.panelClosingActions\r\n      .pipe(\r\n        switchMap(() => this.filteredTipologiaContenzioso || []),\r\n        tap(filtered => {\r\n          if (\r\n            this.tipologiaContenziosoCtrl.value &&\r\n            !filtered.some(option => option.id === this.tipologiaContenziosoCtrl.value)\r\n          ) {\r\n            this.tipologiaContenziosoCtrl.setValue(null);\r\n          }\r\n        })\r\n      )\r\n      .subscribe();\r\n    }\r\n  }\r\n\r\n  checkCurrentTab() {\r\n    // con\r\n    // caso default, primo accesso alla pagina\r\n    if (this.rilevazioniSrv.tabNomeSegnalazione$.value == undefined) {\r\n      this.rilevazioniSrv.tabNomeSegnalazione$.next('Segnalazioni Prodotto');\r\n    }\r\n    else {\r\n      if (this.rilevazioniSrv.tabNomeSegnalazione$.value == 'Segnalazioni Prodotto') {\r\n        this.tabProdotto = 0;\r\n      }\r\n      else if (this.rilevazioniSrv.tabNomeSegnalazione$.value == 'Segnalazioni Contenzioso') {\r\n        this.tabProdotto = 1;\r\n      }\r\n    }\r\n  }\r\n\r\n  tabClick(tab: any) {\r\n    this.rilevazioniSrv.tabNomeSegnalazione$.next(tab.tab.textLabel);\r\n  }\r\n\r\n  /*private*/ _filterSettore(value: string): SettoreMateria[] {\r\n    const filterValue = typeof value === 'string' ? value.toLowerCase() : '';\r\n    return this.settoreMateria.filter(option => option.nome.toLowerCase().includes(filterValue));\r\n  }\r\n\r\n  /*private*/ _filterArea(value: string): AreaProdotto[] {\r\n    const filterValue = typeof value === 'string' ? value.toLowerCase() : '';\r\n    return this.areaProdotto.filter(option => option.nome.toLowerCase().includes(filterValue));\r\n  }\r\n\r\n  /*private*/ _filterSede(value: string): Sede[] {\r\n    const filterValue = typeof value === 'string' ? value.toLowerCase() : '';\r\n    return this.sede.filter(option =>\r\n      this.showFieldSede(option.id!, option.nome).toLowerCase().includes(filterValue)\r\n    );\r\n  }\r\n\r\n  /*private*/ _filterTipologiaContenzioso(value: string): tipologieContenzioso[] {\r\n    const filterValue = typeof value === 'string' ? value.toLowerCase() : '';\r\n    // const filterValue = value.toLowerCase();\r\n    return this.tipologieContenzioso.filter(option =>\r\n      option.nome.toLowerCase().includes(filterValue)\r\n    );\r\n  }\r\n\r\n  async settoreSelected(selectedId: number) {\r\n    const selectedSettore = this.settoreMateria.find(option => option.id === selectedId);\r\n    this.settoreCtrl.setValue(selectedSettore?.nome || '');\r\n    this.settore = selectedId;\r\n    // gestisci qualsiasi logica aggiuntiva quando un settore è selezionato\r\n    try {\r\n      await this.settoreMateriaSelezionatoConId(selectedId);\r\n    } catch (error) {\r\n      // console.error('Errore nel caricamento delle aree prodotto', error);\r\n      this.errorMessage = 'Errore nel caricamento delle aree prodotto. Riprova più tardi.';\r\n      this.dialog.alert('Errore nel caricamento delle aree prodotto. Riprova più tardi.');\r\n    }\r\n  }\r\n\r\n  // async loadAreeProdotto(settoreId: number) {\r\n  //   if (settoreId == null || settoreId == -1) {\r\n  //     this.areaProdotto = [];\r\n  //     this.getAreaProdotto();\r\n  //   } else {\r\n  //     this.areeProdottiService.newGetAllByIdSettore(settoreId).subscribe((data: any) => {\r\n  //       if (data.length === 0) {\r\n  //         alert('Nessuna area prodotto associata a questo settore.');\r\n  //         this.areaProdotto = [];\r\n  //       } else {\r\n  //         this.areaProdotto = data;\r\n  //       }\r\n  //       this.filteredArea = this.areaCtrl.valueChanges.pipe(\r\n  //         startWith(''),\r\n  //         map(value => this._filterArea(value))\r\n  //       );\r\n  //     });\r\n  //   }\r\n  // }\r\n\r\n  areaSelected(selectedId: number) {\r\n    const selectedArea = this.areaProdotto.find(option => option.id === selectedId);\r\n    this.areaCtrl.setValue(selectedArea?.nome || '');\r\n    this.area = selectedId;\r\n    // gestisci qualsiasi logica aggiuntiva quando un'area è selezionata\r\n  }\r\n\r\n  sedeSelected(selectedId: number) {\r\n    const selectedSede = this.sede.find(option => option.id === selectedId);\r\n    this.sedeCtrl.setValue(this.showFieldSede(selectedSede?.id!, selectedSede?.nome!) || '');\r\n    this.filtroperSede = selectedId.toString();\r\n    // gestisci qualsiasi logica aggiuntiva quando una sede è selezionata\r\n  }\r\n\r\n  tipologiaContenziosoSelected(selectedId: number) {\r\n    const selectedTipologia = this.tipologieContenzioso.find(option => option.id === selectedId);\r\n    this.tipologiaContenziosoCtrl.setValue(selectedTipologia?.nome || '');\r\n    this.idTipologiaContenzioso = selectedId;\r\n    // gestisci qualsiasi logica aggiuntiva quando una tipologia di contenzioso è selezionata\r\n  }\r\n\r\n  clearSettore() {\r\n    this.settoreCtrl.setValue('');\r\n    this.areaCtrl.setValue('');\r\n    this.settore = null;\r\n    this.area = null;\r\n    this.filteredSettore = this.settoreCtrl.valueChanges.pipe(\r\n      startWith(''),\r\n      map(value => this._filterSettore(value))\r\n    );\r\n    this.areaProdotto = [];\r\n    this.getAreaProdotto(); // Ricarica tutte le aree prodotto\r\n  }\r\n\r\n  clearArea() {\r\n    this.areaCtrl.setValue('');\r\n    this.area = null;\r\n    this.filteredArea = this.areaCtrl.valueChanges.pipe(\r\n      startWith(''),\r\n      map(value => this._filterArea(value))\r\n    );\r\n  }\r\n\r\n  clearSede() {\r\n    this.sedeCtrl.setValue('');\r\n    this.filtroperSede = null;\r\n    this.filteredSede = this.sedeCtrl.valueChanges.pipe(\r\n      startWith(''),\r\n      map(value => this._filterSede(value))\r\n    );\r\n  }\r\n\r\n  clearTipologiaContenzioso() {\r\n    this.tipologiaContenziosoCtrl.setValue('');\r\n    this.idTipologiaContenzioso = null;\r\n    this.filteredTipologiaContenzioso = this.tipologiaContenziosoCtrl.valueChanges.pipe(\r\n      startWith(''),\r\n      map(value => this._filterTipologiaContenzioso(value))\r\n    );\r\n  }\r\n\r\n  clearDate(controlName: string) {\r\n    if (controlName === 'dataInizio') {\r\n      this.dataInizio.reset();\r\n      this.formatDate(this.dataInizio.value, this.dataFine.value, 'Prodotto');\r\n    } else if (controlName === 'dataFine') {\r\n      this.dataFine.reset();\r\n      this.formatDate(this.dataInizio.value, this.dataFine.value, 'Prodotto');\r\n    } else if (controlName === 'dataInizioContenzioso') {\r\n      this.dataInizioContenzioso.reset();\r\n      this.formatDate(this.dataInizioContenzioso.value, this.dataFineContenzioso.value, 'Contenzioso');\r\n    } else if (controlName === 'dataFineContenzioso') {\r\n      this.dataFineContenzioso.reset();\r\n      this.formatDate(this.dataInizioContenzioso.value, this.dataFineContenzioso.value, 'Contenzioso');\r\n    }\r\n    if (this.dataInizio.value == null && this.dataFine.value == null && this.dataInizioContenzioso.value == null && this.dataFineContenzioso.value == null){\r\n      this.formatDate(null, null, 'Prodotto')\r\n    }\r\n  }\r\n\r\n  async getSedi() {\r\n\r\n    const ruoliTrimmed = this.role!.split(';').map(ruolo => ruolo.trim());\r\n\r\n    if (ruoliTrimmed.includes(\"P12689\")) {\r\n    } else {\r\n        if ((ruoliTrimmed.includes(this.ruoloRegionale) || ruoliTrimmed.includes(this.ruoloProvinciale)) && this.codiceSede.length === 0) {\r\n          this.dialog.alert('Non ci sono sedi associate al tuo account.');\r\n            return;\r\n        }\r\n    }\r\n\r\n    this.territorioService.getSedi(this.role!, this.codiceSede, this.pagina, this.ruoloRegionale, this.ruoloProvinciale)\r\n    .subscribe((results: Sede[]) => {\r\n      const emptyObject = { id: null, nome: '' };\r\n      this.sede = [emptyObject, ... results];\r\n      // for(let i = 0; i < this.sede.length; i++) {\r\n      // }\r\n\r\n      // if (this.sede.length === 0) {\r\n      //   this.dialog.alert('Non ci sono sedi disponibili.');\r\n      //   return;\r\n      // }\r\n\r\n      // let selectedSede: string | undefined;\r\n      // const loadTipoSegnalazioni = this.stepperService.inserimentoTipoSegnalazione$.value || 'Prodotto'; //caso default\r\n      //   if (loadTipoSegnalazioni === 'Prodotto') {\r\n      //     if (this.stepperService.datiSegnalazioneProdotto$.value) {\r\n      //       selectedSede = this.stepperService.datiSegnalazioneProdotto$.value.sede;\r\n      //     }\r\n      //   } else {\r\n      //     if (this.stepperService.datiSegnalazioneContenzioso$.value) {\r\n      //       selectedSede = this.stepperService.datiSegnalazioneContenzioso$.value.sede;\r\n      //     }\r\n      //   }\r\n/*\r\n        this.sede.forEach(sede => {\r\n          if (selectedSede === sede.nome) {\r\n            console.log(`Selected Sede: ${sede.id}`);\r\n          }\r\n        }); */\r\n      });\r\n\r\n    this.inizializzaPaginazione('Prodotto');\r\n    this.inizializzaPaginazione('Contenzioso');\r\n  }\r\n\r\n  // loadStack() {\r\n  //   this.list = [];\r\n  // }\r\n\r\n  //----------------paginazione config--------------------------\r\n  pageDimProdotto = '20'; //numero di righe per pagina\r\n  pageDimContenzioso = '20'; //numero di righe per pagina\r\n  pageCurrProdotto = 1; //pagina corrente\r\n  pageCurrContenzioso = 1; //pagina corrente\r\n  pageNumProdotto = 0; //numero di pagine\r\n  pageNumContenzioso = 0; //numero di pagine\r\n  elemNumProdotto = 0; //numero di elementi totali\r\n  elemNumContenzioso = 0; //numero di elementi totali\r\n  baseProdotto = 1; //base per creazione layout\r\n  baseContenzioso = 1; //base per creazione layout\r\n  layoutDimProdotto = 6; //elementi paginazione\r\n  layoutDimContenzioso = 6; //elementi paginazione\r\n  layoutNumbersProdotto: number[] = []; //numeri del paginatore\r\n  layoutNumbersContenzioso: number[] = []; //numeri del paginatore\r\n  numPages = ['5', '10', '20', '50', '100']; //possibili righe di paginazione\r\n  ordine = 'aggiornato-desc'; //'id-desc';\r\n\r\n  resetPaginazioneProdotto() {\r\n    this.pageCurrProdotto = 1; //pagina corrente\r\n    this.baseProdotto = 1; //base per creazione layout\r\n    this.layoutDimProdotto = 6; //elementi paginazione\r\n    this.layoutNumbersProdotto = []; //numeri del paginatore\r\n  }\r\n\r\n  resetPaginazioneContenzioso() {\r\n    this.pageCurrContenzioso = 1; //pagina corrente\r\n    this.baseContenzioso = 1; //base per creazione layout\r\n    this.layoutDimContenzioso = 6; //elementi paginazione\r\n    this.layoutNumbersContenzioso = []; //numeri del paginatore\r\n  }\r\n\r\n  validitaDal: string | null = null;\r\n  validitaAl: string | null = null;\r\n\r\n  formatDate(dataInizio: Date | null, dataFine: Date | null, tipoSegnalazione: string) {\r\n    if (tipoSegnalazione === 'Prodotto') {\r\n      if (dataInizio != null) {\r\n        this.validitaDal = moment(this.dataInizio.value).startOf('day').format('YYYY-MM-DD');\r\n      } else {\r\n        this.validitaDal = null;\r\n      }\r\n      if (dataFine != null) {\r\n        this.validitaAl = moment(this.dataFine.value).startOf('day').format('YYYY-MM-DD');\r\n      } else {\r\n        this.validitaAl = null;\r\n      }\r\n    } else if (tipoSegnalazione === 'Contenzioso') {\r\n      if (dataInizio != null) {\r\n        this.validitaDal = moment(this.dataInizioContenzioso.value).startOf('day').format('YYYY-MM-DD');\r\n      } else {\r\n        this.validitaDal = null;\r\n      }\r\n      if (dataFine != null) {\r\n        this.validitaAl = moment(this.dataFineContenzioso.value).startOf('day').format('YYYY-MM-DD');\r\n      } else {\r\n        this.validitaAl = null;\r\n      }\r\n    }\r\n  }\r\n\r\n  inizializzaPaginazione(tipoSegnalazione: string) {\r\n    if (tipoSegnalazione === 'Prodotto') {\r\n      this.inizializzaPaginazioneProdotto();\r\n    } else if (tipoSegnalazione === 'Contenzioso') {\r\n      this.inizializzaPaginazioneContenzioso();\r\n    }\r\n  }\r\n\r\n  inizializzaPaginazioneProdotto() {\r\n    this.layoutNumbersProdotto = [];\r\n\r\n    this.rilevazioniSrv.contaRicercaProdotto(\r\n      this.settore == -1 ? null : this.settore,\r\n      this.area,\r\n      this.selectSede(),\r\n      this.validitaDal,\r\n      this.validitaAl,\r\n      this.idStatoSegnalazione,\r\n      this.selectRole(),\r\n      this.storageService.getItem('matricola'),\r\n      this.pagina,\r\n      (this.filtroperSede == null ? true : false)\r\n    ).subscribe((response: any) => {\r\n      this.pageCurrProdotto = (this.elemNumProdotto != response.totale) ? 1 : this.pageCurrProdotto;\r\n      \r\n      this.elemNumProdotto = response.totale != null ? response.totale : response.count;\r\n      // this.elemNumProdotto = response.totale;\r\n      this.pageNumProdotto = Math.ceil(this.elemNumProdotto / Number(this.pageDimProdotto));\r\n\r\n      this.scorriLayoutProdotto();\r\n      this.ricercaProdotto();\r\n    });\r\n  }\r\n\r\n  inizializzaPaginazioneContenzioso() {\r\n    this.layoutNumbersContenzioso = [];\r\n\r\n    this.rilevazioniSrv.contaRicercaContenzioso(\r\n      this.settore == -1 ? null : this.settore,\r\n      this.area,\r\n      this.selectSede(),\r\n      this.validitaDal,\r\n      this.validitaAl,\r\n      this.idStatoSegnalazione,\r\n      this.idTipologiaContenzioso,\r\n      this.selectRole(),\r\n      this.storageService.getItem('matricola'),\r\n      this.pagina,\r\n      (this.filtroperSede == null ? true : false)\r\n    ).subscribe((response: any) => {\r\n      this.pageCurrContenzioso = (this.elemNumContenzioso != response.totale) ? 1 : this.pageCurrContenzioso;\r\n\r\n      this.elemNumContenzioso = response.totale != null ? response.totale : response.count;\r\n      // this.elemNumContenzioso = response.totale;\r\n      this.pageNumContenzioso = Math.ceil(this.elemNumContenzioso / Number(this.pageDimContenzioso));\r\n\r\n      this.scorriLayoutContenzioso();\r\n      this.ricercaContenzioso();\r\n    });\r\n  }\r\n\r\n  formatToSixDigits(value: any): string | null {\r\n    const numberValue = Number(value);\r\n    if (value == null) {\r\n      return null;\r\n    }\r\n    return numberValue.toString().padStart(6, '0');\r\n  }\r\n\r\n  //scorri layoutNumbers\r\n  scorriLayoutProdotto() {\r\n    const size = this.layoutDimProdotto; // Numero di elementi da visualizzare nel layout\r\n    let currStart = Math.floor((this.pageCurrProdotto - 1) / (size - 1)) * (size - 1) + 1;\r\n    let currEnd = Math.min(currStart + size - 1, this.pageNumProdotto);\r\n\r\n    if (currEnd === this.pageNumProdotto && currEnd - currStart < size - 1) {\r\n      currStart = Math.max(1, this.pageNumProdotto - size + 1);\r\n    }\r\n\r\n    this.layoutNumbersProdotto = [];\r\n    for (let i = currStart; i <= currEnd; i++) {\r\n      this.layoutNumbersProdotto.push(i);\r\n    }\r\n  }\r\n\r\n  scorriLayoutContenzioso() {\r\n    const size = this.layoutDimContenzioso; // Numero di elementi da visualizzare nel layout\r\n    let currStart = Math.floor((this.pageCurrContenzioso - 1) / (size - 1)) * (size - 1) + 1;\r\n    let currEnd = Math.min(currStart + size - 1, this.pageNumContenzioso);\r\n\r\n    if (currEnd === this.pageNumContenzioso && currEnd - currStart < size - 1) {\r\n      currStart = Math.max(1, this.pageNumContenzioso - size + 1);\r\n    }\r\n\r\n    this.layoutNumbersContenzioso = [];\r\n    for (let i = currStart; i <= currEnd; i++) {\r\n      this.layoutNumbersContenzioso.push(i);\r\n    }\r\n  }\r\n\r\n  modificaPaginazione(tipoSegnalazione: string) {\r\n    const prodotto = 'Prodotto';\r\n    const contenzioso = 'Contenzioso';\r\n\r\n    switch (tipoSegnalazione) {\r\n      case prodotto: {\r\n        this.resetPaginazioneProdotto();\r\n        break;\r\n      }\r\n      case contenzioso: {\r\n        this.resetPaginazioneContenzioso();\r\n        break;\r\n      }\r\n    }\r\n    this.inizializzaPaginazione(tipoSegnalazione);\r\n  }\r\n\r\n  pageNextProdotto(tipoSegnalazione: string) {\r\n    if (this.pageCurrProdotto < this.pageNumProdotto) {\r\n      this.pageCurrProdotto++;\r\n      this.scorriLayoutProdotto();\r\n      this.inizializzaPaginazione(tipoSegnalazione);\r\n    }\r\n  }\r\n\r\n  pagePrevProdotto(tipoSegnalazione: string) {\r\n    if (this.pageCurrProdotto > 1) {\r\n      this.pageCurrProdotto--;\r\n      this.scorriLayoutProdotto();\r\n      this.inizializzaPaginazione(tipoSegnalazione);\r\n    }\r\n  }\r\n\r\n  setPageCurrProdotto(page: number, tipoSegnalazione: string) {\r\n    this.pageCurrProdotto = page;\r\n    this.inizializzaPaginazione(tipoSegnalazione);\r\n  }\r\n\r\n  pageFirstProdotto() {\r\n    if (this.pageCurrProdotto > 1) {\r\n      this.pageCurrProdotto = 1;\r\n      this.scorriLayoutProdotto();\r\n      this.inizializzaPaginazione('Prodotto');\r\n    }\r\n  }\r\n\r\n  pageLastProdotto() {\r\n    if (this.pageCurrProdotto < this.pageNumProdotto) {\r\n      this.pageCurrProdotto = this.pageNumProdotto;\r\n      this.scorriLayoutProdotto();\r\n      this.inizializzaPaginazione('Prodotto');\r\n    }\r\n  }\r\n\r\n  pageNextContenzioso(tipoSegnalazione: string) {\r\n    if (this.pageCurrContenzioso < this.pageNumContenzioso) {\r\n      this.pageCurrContenzioso++;\r\n      this.scorriLayoutContenzioso();\r\n      this.inizializzaPaginazione(tipoSegnalazione);\r\n    }\r\n  }\r\n\r\n  pagePrevContenzioso(tipoSegnalazione: string) {\r\n    if (this.pageCurrContenzioso > 1) {\r\n      this.pageCurrContenzioso--;\r\n      this.scorriLayoutContenzioso();\r\n      this.inizializzaPaginazione(tipoSegnalazione);\r\n    }\r\n  }\r\n\r\n  setPageCurrContenzioso(page: number, tipoSegnalazione: string) {\r\n    this.pageCurrContenzioso = page;\r\n    this.inizializzaPaginazione(tipoSegnalazione);\r\n  }\r\n\r\n  pageFirstContenzioso() {\r\n    if (this.pageCurrContenzioso > 1) {\r\n      this.pageCurrContenzioso = 1;\r\n      this.scorriLayoutContenzioso();\r\n      this.inizializzaPaginazione('Contenzioso');\r\n    }\r\n  }\r\n\r\n  pageLastContenzioso() {\r\n    if (this.pageCurrContenzioso < this.pageNumContenzioso) {\r\n      this.pageCurrContenzioso = this.pageNumContenzioso;\r\n      this.scorriLayoutContenzioso();\r\n      this.inizializzaPaginazione('Contenzioso');\r\n    }\r\n  }\r\n\r\n  // openDialog(id: number) {\r\n  //   const dialogConfig = new MatDialogConfig();\r\n  //   dialogConfig.height = '700px';\r\n  //   dialogConfig.disableClose = false;\r\n  //   dialogConfig.autoFocus = true;\r\n  //   dialogConfig.data = id;\r\n\r\n  //   const dialogRef = this.dialog2.open(RilevazioniDialogComponent, dialogConfig);\r\n\r\n  //   dialogRef.afterClosed().subscribe(result => {\r\n  //     if (result) {\r\n  //       //modifica\r\n  //       this.router.navigate(['/organizzazione/rilevazioni/modifica/' + id]);\r\n  //       return;\r\n  //     }\r\n  //     // this.inizializzaPaginazione();\r\n  //   });\r\n  // }\r\n\r\n  showFieldStato(stato: number) {\r\n    const statoImages: { [key: number]: string } = {\r\n      1: 'In Bozza',\r\n      2: 'Salvata',\r\n      3: 'Da Risolvere',\r\n      4: 'Integrata',\r\n      5: 'Chiusa',\r\n    };\r\n\r\n    return statoImages[stato];\r\n  }\r\n\r\n  sortData(sort: Sort, tipologia: string) {\r\n\r\n    const prodotto = 'Prodotto';\r\n    const contenzioso = 'Contenzioso';\r\n\r\n    this.ordine = '';\r\n\r\n    if (sort.direction) {\r\n      this.ordine = sort.active + '_' + sort.direction;\r\n    }\r\n\r\n    this.ordineColonna = this.ordine;\r\n\r\n    switch (tipologia) {\r\n      case prodotto: {\r\n        this.ricercaProdotto();\r\n        break;\r\n      }\r\n      case contenzioso: {\r\n        this.ricercaContenzioso();\r\n        break;\r\n      }\r\n    }\r\n    // this.popolaRisultato();\r\n  }\r\n\r\n  // popolaRisultato() {\r\n  //   let datai = '';\r\n\r\n  //   if (this.formRicerca.value.dataInizio) {\r\n  //     datai =\r\n  //       this.formRicerca.value.dataInizio._i.month +\r\n  //       1 +\r\n  //       '/' +\r\n  //       this.formRicerca.value.dataInizio._i.date +\r\n  //       '/' +\r\n  //       this.formRicerca.value.dataInizio._i.year;\r\n  //   }\r\n\r\n  //   let dataf = '';\r\n  //   if (this.formRicerca.value.dataFine) {\r\n  //     dataf =\r\n  //       this.formRicerca.value.dataFine._i.month +\r\n  //       1 +\r\n  //       '/' +\r\n  //       (this.formRicerca.value.dataFine._i.date + 1) +\r\n  //       '/' +\r\n  //       this.formRicerca.value.dataFine._i.year;\r\n  //   }\r\n\r\n  //   this.isLoading = true;\r\n  // }\r\n\r\n  // updateList() {\r\n  //   this.list = this.list.splice(-1).concat(this.list);\r\n  // }\r\n\r\n  vaiNuova(tipologia: string): void {\r\n    this.checkCurrentComponent = tipologia;\r\n    this.setTipoSegnalazione(tipologia);\r\n    tipologia == 'Prodotto'\r\n      ? this.stepperService.datiSegnalazioneProdotto$.next(undefined)\r\n      : this.stepperService.datiSegnalazioneContenzioso$.next(undefined);\r\n    this.router.navigate(['/segnalazione/inserimento/nuova']);\r\n  }\r\n\r\n  setTipoSegnalazione(tipologia: string) {\r\n    const prodotto = 'Prodotto';\r\n    const contenzioso = 'Contenzioso';\r\n\r\n    switch (tipologia) {\r\n      case prodotto: {\r\n        this.stepperService.inserimentoTipoSegnalazione$.next(prodotto);\r\n        break;\r\n      }\r\n      case contenzioso: {\r\n        this.stepperService.inserimentoTipoSegnalazione$.next(contenzioso);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  // clickRiga(value: any) {\r\n  //   this.openDialog(value.rowData.id);\r\n  // }\r\n\r\n  // Funzione per ottenere i filtri applicati\r\n  /*private*/public getAppliedFilters(): any[] {\r\n    const filters: any[] = [];\r\n    if (this.settoreCtrl.value) {\r\n      filters.push({ Filtro: 'Settore', Valore: this.settoreCtrl.value });\r\n    }\r\n    if (this.areaCtrl.value) {\r\n      filters.push({ Filtro: 'Area', Valore: this.areaCtrl.value });\r\n    }\r\n    if (this.sedeCtrl.value) {\r\n      filters.push({ Filtro: 'Sede', Valore: this.sedeCtrl.value });\r\n    }\r\n    if (this.tipologiaContenziosoCtrl.value) {\r\n      filters.push({\r\n        Filtro: 'Tipologia Contenzioso',\r\n        Valore: this.tipologiaContenziosoCtrl.value,\r\n      });\r\n    }\r\n    if (this.formRicerca.value.dataInizio) {\r\n      filters.push({ Filtro: 'Data Inizio', Valore: this.formRicerca.value.dataInizio });\r\n    }\r\n    if (this.formRicerca.value.dataFine) {\r\n      filters.push({ Filtro: 'Data Fine', Valore: this.formRicerca.value.dataFine });\r\n    }\r\n    if (filters.length === 0) {\r\n      filters.push({ Filtro: 'Nessun filtro applicato', Valore: '' });\r\n    }\r\n    return filters;\r\n  }\r\n\r\n  exportAsXLSX(tipoSegnalazione: string): void {\r\n    if (tipoSegnalazione === 'Prodotto') {\r\n      this.exportProdottoAsXLSX();\r\n    } else if (tipoSegnalazione === 'Contenzioso') {\r\n      this.exportContenziosoAsXLSX();\r\n    }\r\n  }\r\n\r\n  /*private*/ exportProdottoAsXLSX(): void {\r\n    if (this.prodotti.length === 0) {\r\n      this.dialog.alert(\"Nessun dato disponibile per l'esportazione!\");\r\n      return;\r\n    }\r\n\r\n    const mappedData = this.prodotti.map(item => ({\r\n      'Data Creazione': item.data1,\r\n      'Data Ultima Modifica': item.data2,\r\n      'Settore/Materia': item.settoreMateria,\r\n      'Area/Prodotto': item.areaProdotto,\r\n      'Sede': this.showFieldSede(item.sedeId, item.sede),\r\n      'Stato': item.statoDesc,\r\n      'Inviata': item.inviata ? 'Sì' : 'No',\r\n    }));\r\n    // console.log('mappedData: ',mappedData)\r\n    this.exportDataToExcel(mappedData, 'Prodotto');\r\n  }\r\n\r\n  /*private*/ exportContenziosoAsXLSX(): void {\r\n    if (this.contenziosi.length === 0) {\r\n      this.dialog.alert(\"Nessun dato disponibile per l'esportazione!\");\r\n      return;\r\n    }\r\n\r\n    const mappedData = this.contenziosi.map(item => ({\r\n      'Data Creazione': item.data1,\r\n      'Data Ultima Modifica': item.data2,\r\n      'Tipologia Contenzioso': item.contenziosoDesc,\r\n      'Settore/Materia': item.settoreMateria,\r\n      'Area/Prodotto': item.areaProdotto,\r\n      'Sede': this.showFieldSede(item.sedeId, item.sede),\r\n      'Stato': item.statoDesc,\r\n      'Inviata': item.inviata ? 'Sì' : 'No',\r\n    }));\r\n    this.exportDataToExcel(mappedData, 'Contenzioso');\r\n  }\r\n\r\n  // Funzione per esportare i dati in Excel\r\n  /*private*/ exportDataToExcel(mappedData: any[], tipoSegnalazione: string): void {\r\n    // Ottenere i filtri applicati\r\n    const filters = this.getAppliedFilters();\r\n\r\n    // Convertire i filtri in un worksheet\r\n    const filtersWorksheet: XLSX.WorkSheet = XLSX.utils.json_to_sheet(filters);\r\n\r\n    // Convertire i dati in un worksheet\r\n    const dataWorksheet: XLSX.WorkSheet = XLSX.utils.json_to_sheet(mappedData);\r\n\r\n    // Unire i due worksheet\r\n    const workbook: XLSX.WorkBook = {\r\n      Sheets: {\r\n        'Filtri Applicati': filtersWorksheet,\r\n        'Dati': dataWorksheet,\r\n      },\r\n      SheetNames: ['Filtri Applicati', 'Dati'],\r\n    };\r\n\r\n    // Aggiungere bordi alle celle del worksheet dei dati\r\n    const range = XLSX.utils.decode_range(dataWorksheet['!ref'] || '');\r\n    for (let R = range.s.r; R <= range.e.r; ++R) {\r\n      for (let C = range.s.c; C <= range.e.c; ++C) {\r\n        const cell_address = { c: C, r: R };\r\n        const cell_ref = XLSX.utils.encode_cell(cell_address);\r\n        if (!dataWorksheet[cell_ref]) dataWorksheet[cell_ref] = { t: 's', v: '' };\r\n        dataWorksheet[cell_ref].s = {\r\n          border: {\r\n            top: { style: 'thin', color: { rgb: '000000' } },\r\n            bottom: { style: 'thin', color: { rgb: '000000' } },\r\n            left: { style: 'thin', color: { rgb: '000000' } },\r\n            right: { style: 'thin', color: { rgb: '000000' } },\r\n          },\r\n        };\r\n      }\r\n    }\r\n\r\n    const excelBuffer: any = XLSX.write(workbook, { bookType: 'xlsx', type: 'array' });\r\n    this.saveAsExcelFile(excelBuffer, this.getNomeFile(tipoSegnalazione));\r\n  }\r\n\r\n  // Funzione per salvare il file Excel\r\n  /*private*/ saveAsExcelFile(buffer: any, fileName: string): void {\r\n    const data: Blob = new Blob([buffer], { type: EXCEL_TYPE });\r\n    saveAs(data, fileName + EXCEL_EXTENSION);\r\n  }\r\n\r\n  /*private*/ getNomeFile(tipoSegnalazione: string): string {\r\n    const format = 'yyyy-MM-dd';\r\n    const locale = 'it-IT';\r\n    const oggi = new Date();\r\n    let baseFileName = 'Rilevazioni';\r\n\r\n    if (tipoSegnalazione === 'Prodotto') {\r\n      baseFileName = 'RilevazioneProdotti';\r\n    } else if (tipoSegnalazione === 'Contenzioso') {\r\n      baseFileName = 'RilevazioneContenziosi';\r\n    }\r\n    return `${baseFileName}-${oggi.toLocaleDateString(locale, {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n    })}-${oggi.toLocaleTimeString(locale, {\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n      second: '2-digit',\r\n      hour12: false,\r\n    })}-${oggi.getMilliseconds()}`;\r\n  }\r\n\r\n  ////////////////////////////////////////////////////////////////////////////////////////////////\r\n  // NUOVO\r\n  minDate: any;\r\n  maxDate: any;\r\n\r\n  ordineColonna: string | null = null;\r\n\r\n  //filtri ricerca:\r\n  settore: number | null = null;\r\n  area: number | null = null;\r\n  filtroperSede: string | null = null;\r\n  /* dataInizio: Date | null = null;\r\n  dataFine: Date | null = null; */\r\n  idStatoSegnalazione: number | null = null;\r\n  idTipologiaContenzioso: number | null = null;\r\n\r\n  formFiltriDiRicercaProdotto = this.formBuilder.group({\r\n    settore: null,\r\n    area: null,\r\n    filtroperSede: null,\r\n    dataInizio: null,\r\n    dataFine: null,\r\n    idStatoSegnalazione: null,\r\n    idTipologiaContenzioso: null,\r\n  });\r\n\r\n  formFiltriDiRicercaContenzioso = this.formBuilder.group({\r\n    settore: null,\r\n    area: null,\r\n    filtroperSede: null,\r\n    dataInizio: null,\r\n    dataFine: null,\r\n    idStatoSegnalazione: null,\r\n    idTipologiaContenzioso: null,\r\n  });\r\n\r\n  resetRicerca() {\r\n    // this.clearDate('dataInizioContenzioso');\r\n    // this.clearDate('dataInizio');\r\n    // this.clearDate('dataInizioContenzioso');\r\n    // this.clearDate('dataFineContenzioso');\r\n    this.settore = null;\r\n    this.area = null;\r\n    this.areaProdotto = [];\r\n    this.filtroperSede = null;\r\n    this.dataInizio.reset();\r\n    this.dataFine.reset();\r\n    this.dataInizioContenzioso.reset();\r\n    this.dataFineContenzioso.reset();\r\n    this.idStatoSegnalazione = null;\r\n    this.getAreaProdotto();\r\n    this.settoreCtrl.reset();\r\n    this.areaCtrl.reset();\r\n    this.sedeCtrl.reset();\r\n    this.tipologiaContenziosoCtrl.reset();\r\n    this.filteredSettore = this.settoreCtrl.valueChanges.pipe(\r\n      startWith(''),\r\n      map(value => this._filterSettore(value))\r\n    );\r\n    this.filteredArea = this.areaCtrl.valueChanges.pipe(\r\n      startWith(''),\r\n      map(value => this._filterArea(value))\r\n    );\r\n\r\n    this.filteredSede = this.sedeCtrl.valueChanges.pipe(\r\n      startWith(''),\r\n      map(value => this._filterSede(value))\r\n    );\r\n\r\n    this.filteredTipologiaContenzioso = this.tipologiaContenziosoCtrl.valueChanges.pipe(\r\n      startWith(''),\r\n      map(value => this._filterTipologiaContenzioso(value))\r\n    );\r\n    // Esegui la ricerca senza filtri\r\n    this.inizializzaPaginazione('Prodotto');\r\n    this.inizializzaPaginazione('Contenzioso');\r\n  }\r\n\r\n  handleRowClickProdotto(segnalazioneSelezionata: segnalazioneProdotto) {\r\n    this.checkCurrentComponent = 'Prodotto';\r\n\r\n    this.setTipoSegnalazione('Prodotto');\r\n    this.stepperService.datiSegnalazioneProdotto$.next(segnalazioneSelezionata);\r\n\r\n    const dialogRef = this.dialog2.open(ModalModificaSegnalazioneComponent, {\r\n      disableClose: true,\r\n      width: 'auto',\r\n      height: 'auto',\r\n    });\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      this.inizializzaPaginazione(this.stepperService.inserimentoTipoSegnalazione$.value!);\r\n    });\r\n  }\r\n\r\n  handleRowClickContenzioso(segnalazioneSelezionata: segnalazioneContenzioso) {\r\n    this.checkCurrentComponent = 'Contenzioso';\r\n\r\n    this.setTipoSegnalazione('Contenzioso');\r\n    this.stepperService.datiSegnalazioneContenzioso$.next(segnalazioneSelezionata);\r\n\r\n    const dialogRef = this.dialog2.open(ModalModificaSegnalazioneComponent, {\r\n      disableClose: true,\r\n      width: 'auto',\r\n      height: 'auto',\r\n    });\r\n    dialogRef.afterClosed().subscribe(() => {\r\n      this.inizializzaPaginazione(this.stepperService.inserimentoTipoSegnalazione$.value!);\r\n    });\r\n  }\r\n\r\n  showFieldSede(codiceSede: number, nomeSede: string): string {\r\n    if (\r\n      codiceSede != null &&\r\n      codiceSede != undefined &&\r\n      codiceSede != Number('') &&\r\n      nomeSede != null &&\r\n      nomeSede != undefined &&\r\n      nomeSede != ''\r\n    ) {\r\n      var codiceFormattato = this.formatToSixDigits(codiceSede);\r\n      return codiceFormattato + ' - ' + nomeSede;\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  getSettoriMaterie() {\r\n    this.settoreMateriaService.getSettoriConAreeProdotti().subscribe((data: SettoreMateria[] | string) => {\r\n      const emptyObject: SettoreMateria = { id: null, nome: '' };\r\n      // Verifica se `data` è un array; se lo è, combina con l'oggetto vuoto, altrimenti usa solo l'oggetto vuoto\r\n      if (Array.isArray(data)) {\r\n        this.settoreMateria = [emptyObject, ...data];\r\n      } else {\r\n        this.settoreMateria = [emptyObject]; // Se non è un array, assegna solo l'oggetto vuoto\r\n      }\r\n    });\r\n  }\r\n\r\n  getAreaProdotto() {\r\n    this.areeProdottiService.getAllAreaProdotto().subscribe((data: AreaProdotto[]) => {\r\n      const emptyObject: AreaProdotto = { id: null, nome: '' };\r\n      this.areaProdotto = [emptyObject, ...data];\r\n      this.filteredArea = this.areaCtrl.valueChanges.pipe(\r\n        startWith(''),\r\n        map(value => this._filterArea(value))\r\n      );\r\n    });\r\n  }\r\n\r\n  settoreMateriaSelezionatoConId(idSettore: number) {\r\n    if (idSettore == null || idSettore == -1) {\r\n      this.areaProdotto = [];\r\n      this.getAreaProdotto();\r\n    } else {\r\n      this.areeProdottiService.newGetAllByIdSettore(idSettore).subscribe((data: any) => {\r\n        const emptyObject: AreaProdotto = { id: null, nome: '' };\r\n        this.areaProdotto = [emptyObject, ...data];\r\n      });\r\n      this.filteredArea = this.areaCtrl.valueChanges.pipe(\r\n        startWith(''),\r\n        map(value => this._filterArea(value))\r\n      );\r\n      this.settore = idSettore;\r\n    }\r\n  }\r\n\r\n  loadTipologieContenzioso(): void {\r\n    this.contenziosoService.getAllTioplogie().subscribe((data: tipologieContenzioso[]) => {\r\n      const emptyObject: tipologieContenzioso = { id: null, nome: '' };\r\n      this.tipologieContenzioso = [emptyObject, ...data];\r\n    });\r\n  }\r\n\r\n  selectRole(): string {\r\n    // se il multiruolo prevede l'amministratore, o il ruolo regionale oppure multiruoli che li includono\r\n    const ruoli = this.role!.split(';').map(ruolo => ruolo.trim());\r\n    let ruoloSelezionato = \"\";\r\n\r\n    switch (true) {\r\n      case ruoli.includes(this.ruoloAmministratore):\r\n        ruoloSelezionato = this.ruoloAmministratore;\r\n        break;\r\n      case ruoli.includes(this.ruoloRegionale):\r\n        ruoloSelezionato = this.ruoloRegionale;\r\n        break;\r\n      case ruoli.includes(this.ruoloProvinciale):\r\n        ruoloSelezionato = this.ruoloProvinciale;\r\n        break;\r\n      default:\r\n        ruoloSelezionato = \"\";\r\n    }\r\n    return ruoloSelezionato;\r\n  }\r\n\r\n  selectSede(): string[] | null {\r\n    var listaCodeSedi = [];\r\n    if ( (this.role!.split(';').map(ruolo => ruolo.trim()).includes(\"P12689\") ||\r\n          this.role!.split(';').map(ruolo => ruolo.trim()).includes(\"P12690\") ) &&\r\n          this.filtroperSede == null /*&&\r\n          this.codiceSede.length > 0*/ ) {\r\n            return null\r\n    } else if ( (this.role!.split(';').map(ruolo => ruolo.trim()).includes(\"P12689\") ||\r\n          this.role!.split(';').map(ruolo => ruolo.trim()).includes(\"P12690\") ) &&\r\n          this.filtroperSede != null ) {\r\n            listaCodeSedi.push(this.formatToSixDigits(this.filtroperSede)!);\r\n            return listaCodeSedi;\r\n    }\r\n    else {\r\n\r\n      if ( (this.role!.split(';').map(ruolo => ruolo.trim()).includes(this.ruoloProvinciale) ||\r\n        this.role!.split(';').map(ruolo => ruolo.trim()).includes(this.ruoloRegionale) ) &&\r\n        this.filtroperSede == null &&\r\n        this.codiceSede.length > 0 ) {\r\n\r\n        for (let i=0; i<this.codiceSede.length; i++) {\r\n          listaCodeSedi.push(this.codiceSede[i].sedeCode)\r\n        }\r\n\r\n        return listaCodeSedi;\r\n      } else {\r\n        listaCodeSedi.push(this.formatToSixDigits(this.filtroperSede)!);\r\n        return listaCodeSedi;\r\n      }\r\n    }\r\n  }\r\n\r\n  ricercaProdotto() {\r\n\r\n    this.isLoading = true;\r\n    // if (this.dataInizio.value != null) {\r\n    //   this.validitaDal = moment(this.dataInizio.value).startOf('day').format('YYYY-MM-DD')\r\n    // } else { this.validitaDal = null; }\r\n    // if (this.dataFine.value != null) {\r\n    //   this.validitaAl = moment(this.dataFine.value).startOf('day').format('YYYY-MM-DD')\r\n    // } else { this.validitaAl = null; }\r\n\r\n    const formValues = this.formRicerca.value;\r\n\r\n    const codiceSede = (this.filtroperSede == null && this.codiceSede.length > 0) ? this.codiceSede[0] : this.formatToSixDigits(this.filtroperSede);\r\n    // var roleRicerca = \"\";\r\n    this.rilevazioniSrv\r\n      .getRicercaProdotto(\r\n        Number(this.pageDimProdotto),\r\n        this.pageCurrProdotto,\r\n        this.settore == -1 ? null : this.settore,\r\n        this.area,\r\n        this.selectSede(),\r\n        this.validitaDal,\r\n        this.validitaAl,\r\n        this.idStatoSegnalazione,\r\n        this.selectRole(),\r\n        this.storageService.getItem('matricola'),\r\n        this.ordineColonna,\r\n        'Inserimento',\r\n        this.filtroperSede == null ? true : false\r\n        //10, 1, null, null, null, null, null, null, null, null, null\r\n      )\r\n      .subscribe(\r\n        (data: any[]) => {\r\n          this.isLoading = false;\r\n          this.prodotti = data;\r\n          if (!(this.prodotti.length > 0) /*&& this.ricercaAtt*/) {\r\n            this.dialog.alert('Nessun risultato per il filtro selezionato!');\r\n            /*this.ricercaAtt = false;*/\r\n          }\r\n        },\r\n        error => {\r\n          // console.error('Errore nel recupero dei prodotti', error);\r\n          this.errorMessage = 'Errore nel recupero dei prodotti';\r\n          this.isLoading = false;\r\n        }\r\n      );\r\n  }\r\n\r\n  ricercaContenzioso() {\r\n    this.isLoading = true;\r\n    const formValues = this.formRicerca.value;\r\n\r\n    this.rilevazioniSrv\r\n      .getRicercaContenzioso(\r\n        Number(this.pageDimContenzioso),\r\n        this.pageCurrContenzioso,\r\n        this.settore == -1 ? null : this.settore,\r\n        this.area,\r\n        this.selectSede(),\r\n        this.validitaDal,\r\n        this.validitaAl,\r\n        this.idStatoSegnalazione,\r\n        this.idTipologiaContenzioso,\r\n        this.selectRole(),\r\n        this.storageService.getItem('matricola'),\r\n        this.ordineColonna,\r\n        'Inserimento', //<-- mettere \"Gestione\" nel caso della pagina della ricerca dell'amministratore in modo tale da farsi ritornare le date invio e data risolta\r\n        this.filtroperSede == null ? true : false\r\n        //10, 1, null, null, null, null, null, null, null, null, null, \"Inserimento\".  <-- mettere \"Gestione\" nel caso della pagina della ricerca dell'amministratore in modo tale da farsi ritornare le date invio e data risolta\r\n      )\r\n      .subscribe(\r\n        (data: any[]) => {\r\n          this.contenziosi = data;\r\n          this.isLoading = false;\r\n          console.log('tabProdotto: ', this.tabProdotto)\r\n          if (!(this.contenziosi.length > 0) && (this.tabProdotto == 1) /*&& this.ricercaAtt*/) {\r\n            this.dialog.alert('Nessun risultato per il filtro selezionato!');\r\n            /*this.ricercaAtt = false;*/\r\n          }\r\n        },\r\n        error => {\r\n          // console.error('Errore nel recupero dei contenziosi', error);\r\n          this.errorMessage = 'Errore nel recupero dei contenziosi';\r\n          this.isLoading = false;\r\n        }\r\n      );\r\n  }\r\n\r\n  onDateChange(typeDate: string) {\r\n    if (typeDate.includes('Contenzioso')) {\r\n      this.formatDate(this.dataInizioContenzioso.value, this.dataFineContenzioso.value, 'Contenzioso');\r\n      if (this.validitaDal && this.validitaAl && this.validitaDal > this.validitaAl) {\r\n\r\n        if (typeDate === 'startDateContenzioso') {\r\n          this.dataInizioContenzioso.reset();\r\n        } else if (typeDate === 'endDateContenzioso') {\r\n          this.dataFineContenzioso.reset();\r\n        }\r\n      }\r\n    } else {\r\n      this.formatDate(this.dataInizio.value, this.dataFine.value, 'Prodotto');\r\n      if (this.validitaDal && this.validitaAl && this.validitaDal > this.validitaAl) {\r\n        if (typeDate === 'startDate') {\r\n          this.dataInizio.reset();\r\n        } else if (typeDate === 'endDate') {\r\n          this.dataFine.reset();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  filterDate = (date: Date | null): boolean => {\r\n    const currentDate = date || new Date();\r\n    return this.dataInizio ? currentDate >= this.dataInizio.value : true;\r\n  };\r\n\r\n  openAreaPanel() {\r\n    this.areaAutocompleteTrigger.openPanel();\r\n  }\r\n\r\n  openSedePanel() {\r\n    this.sedeAutocompleteTrigger.openPanel();\r\n  }\r\n\r\n  openTipologiaContenziosoPanel() {\r\n    this.tipologiaContenziosoAutocompleteTrigger.openPanel();\r\n  }\r\n\r\n  formatDateToISO(date: Date | null | undefined): string {\r\n    if (!date) return '';\r\n    return date.toISOString().split('T')[0]; // Ottiene la data in formato yyyy-MM-dd\r\n  }\r\n\r\n  onFocus(ctrl: FormControl): void {\r\n    if (!ctrl.value || ctrl.value === '') {\r\n      ctrl.setValue(' ');\r\n      setTimeout(() => ctrl.setValue(''), 1);\r\n    }\r\n  }\r\n}\r\n\r\nexport interface Record {\r\n  id: number;\r\n  dataInvio: string;\r\n  dataRisoluzione: string;\r\n  settoreMateria: string;\r\n  areaProdotto: string;\r\n  stato: string;\r\n  sede: string;\r\n}\r\n\r\ninterface SettoreMateria {\r\n  id: number | null;\r\n  nome: string;\r\n}\r\n\r\ninterface AreeProdotti {\r\n  areaProdotto: AreaProdotto[];\r\n}\r\n\r\ninterface AreaProdotto {\r\n  id: number | null;\r\n  nome: string;\r\n}\r\n\r\ninterface Sede {\r\n  id: number | null;\r\n  nome: string;\r\n}\r\n\r\ninterface Aspetti {\r\n  // consiglio di rinominare (es: tipiAspetto) perché si tratta di aspetti standard e nuovi aspetti\r\n  id: number | null;\r\n  nome: string;\r\n}\r\ninterface tipologieContenzioso {\r\n  id: number | null;\r\n  nome: string;\r\n}\r\n\r\ninterface segnalazioneContenzioso {\r\n  areaId: number;\r\n  areaProdotto: string;\r\n  contenziosoDesc: string;\r\n  contenziosoId: number;\r\n  data1: string;\r\n  data2: string;\r\n  id: number;\r\n  // tipologiaContenzioso: string;\r\n  inviata: boolean;\r\n  sede: string;\r\n  sedeId: number;\r\n  settoreId: number;\r\n  settoreMateria: string;\r\n  statoDesc: string;\r\n  statoId: number;\r\n}\r\n\r\ninterface segnalazioneProdotto {\r\n  areaId: number;\r\n  areaProdotto: string;\r\n  data1: string;\r\n  data2: string;\r\n  id: number;\r\n  inviata: boolean;\r\n  sede: string;\r\n  sedeId: number;\r\n  settoreId: number;\r\n  settoreMateria: string;\r\n  statoDesc: string;\r\n  statoId: number;\r\n}\r\n","<page-header></page-header>\r\n\r\n<mat-tab-group (selectedTabChange)=\"tabClick($event)\" [(selectedIndex)]=\"tabProdotto\">\r\n\r\n  <mat-tab class=\"tab\" label=\"Segnalazioni Prodotto\"> <br>\r\n\r\n    <!-- <mat-card-actions align=\"end\" class=\"mat-form-actions col-sm-12\"> -->\r\n    <mat-card-actions align=\"end\" class=\"container-cards-buttons\">\r\n      <button mat-raised-button type=\"button\" class=\"child-buttons-conferma\"\r\n              (click)=\"vaiNuova('Prodotto');\">\r\n        <mat-icon>add</mat-icon>&nbsp;Nuova Segnalazione\r\n      </button>\r\n      <button mat-raised-button type=\"submit\" (click)=\"exportAsXLSX('Prodotto')\"\r\n              class=\"child-buttons-excel\">\r\n        <mat-icon> cloud_download</mat-icon>&nbsp;Genera Excel\r\n      </button>\r\n    </mat-card-actions>\r\n\r\n    <br> <br>\r\n\r\n    <form [formGroup]=\"formFiltriDiRicercaProdotto\">\r\n\r\n      <div class=\"container-data\">\r\n        <!-- Settore/Materia -->\r\n        <mat-form-field class=\"child-data\">\r\n          <input matInput placeholder=\"Settore/Materia\" [formControl]=\"settoreCtrl\"\r\n                 [matAutocomplete]=\"autoSettore\" (focus)=\"onFocus(settoreCtrl)\">\r\n          <mat-autocomplete #autoSettore=\"matAutocomplete\"\r\n                            (optionSelected)=\"settoreSelected($event.option.value)\">\r\n            <mat-option *ngFor=\"let option of filteredSettore | async\" [value]=\"option.id\">\r\n              {{option.nome}}\r\n            </mat-option>\r\n          </mat-autocomplete>\r\n          <button mat-icon-button matSuffix *ngIf=\"settoreCtrl.value\" (click)=\"clearSettore()\">\r\n            <mat-icon>clear</mat-icon>\r\n          </button>\r\n        </mat-form-field>\r\n\r\n        <!-- <mat-form-field class=\"child-data\">\r\n        <mat-label>Area/Prodotto</mat-label>\r\n        <mat-select id=\"floating_select\" [(ngModel)]=\"area\"\r\n                    class=\"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer\">\r\n          <mat-option *ngFor=\"let ap of this.areaProdotto\" [value]=\"ap.id\">{{ap.nome}}</mat-option>\r\n        </mat-select>\r\n      </mat-form-field> -->\r\n        <mat-form-field class=\"child-data\">\r\n          <input matInput placeholder=\"Area/Prodotto\" [formControl]=\"areaCtrl\"\r\n                 [matAutocomplete]=\"autoArea\" (focus)=\"onFocus(areaCtrl)\">\r\n          <mat-autocomplete #autoArea=\"matAutocomplete\"\r\n                            (optionSelected)=\"areaSelected($event.option.value)\">\r\n            <mat-option *ngFor=\"let option of filteredArea | async\" [value]=\"option.id\">\r\n              {{option.nome}}\r\n            </mat-option>\r\n          </mat-autocomplete>\r\n          <button mat-icon-button matSuffix *ngIf=\"areaCtrl.value\" (click)=\"clearArea()\">\r\n            <mat-icon>clear</mat-icon>\r\n          </button>\r\n        </mat-form-field>\r\n\r\n      </div>\r\n\r\n      <div class=\"container-data\">\r\n        <mat-form-field class=\"child-data\">\r\n          <mat-label>Data inserimento da</mat-label>\r\n          <input matInput [matDatepicker]=\"picker\" [formControl]=\"dataInizio\" (dateChange)=\"onDateChange('startDate')\" readonly>\r\n          <mat-datepicker-toggle matSuffix [for]=\"picker\"></mat-datepicker-toggle>\r\n          <mat-datepicker #picker></mat-datepicker>\r\n          <button mat-icon-button matSuffix *ngIf=\"dataInizio.value\" (click)=\"clearDate('dataInizio')\">\r\n            <mat-icon>clear</mat-icon>\r\n          </button>\r\n        </mat-form-field>\r\n\r\n        <mat-form-field class=\"child-data\">\r\n          <mat-label>Data inserimento a</mat-label>\r\n          <input matInput [matDatepicker]=\"picker1\" [formControl]=\"dataFine\" (dateChange)=\"onDateChange('endDate')\" readonly>\r\n          <mat-datepicker-toggle matSuffix [for]=\"picker1\"></mat-datepicker-toggle>\r\n          <mat-datepicker #picker1></mat-datepicker>\r\n          <button mat-icon-button matSuffix *ngIf=\"dataFine.value\" (click)=\"clearDate('dataFine')\">\r\n            <mat-icon>clear</mat-icon>\r\n          </button>\r\n        </mat-form-field>\r\n      </div>\r\n\r\n      <div class=\"container-data\">\r\n\r\n        <!-- <mat-form-field class=\"child-data\">\r\n        <mat-label>Sede</mat-label>\r\n        <mat-select id=\"floating_select\" [(ngModel)]=\"filtroperSede\"\r\n                    class=\"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer\">\r\n          <mat-option *ngFor=\"let s of this.sede\" [value]=\"s.id\">{{showFieldSede(s.id!,\r\n            s.nome)}}</mat-option>\r\n        </mat-select>\r\n      </mat-form-field> -->\r\n      <mat-form-field class=\"child-data\">\r\n        <input matInput placeholder=\"Sede\" [formControl]=\"sedeCtrl\" [matAutocomplete]=\"autoSede\" (focus)=\"onFocus(sedeCtrl)\">\r\n        <mat-autocomplete #autoSede=\"matAutocomplete\" (optionSelected)=\"sedeSelected($event.option.value)\">\r\n          <mat-option *ngFor=\"let option of filteredSede | async\" [value]=\"option.id\">\r\n            {{showFieldSede(option.id!, option.nome)}}\r\n          </mat-option>\r\n        </mat-autocomplete>\r\n        <button mat-icon-button matSuffix *ngIf=\"sedeCtrl.value\" (click)=\"clearSede()\">\r\n          <mat-icon>clear</mat-icon>\r\n          </button>\r\n        </mat-form-field>\r\n\r\n        <div class=\"child-data\"></div>\r\n\r\n\r\n      </div>\r\n\r\n      <!-- Buttons -->\r\n      <div class=\"container-buttons\">\r\n        <button type=\"submit\" mat-button class=\"child-buttons child-buttons-conferma\"\r\n                (click)=\"inizializzaPaginazione('Prodotto')\">\r\n          Cerca\r\n        </button>\r\n        <button type=\"button\" mat-button class=\"child-buttons child-buttons-chiudi\" (click)=\"resetRicerca()\">\r\n          Annulla</button>\r\n      </div>\r\n    </form>\r\n\r\n    <br><br>\r\n\r\n    <p class=\"section-title\">Ricerca Segnalazioni Prodotto | {{prodotti.length }} risultati su {{elemNumProdotto}}</p>\r\n    <div *ngIf=\"prodotti.length > 0; else nessunRisultato\" class=\"table\">\r\n\r\n      <table mat-table matSort (matSortChange)=\"sortData($event, 'Prodotto')\" [dataSource]=\"prodotti\"\r\n             class=\"mat-elevation-z8\">\r\n        <tr mat-header-row *matHeaderRowDef=\"displayedColumnsProdotto\"></tr>\r\n        <tr mat-row *matRowDef=\"let row; columns: displayedColumnsProdotto;\"\r\n            (click)=\"handleRowClickProdotto(row)\">\r\n        </tr>\r\n\r\n        <ng-container matColumnDef=\"data1\">\r\n          <th mat-header-cell mat-sort-header=\"data1\" *matHeaderCellDef>Data Creazione</th>\r\n          <td mat-cell *matCellDef=\"let element\"> {{element.data1}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"data2\">\r\n          <th mat-header-cell mat-sort-header=\"data2\" *matHeaderCellDef>Data Ultima Modifica</th>\r\n          <td mat-cell *matCellDef=\"let element\"> {{element.data2}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"settoreMateria\">\r\n          <th mat-header-cell mat-sort-header=\"settoreMateria\" *matHeaderCellDef>Settore/Materia\r\n          </th>\r\n          <td mat-cell *matCellDef=\"let element\"> {{element.settoreMateria}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"areaProdotto\">\r\n          <th mat-header-cell mat-sort-header=\"areaProdotto\" *matHeaderCellDef>Area/Prodotto</th>\r\n          <td mat-cell *matCellDef=\"let element\"> {{element.areaProdotto}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"sede\">\r\n          <th mat-header-cell mat-sort-header=\"sede\" *matHeaderCellDef>Sede</th>\r\n          <td mat-cell *matCellDef=\"let element\"> {{showFieldSede(element.sedeId, element.sede)}}\r\n          </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"stato\">\r\n          <th mat-header-cell mat-sort-header=\"stato\" *matHeaderCellDef>Stato</th>\r\n          <td mat-cell *matCellDef=\"let element\" class=\"align-elements\">\r\n            {{showFieldStato(element.statoId)}}\r\n          </td>\r\n        </ng-container>\r\n      </table>\r\n\r\n      <div class=\"mat-paginator-mod\">\r\n\r\n        <div class=\"pagination\">\r\n          <a *ngIf=\"pageCurrProdotto > 1\" (click)=\"pageFirstProdotto()\"><mat-icon [ngClass]=\"{'first-last-page-icon': true}\">first_page</mat-icon></a>\r\n          <a (click)=\"pagePrevProdotto('Prodotto')\"><mat-icon [ngClass]=\"{'first-last-page-icon': true}\">keyboard_arrow_left</mat-icon></a>\r\n          <a *ngFor=\"let ln of layoutNumbersProdotto\" [ngClass]=\"ln === pageCurrProdotto ? 'active' : ''\" (click)=\"setPageCurrProdotto(ln, 'Prodotto')\">{{ln}}</a>\r\n          <a (click)=\"pageNextProdotto('Prodotto')\"><mat-icon [ngClass]=\"{'first-last-page-icon': true}\">keyboard_arrow_right</mat-icon></a>\r\n          <a *ngIf=\"pageCurrProdotto < pageNumProdotto\" (click)=\"pageLastProdotto()\"><mat-icon [ngClass]=\"{'first-last-page-icon': true}\">last_page</mat-icon></a>\r\n        </div>\r\n        <div class=\"paginator-numelem\">\r\n          <mat-select class=\"paginator-numelem-select\" name=\"numElem\" [(ngModel)]=\"pageDimProdotto\">\r\n            <mat-option *ngFor=\"let num of numPages\" value=\"{{num}}\"\r\n                        (click)=\"modificaPaginazione('Prodotto')\">{{num}}</mat-option>\r\n          </mat-select>\r\n        </div>\r\n\r\n        <div class=\"paginator-info\">Pagina {{pageCurrProdotto}} di {{pageNumProdotto}}</div>\r\n\r\n      </div>\r\n\r\n    </div>\r\n\r\n    <ng-template #nessunRisultato>\r\n      <br>\r\n      <br>\r\n      <mat-card>\r\n        <div class=\"rotation-div\">\r\n          <h1 class=\"nessuna-corr\">\r\n            <mat-icon class=\"rotation\">cached</mat-icon>\r\n          </h1>\r\n        </div>\r\n      </mat-card>\r\n    </ng-template>\r\n\r\n  </mat-tab>\r\n\r\n\r\n  <mat-tab class=\"tab\" label=\"Segnalazioni Contenzioso\"> <br>\r\n\r\n    <!-- <mat-card-actions align=\"end\" class=\"mat-form-actions col-sm-12\"> -->\r\n    <mat-card-actions align=\"end\" class=\"container-cards-buttons\">\r\n      <button mat-raised-button type=\"button\" class=\"child-buttons-conferma\"\r\n              (click)=\"vaiNuova('Contenzioso');\">\r\n        <mat-icon>add</mat-icon>&nbsp;Nuova Segnalazione\r\n      </button>\r\n      <button mat-raised-button type=\"submit\" (click)=\"exportAsXLSX('Contenzioso')\"\r\n              class=\"child-cards-buttons child-buttons-excel\">\r\n        <mat-icon> cloud_download</mat-icon>&nbsp;Genera Excel\r\n      </button>\r\n    </mat-card-actions>\r\n\r\n    <br> <br>\r\n\r\n    <div class=\"container-data\">\r\n\r\n      <!-- <mat-form-field class=\"child-data\">\r\n        <mat-label>Settore/Materia</mat-label>\r\n        <mat-select id=\"floating_select\" [(ngModel)]=\"settore\"\r\n                    (selectionChange)=\"settoreMateriaSelezionatoConId($event.value)\"\r\n                    class=\"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer\">\r\n          <mat-option *ngFor=\"let st of this.settoreMateria\"\r\n                      [value]=\"st.id\">{{st.nome}}</mat-option>\r\n        </mat-select>\r\n      </mat-form-field> -->\r\n      <!-- Settore/Materia -->\r\n      <mat-form-field class=\"child-data\">\r\n        <input matInput placeholder=\"Settore/Materia\" [formControl]=\"settoreCtrl\"\r\n               [matAutocomplete]=\"autoSettore\" (focus)=\"onFocus(settoreCtrl)\">\r\n        <mat-autocomplete #autoSettore=\"matAutocomplete\"\r\n                          (optionSelected)=\"settoreSelected($event.option.value)\">\r\n          <mat-option *ngFor=\"let option of filteredSettore | async\" [value]=\"option.id\">\r\n            {{option.nome}}\r\n          </mat-option>\r\n        </mat-autocomplete>\r\n        <button mat-icon-button matSuffix *ngIf=\"settoreCtrl.value\" (click)=\"clearSettore()\">\r\n          <mat-icon>clear</mat-icon>\r\n        </button>\r\n      </mat-form-field>\r\n\r\n      <!-- <mat-form-field class=\"child-data\">\r\n        <mat-label>Area/Prodotto</mat-label>\r\n        <mat-select id=\"floating_select\" [(ngModel)]=\"area\"\r\n                    class=\"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer\">\r\n          <mat-option *ngFor=\"let ap of this.areaProdotto\" [value]=\"ap.id\">{{ap.nome}}</mat-option>\r\n        </mat-select>\r\n      </mat-form-field> -->\r\n      <mat-form-field class=\"child-data\">\r\n        <input matInput placeholder=\"Area/Prodotto\" [formControl]=\"areaCtrl\"\r\n               [matAutocomplete]=\"autoArea\" (focus)=\"onFocus(areaCtrl)\">\r\n        <mat-autocomplete #autoArea=\"matAutocomplete\"\r\n                          (optionSelected)=\"areaSelected($event.option.value)\">\r\n          <mat-option *ngFor=\"let option of filteredArea | async\" [value]=\"option.id\">\r\n            {{option.nome}}\r\n          </mat-option>\r\n        </mat-autocomplete>\r\n        <button mat-icon-button matSuffix *ngIf=\"areaCtrl.value\" (click)=\"clearArea()\">\r\n          <mat-icon>clear</mat-icon>\r\n        </button>\r\n      </mat-form-field>\r\n\r\n    </div>\r\n\r\n    <div class=\"container-data\">\r\n      <mat-form-field class=\"child-data\">\r\n        <mat-label>Data inserimento da</mat-label>\r\n        <input matInput [matDatepicker]=\"picker2\" [formControl]=\"dataInizioContenzioso\" (dateChange)=\"onDateChange('startDateContenzioso')\" readonly>\r\n        <mat-datepicker-toggle matSuffix [for]=\"picker2\"></mat-datepicker-toggle>\r\n        <mat-datepicker #picker2></mat-datepicker>\r\n        <button mat-icon-button matSuffix *ngIf=\"dataInizioContenzioso.value\" (click)=\"clearDate('dataInizioContenzioso')\">\r\n          <mat-icon>clear</mat-icon>\r\n        </button>\r\n      </mat-form-field>\r\n\r\n      <mat-form-field class=\"child-data\">\r\n        <mat-label>Data inserimento a</mat-label>\r\n        <input matInput [matDatepicker]=\"picker3\" [formControl]=\"dataFineContenzioso\" [min]=\"dataInizioContenzioso.value\" (dateChange)=\"onDateChange('endDateContenzioso')\" readonly>\r\n        <mat-datepicker-toggle matSuffix [for]=\"picker3\"></mat-datepicker-toggle>\r\n        <mat-datepicker #picker3></mat-datepicker>\r\n        <button mat-icon-button matSuffix *ngIf=\"dataFineContenzioso.value\" (click)=\"clearDate('dataFineContenzioso')\">\r\n          <mat-icon>clear</mat-icon>\r\n        </button>\r\n      </mat-form-field>\r\n    </div>\r\n\r\n    <div class=\"container-data\">\r\n\r\n      <!-- <mat-form-field class=\"child-data\">\r\n        <mat-label>Sede</mat-label>\r\n        <mat-select id=\"floating_select\" [(ngModel)]=\"filtroperSede\"\r\n                    class=\"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer\">\r\n          <mat-option *ngFor=\"let s of this.sede\" [value]=\"s.id\">{{showFieldSede(s.id!,\r\n            s.nome)}}</mat-option>\r\n        </mat-select>\r\n      </mat-form-field> -->\r\n      <mat-form-field class=\"child-data\">\r\n        <input matInput placeholder=\"Sede\" [formControl]=\"sedeCtrl\" [matAutocomplete]=\"autoSede\" (focus)=\"onFocus(sedeCtrl)\">\r\n        <mat-autocomplete #autoSede=\"matAutocomplete\"\r\n                          (optionSelected)=\"sedeSelected($event.option.value)\">\r\n          <mat-option *ngFor=\"let option of filteredSede | async\" [value]=\"option.id\">\r\n            {{showFieldSede(option.id!, option.nome)}}\r\n          </mat-option>\r\n        </mat-autocomplete>\r\n        <button mat-icon-button matSuffix *ngIf=\"sedeCtrl.value\" (click)=\"clearSede()\">\r\n          <mat-icon>clear</mat-icon>\r\n        </button>\r\n      </mat-form-field>\r\n\r\n      <!-- <mat-form-field class=\"child-data\">\r\n        <mat-label>Tipologia contenzioso</mat-label>\r\n        <mat-select id=\"floating_select\" [(ngModel)]=\"idTipologiaContenzioso\"\r\n                    class=\"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer\">\r\n          <mat-option *ngFor=\"let tipologia of tipologieContenzioso\"\r\n                      [value]=\"tipologia.id\">{{tipologia.nome}}</mat-option>\r\n        </mat-select>\r\n      </mat-form-field> -->\r\n      <!-- Tipologia Contenzioso -->\r\n      <mat-form-field class=\"child-data\">\r\n        <input matInput placeholder=\"Tipologia Contenzioso\" [formControl]=\"tipologiaContenziosoCtrl\"\r\n               [matAutocomplete]=\"autoTipologiaContenzioso\" (focus)=\"onFocus(tipologiaContenziosoCtrl)\">\r\n        <mat-autocomplete #autoTipologiaContenzioso=\"matAutocomplete\"\r\n                          (optionSelected)=\"tipologiaContenziosoSelected($event.option.value)\">\r\n          <mat-option *ngFor=\"let option of filteredTipologiaContenzioso | async\"\r\n                      [value]=\"option.id\">\r\n            {{option.nome}}\r\n          </mat-option>\r\n        </mat-autocomplete>\r\n        <button mat-icon-button matSuffix *ngIf=\"tipologiaContenziosoCtrl.value\"\r\n                (click)=\"clearTipologiaContenzioso()\">\r\n          <mat-icon>clear</mat-icon>\r\n        </button>\r\n      </mat-form-field>\r\n\r\n    </div>\r\n\r\n\r\n\r\n    <!-- Buttons -->\r\n    <div class=\"container-buttons\">\r\n      <button type=\"submit\" mat-button class=\"child-buttons child-buttons-conferma\"\r\n              (click)=\"inizializzaPaginazione('Contenzioso')\">\r\n        <!-- <mat-icon class=\"child-buttons\">search</mat-icon> -->\r\n        Cerca\r\n      </button>\r\n      <button type=\"button\" mat-button class=\"child-buttons child-buttons-chiudi\" (click)=\"resetRicerca()\">\r\n        Annulla</button>\r\n    </div>\r\n\r\n    <br><br>\r\n\r\n    <p class=\"section-title\">Ricerca Segnalazioni Contenzioso | {{contenziosi.length }} risultati su {{elemNumContenzioso}}</p>\r\n    <div *ngIf=\"contenziosi.length > 0; else nessunRisultato\" class=\"table\">\r\n      <table mat-table matSort (matSortChange)=\"sortData($event, 'Contenzioso')\" [dataSource]=\"contenziosi\"\r\n             class=\"mat-elevation-z8\">\r\n        <tr mat-header-row *matHeaderRowDef=\"displayedColumnsContenzioso\"></tr>\r\n        <tr mat-row *matRowDef=\"let row; columns: displayedColumnsContenzioso;\"\r\n            (click)=\"handleRowClickContenzioso(row)\"></tr>\r\n        <!-- <tr mat-row *matRowDef=\"let row; columns: displayedColumnsContenzioso;\"\r\n            (click)=\"row.statoId == 1 ? handleRowClickContenzioso(row) : null\"></tr> -->\r\n\r\n        <ng-container matColumnDef=\"data1\">\r\n          <th mat-header-cell mat-sort-header=\"data1\" *matHeaderCellDef>Data Creazione</th>\r\n          <td mat-cell *matCellDef=\"let element\"> {{element.data1}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"data2\">\r\n          <th mat-header-cell mat-sort-header=\"data2\" *matHeaderCellDef>Data Ultima Modifica</th>\r\n          <td mat-cell *matCellDef=\"let element\"> {{element.data2}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"tipologiaContenzioso\">\r\n          <th mat-header-cell mat-sort-header=\"tipologiaContenzioso\" *matHeaderCellDef>Tipologia\r\n            Contenzioso</th>\r\n          <td mat-cell *matCellDef=\"let element\"> {{element.contenziosoDesc}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"settoreMateria\">\r\n          <th mat-header-cell mat-sort-header=\"settoreMateria\" *matHeaderCellDef>Settore/Materia\r\n          </th>\r\n          <td mat-cell *matCellDef=\"let element\"> {{element.settoreMateria}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"areaProdotto\">\r\n          <th mat-header-cell mat-sort-header=\"areaProdotto\" *matHeaderCellDef>Area/Prodotto</th>\r\n          <td mat-cell *matCellDef=\"let element\"> {{element.areaProdotto}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"sede\">\r\n          <th mat-header-cell mat-sort-header=\"sede\" *matHeaderCellDef>Sede</th>\r\n          <td mat-cell *matCellDef=\"let element\"> {{showFieldSede(element.sedeId, element.sede)}}\r\n          </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"stato\">\r\n          <th mat-header-cell mat-sort-header=\"stato\" *matHeaderCellDef>Stato</th>\r\n          <td mat-cell *matCellDef=\"let element\" class=\"align-elements\">\r\n            {{showFieldStato(element.statoId)}}\r\n          </td>\r\n        </ng-container>\r\n\r\n      </table>\r\n\r\n    <div class=\"mat-paginator-mod\">\r\n\r\n      <div class=\"pagination\">\r\n        <a *ngIf=\"pageCurrContenzioso > 1\" (click)=\"pageFirstContenzioso()\"><mat-icon [ngClass]=\"{'first-last-page-icon': true}\">first_page</mat-icon></a>\r\n        <a (click)=\"pagePrevContenzioso('Contenzioso')\"><mat-icon [ngClass]=\"{'first-last-page-icon': true}\">keyboard_arrow_left</mat-icon></a>\r\n        <a *ngFor=\"let ln of layoutNumbersContenzioso\" [ngClass]=\"ln === pageCurrContenzioso ? 'active' : ''\" (click)=\"setPageCurrContenzioso(ln, 'Contenzioso')\">{{ln}}</a>\r\n        <a (click)=\"pageNextContenzioso('Contenzioso')\"><mat-icon [ngClass]=\"{'first-last-page-icon': true}\">keyboard_arrow_right</mat-icon></a>\r\n        <a *ngIf=\"pageCurrContenzioso < pageNumContenzioso\" (click)=\"pageLastContenzioso()\"><mat-icon [ngClass]=\"{'first-last-page-icon': true}\">last_page</mat-icon></a>\r\n      </div>\r\n      <div class=\"paginator-numelem\">\r\n        <mat-select class=\"paginator-numelem-select\" name=\"numElem\"\r\n                    [(ngModel)]=\"pageDimContenzioso\">\r\n          <mat-option (click)=\"modificaPaginazione('Contenzioso')\" *ngFor=\"let num of numPages\" value=\"{{num}}\">{{num}}</mat-option>\r\n        </mat-select>\r\n      </div>\r\n\r\n      <div class=\"paginator-info\">Pagina {{pageCurrContenzioso}} di {{pageNumContenzioso}}</div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n\r\n    <ng-template #nessunRisultato>\r\n      <br>\r\n      <br>\r\n      <mat-card>\r\n        <div class=\"rotation-div\">\r\n          <h1 class=\"nessuna-corr\">\r\n            <mat-icon class=\"rotation\">cached</mat-icon>\r\n          </h1>\r\n        </div>\r\n      </mat-card>\r\n    </ng-template>\r\n\r\n  </mat-tab>\r\n\r\n</mat-tab-group>\r\n","import { ChangeDetectionStrategy, NgModule } from '@angular/core';\r\nimport { SharedModule } from '@shared/shared.module';\r\nimport { DragDropModule } from '@angular/cdk/drag-drop';\r\nimport { RilevazioniRoutingModule } from './rilevazioni-routing.module';\r\nimport { RilevazioniComponent } from './rilevazioni.component';\r\nimport { RilevazioniNuovaComponent } from './rilevazioni-nuova/rilevazioni-nuova.component';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n// import { RilevazioniModificaComponent } from './rilevazioni-modifica/rilevazioni-modifica.component';\r\n// import { RilevazioniGestioneComponent } from './rilevazioni-gestione/rilevazioni-gestione.component';\r\n// import { Step1ParametriComponent } from './rilevazioni-gestione/step1-parametri/step1-parametri.component';\r\n// import { Step2FlussoLavoroComponent } from './rilevazioni-gestione/step2-flusso-lavoro/step2-flusso-lavoro.component';\r\n// import { Step3GestioneRicorsiComponent } from './rilevazioni-gestione/step3-gestione-ricorsi/step3-gestione-ricorsi.component';\r\n// import { Step4RilevazioneComponent } from './rilevazioni-gestione/step4-rilevazione/step4-rilevazione.component';\r\n// import { DialogNoteComponent } from './rilevazioni-gestione/step4-rilevazione/dialog-note/dialog-note.component';\r\n// import { ConfirmSaveComponent } from './rilevazioni-gestione/confirm-save/confirm-save.component';\r\n// import { RilevazioniDialogComponent } from './rilevazioni-dialog/rilevazioni-dialog.component';\r\n// import { DialogErroreComponent } from './rilevazioni-gestione/dialog-errore/dialog-errore.component';\r\nimport { StepperDialogModificaComponent } from './stepper-dialog-modifica/stepper-dialog-modifica.component';\r\nimport { StepperDialogCreazioneAspettoComponent } from './stepper-dialog-creazione-aspetto/stepper-dialog-creazione-aspetto.component';\r\nimport { PaginaRisolviAspettoComponent } from './pagina-risolvi-aspetto/pagina-risolvi-aspetto.component';\r\nimport { ModaleTestiAspettiComponent } from './modale-testi-aspetti/modale-testi-aspetti.component';\r\nimport { ModalRisolviComponent } from './modal-risolvi/modal-risolvi.component';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatDatepickerModule } from '@angular/material/datepicker';\r\nimport {NativeDateAdapter} from '@angular/material/core';\r\nimport { GestioneSegnalazioneGerarchicoComponent } from './gestione-segnalazione-gerarchico/gestione-segnalazione-gerarchico.component';\r\nimport { ModalModificaSegnalazioneComponent } from './modal-modifica-segnalazione/modal-modifica-segnalazione.component';\r\nimport { ModalRisolviContenziosoComponent } from './modal-risolvi-contenzioso/modal-risolvi-contenzioso.component';\r\nimport { ModalDettagliGestioneComponent } from './modal-dettagli-gestione/modal-dettagli-gestione.component';\r\nimport { ModalDettalgiGestioneContenziosiComponent } from './modal-dettagli-gestione-contenziosi/modal-dettalgi-gestione-contenziosi.component';\r\nimport { ApprovazioniComponent } from './approvazione/approvazioni/approvazioni.component';\r\nimport { GestioneFileComponent } from './gestione-file/gestione-file.component';\r\nimport { ModalDettagliSegnalazioneComponent } from './modal-dettagli-segnalazione/modal-dettagli-segnalazione.component';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\r\n\r\n\r\nconst COMPONENTS: any[] = [\r\n  RilevazioniComponent,\r\n  RilevazioniNuovaComponent,\r\n];\r\nconst COMPONENTS_DYNAMIC: any[] = [];\r\n\r\n@NgModule({\r\n  imports: [SharedModule,\r\n            RilevazioniRoutingModule,\r\n            DragDropModule,\r\n            FormsModule,\r\n            ReactiveFormsModule,\r\n            MatFormFieldModule,\r\n            MatInputModule,\r\n            MatAutocompleteModule,\r\n            MatDialogModule,\r\n            MatDatepickerModule,\r\n            ],\r\n            providers: [NativeDateAdapter],\r\n  declarations: [...COMPONENTS, ...COMPONENTS_DYNAMIC, /*RilevazioniDialogComponent, RilevazioniModificaComponent, RilevazioniGestioneComponent, Step1ParametriComponent, Step2FlussoLavoroComponent, Step3GestioneRicorsiComponent, Step4RilevazioneComponent, DialogNoteComponent, ConfirmSaveComponent, DialogErroreComponent,*/ StepperDialogModificaComponent, StepperDialogCreazioneAspettoComponent, PaginaRisolviAspettoComponent, ModaleTestiAspettiComponent, ModalRisolviComponent, GestioneSegnalazioneGerarchicoComponent, ModalModificaSegnalazioneComponent, ModalRisolviContenziosoComponent, ModalDettagliGestioneComponent, ModalDettalgiGestioneContenziosiComponent, ApprovazioniComponent, GestioneFileComponent, ModalDettagliSegnalazioneComponent],\r\n})\r\nexport class RilevazioniModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ProdottiService } from '@shared/services/prodotti.service';\r\nimport { StepperService } from '@shared/services/stepper.service';\r\nimport { PopupErroreInserimentoComponent } from 'app/routes/popup-errore-inserimento/popup-errore-inserimento.component';\r\n\r\n@Component({\r\n  selector: 'app-stepper-dialog-creazione-aspetto',\r\n  templateUrl: './stepper-dialog-creazione-aspetto.component.html',\r\n  styleUrls: ['./stepper-dialog-creazione-aspetto.component.scss']\r\n})\r\nexport class StepperDialogCreazioneAspettoComponent implements OnInit {\r\n\r\n  nomeNuovoAspetto: string = \"\";\r\n  aspettiDaValutare: AspettoConDescrizione[] = [];\r\n\r\n  constructor(\r\n    private dialog: MatDialog,\r\n    private stepperService: StepperService,\r\n    private prodottiSrv: ProdottiService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.loadAspettiDaValutare();\r\n  }\r\n\r\n  loadAspettiDaValutare() {\r\n    this.prodottiSrv.getAspettiEDescrizioni(this.stepperService.inserimentoTipoSegnalazione$.value!).subscribe(\r\n      data => {\r\n        data.forEach(item => {\r\n          this.aspettiDaValutare.push({\r\n            nomeAspetto: item.nome,\r\n            idAspetto: item.id,\r\n            descrizioneAspetto: item.descrizione,\r\n          });\r\n        });        \r\n      });\r\n  }\r\n\r\n  confirmDialogStepperNuovoAspetto() {\r\n\r\n    // verifico se il testo inserito dall'utente contiene SOLO spazi bianchi\r\n    const esito = this.stepperService.checkStringOnlySpaces(this.nomeNuovoAspetto.trim());\r\n\r\n    if (esito == true) {\r\n      this.openErrorDialog(\"Inserire un nome aspetto valido per proseguire.\");\r\n      return;\r\n    }\r\n\r\n    // verifico che il testo inserito dall'utente non sia il nome 'altro'\r\n    if (this.nomeNuovoAspetto.trim().toLowerCase() == \"altro\") {\r\n      this.openErrorDialog(\"Nome aspetto non valido.\");\r\n      return;\r\n    }\r\n\r\n    for (let i = 0; i < this.aspettiDaValutare.length; i++) {\r\n\r\n      if (this.nomeNuovoAspetto.trim().toLowerCase() == this.aspettiDaValutare[i].nomeAspetto.toLowerCase()) {\r\n        this.openErrorDialog(\"Esiste già un aspetto standard con il nome inserito.\");\r\n        return;\r\n      }\r\n\r\n    }\r\n\r\n    if (esito == false) {\r\n      this.stepperService.nuovoAspetto$.next(this.nomeNuovoAspetto.trim());\r\n      this.dialog.closeAll();\r\n    }  \r\n    \r\n  }\r\n\r\n  closeDialogStepperNuovoAspetto() {\r\n    // if (confirm('Le modifiche effettuate non saranno salvate. Chiudere?')) {\r\n      this.stepperService.nuovoAspetto$.next(\"\");\r\n      this.dialog.closeAll();\r\n      // return true;\r\n    // }\r\n    // else return false;\r\n  }\r\n\r\n  openErrorDialog(message: string): void {\r\n    this.dialog.open(PopupErroreInserimentoComponent, {\r\n      data: { message: message },\r\n    });\r\n  }  \r\n\r\n}\r\n\r\ninterface AspettoConDescrizione {\r\n  nomeAspetto: string;\r\n  idAspetto: number;\r\n  descrizioneAspetto: string;\r\n}\r\n","<!-- TITOLO -->\r\n<!-- <div class=\"font-bold text-2xl flex justify-center m-20 border-black\">Inserisci nuova problematica</div> -->\r\n<div class=\"title\">Inserisci nuova problematica</div>\r\n\r\n<!-- CAMPO DA MODIFICARE -->\r\n<!-- <div class=\"grid grid-flow-col justify-stretch m-50\"> -->\r\n<div class=\"container-data\">\r\n\r\n    <!-- <mat-form-field class=\"max-h-20 mr-auto ml-auto\"> -->\r\n    <mat-form-field class=\"child-data\">\r\n        <mat-label>Aspetti da valutare</mat-label>\r\n        <input matInput [(ngModel)]=\"nomeNuovoAspetto\">\r\n    </mat-form-field>\r\n\r\n</div>\r\n\r\n<!-- BOTTONI -->\r\n<!-- <div class=\"flex flex-row justify-end mr-auto ml-auto mb-10 mt-10\"> -->\r\n<div class=\"container-buttons\">\r\n    <button (click)=\"closeDialogStepperNuovoAspetto()\"\r\n        class=\"child-buttons child-buttons-chiudi\">\r\n        Chiudi</button>\r\n        <!-- <button type=\"button\" class= \"flex items-center w-auto text-white text-base bg-gray-600 hover:bg-gray-700 focus:ring-4 focus:outline-none focus:ring-sky-300 font-medium rounded-lg mx-5 px-5 py-2.5 text-center\">\r\n            <mat-icon class=\"mr-2\">refresh</mat-icon>\r\n            Annulla</button> -->\r\n    <button (click)=\"confirmDialogStepperNuovoAspetto()\" [disabled]=\"nomeNuovoAspetto == ''\"\r\n        class=\"child-buttons child-buttons-conferma\">\r\n        Conferma</button>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { Aspetto, StepperService } from '@shared/services/stepper.service';\r\n\r\n@Component({\r\n  selector: 'app-stepper-dialog-modifica',\r\n  templateUrl: './stepper-dialog-modifica.component.html',\r\n  styleUrls: ['./stepper-dialog-modifica.component.scss']\r\n})\r\nexport class StepperDialogModificaComponent {\r\n\r\n  titolo: string = \"\";\r\n  aspettoDaModificare: Aspetto | undefined;\r\n  descrizione: any;\r\n\r\n  constructor(private stepperService: StepperService, private dialog: MatDialog) {\r\n\r\n    this.titolo = stepperService.getTitolo();\r\n    this.aspettoDaModificare = stepperService.getAspetto();\r\n\r\n    switch (this.titolo) {\r\n\r\n      case 'Criticita': {\r\n        this.descrizione = this.aspettoDaModificare?.descrizioneCriticita;\r\n        break;\r\n      }\r\n\r\n      case 'Suggerimento': {\r\n        this.descrizione = this.aspettoDaModificare?.descrizioneSuggerimento;\r\n        break;\r\n      }\r\n    }    \r\n    \r\n  }\r\n\r\n  confirmDialogStepperModifica() {\r\n    // verifico se il testo inserito dall'utente contiene solo spazi bianchi\r\n    const esito = this.stepperService.checkStringOnlySpaces(this.descrizione.trim());\r\n\r\n    switch (this.titolo) {\r\n\r\n      case 'Criticita': {\r\n        if (esito == false) {\r\n          this.aspettoDaModificare!.descrizioneCriticita = this.descrizione.trim();\r\n        }\r\n        else if (esito == true) {\r\n          alert('Inserire una descrizione valida per proseguire.');\r\n        }\r\n        break;\r\n      }\r\n\r\n      case 'Suggerimento': {\r\n        this.aspettoDaModificare!.descrizioneSuggerimento = this.descrizione.trim();\r\n        break;\r\n      }\r\n    }\r\n\r\n    this.stepperService.datiAspetto$.next(this.aspettoDaModificare);\r\n    this.dialog.closeAll();\r\n  }\r\n\r\n  closeDialogStepperModifica() {\r\n    // if (confirm('Le modifiche effettuate non saranno salvate. Chiudere?')) {\r\n      this.dialog.closeAll();\r\n      // return true;\r\n    // }\r\n    // else return false;\r\n  }\r\n\r\n}\r\n","<!-- TITOLO -->\r\n<div class=\"title\">{{ titolo }}</div>\r\n\r\n<!-- CAMPO DA MODIFICARE -->\r\n<div class=\"container-data\">\r\n\r\n    <mat-form-field class=\"child-data\">\r\n        <mat-label>Aspetti da valutare</mat-label>\r\n        <input matInput formControlName=\"nomeAspetto\" value=\"{{ aspettoDaModificare?.nomeAspetto }}\" [disabled]=\"true\">\r\n    </mat-form-field>\r\n\r\n    <!--  CASO CRITICITA -->\r\n    <mat-form-field *ngIf=\"titolo == 'Criticita'\" class=\"child-data\">\r\n        <mat-label>{{ titolo }}</mat-label>\r\n        <textarea matInput maxlength=\"65535\" type=\"text\" rows=\"7\" [(ngModel)]=\"descrizione\"\r\n            value=\"{{ aspettoDaModificare?.descrizioneCriticita }}\" required></textarea>\r\n    </mat-form-field>\r\n\r\n    <!--  CASO SUGGERIMENTO -->\r\n    <mat-form-field *ngIf=\"titolo == 'Suggerimento'\" class=\"child-data\">\r\n        <mat-label>Criticita</mat-label>\r\n        <textarea disabled matInput maxlength=\"65535\" type=\"text\" rows=\"7\"\r\n            value=\"{{ aspettoDaModificare?.descrizioneCriticita }}\" required></textarea>\r\n    </mat-form-field>\r\n\r\n    <mat-form-field *ngIf=\"titolo == 'Suggerimento'\" class=\"child-data\">\r\n        <mat-label>{{ titolo }}</mat-label>\r\n        <textarea matInput maxlength=\"65535\" type=\"text\" rows=\"7\" \r\n        value=\"{{ aspettoDaModificare?.descrizioneSuggerimento }}\" [(ngModel)]=\"descrizione\"></textarea>\r\n    </mat-form-field>\r\n\r\n</div>\r\n\r\n<!-- BOTTONI -->\r\n<div class=\"container-buttons\">\r\n    <button (click)=\"closeDialogStepperModifica()\"\r\n        class=\"child-buttons child-buttons-chiudi\">\r\n        Chiudi</button>\r\n    <button *ngIf=\"titolo == 'Criticita'\" (click)=\"confirmDialogStepperModifica()\" [disabled]=\"descrizione == ''\"\r\n        class=\"child-buttons child-buttons-conferma\">\r\n        Conferma</button>\r\n    <button *ngIf=\"titolo == 'Suggerimento'\" (click)=\"confirmDialogStepperModifica()\"\r\n        class=\"child-buttons child-buttons-conferma\">\r\n        Conferma</button>\r\n</div>","export class Attore{\r\n  id!: number;\r\n  creato!: Date;\r\n  aggiornato!: Date;\r\n  nome!: string;\r\n\r\n  constructor(){\r\n    this.id = 0;\r\n    this.creato = new Date();\r\n    this.aggiornato = new Date();\r\n    this.nome = '';\r\n  }\r\n}\r\n","export class ProceduraRiferimento{\r\n  id!: number;\r\n  creato!: Date;\r\n  aggiornato!: Date;\r\n  nome!: string;\r\n\r\n  constructor(){\r\n    this.id = 0;\r\n    this.creato = new Date();\r\n    this.aggiornato = new Date();\r\n    this.nome = '';\r\n  }\r\n}\r\n","import { Attore } from './attore.model';\r\nimport { ProceduraRiferimento } from './procedura-riferimento.model';\r\nimport { ProdottiTipologieLavoratori } from './prodotti-tipologie-lavoratori.model';\r\nimport { TipologiaRicorso } from './tipologia-ricorso.model';\r\nimport { StatoSalvataggioRilevazione } from './stato-salvataggio-rilevazione.model';\r\n\r\nexport class Rilevazione {\r\n  id!: number;\r\n  creato!: Date;\r\n  aggiornato!: Date;\r\n  confermata!: boolean;\r\n  prodottoTipologiaLavoratore!: ProdottiTipologieLavoratori;\r\n  attore!: Attore;\r\n  tipologiaRicorso!: TipologiaRicorso;\r\n  proceduraRiferimento!: ProceduraRiferimento;\r\n  matricolaIns!: string;\r\n  scadenza!: Date;\r\n  matricolaIncarico!: string;\r\n  sede!: string;\r\n  statoSalvataggioRilevazione!: StatoSalvataggioRilevazione;\r\n  ruoloIns!: string;\r\n\r\n  constructor() {\r\n    this.id = 0;\r\n    this.creato = new Date();\r\n    this.aggiornato = new Date();\r\n    this.confermata = false;\r\n    this.prodottoTipologiaLavoratore = new ProdottiTipologieLavoratori();\r\n    this.attore = new Attore();\r\n    this.tipologiaRicorso = new TipologiaRicorso();\r\n    this.proceduraRiferimento = new ProceduraRiferimento();\r\n    this.matricolaIns = '';\r\n    this.scadenza = new Date();\r\n    //this.matricolaIncarico = '';\r\n    this.sede = '';\r\n    this.statoSalvataggioRilevazione = new StatoSalvataggioRilevazione();\r\n    this.ruoloIns = '';\r\n\r\n  }\r\n}\r\nexport interface Rilevazione {\r\n  rilev: Rilevazione;\r\n}\r\n\r\nexport interface RilevazioneToExcel {\r\n  Creato: string;\r\n  UltimaModifica: string;\r\n  Area: string;\r\n  SottoArea: string;\r\n  Prodotto: string;\r\n  TipologiaLavoratore: string;\r\n  Attore: string;\r\n  TipologiaRicorso: string;\r\n  ProceduraRiferimento: string;\r\n  Scadenza: string;\r\n  Stato: string;\r\n}\r\n","export class StatoSalvataggioRilevazione {\r\n  id!: number;\r\n  creato!: Date;\r\n  aggiornato!: Date;\r\n  stato!: string;\r\n\r\n  constructor() {\r\n    this.id = 0;\r\n    this.creato = new Date();\r\n    this.aggiornato = new Date();\r\n    this.stato = '';\r\n  }\r\n\r\n}\r\n","export class TipologiaRicorso{\r\n  id!: number;\r\n  creato!: Date;\r\n  aggiornato!: Date;\r\n  nome!: string;\r\n\r\n  constructor(){\r\n    this.id = 0;\r\n    this.creato = new Date();\r\n    this.aggiornato = new Date();\r\n    this.nome = '';\r\n  }\r\n}\r\n"],"names":["MatDialog","MatDialogConfig","MatDialogRef","Router","StorageService","DocumentiService","RilevazioneService","StepperService","forkJoin","ModalDettagliSegnalazioneComponent","i0","ctx_r9","ctx_r25","ctx_r38","$event","ctx_r41","ctx_r43","ctx_r45","ModalModificaSegnalazioneComponent","constructor","stepperService","dialog","router","rilevazioneSrv","documentiService","storageService","dialogRef","ngOnInit","titolo","inserimentoTipoSegnalazione$","value","ruolo","getItem","loadDatiSegnalazione","ngOnDestroy","listaAspettiAggiunti","prodotto","contenzioso","segnalazioneProdotto","datiSegnalazioneProdotto$","statoSegnalazione","statoId","includes","displayedColumns","splice","data","push","getDettagliSegnalazioneById","id","subscribe","forEach","aspetto","idAspetto","idAspetti","findAllegatiAspetti","next","res","allegatiAspetti","isAllegato","find","a","hasAllegato","esito","error","console","findAllegatoSegnalazione","isAllegatoSegnalazione","segnalazioneContenzioso","datiSegnalazioneContenzioso$","getDettagliSegnalazioneContenziosoById","modifyDialogStepperModifica","navigate","closeDialogStepperModifica","deleteDialogStepperModifica","deleteSegnalazione","deleteAllFileSegnalazione","err","complete","sendDialogStepperModifica","sendSegnalazione","response","closeAll","showFieldStato","stato","statoMap","showFieldInviata","inviata","output","showFieldSede","codiceSede","nomeSede","undefined","Number","showDescrizioneTroncata","descrizione","length","substring","openDettagli","idAspettoSegnalazione","close","dialogConfig","autoFocus","width","height","open","afterClosed","dialgoRef2","downloadFileSegnalazione","getFileSegnalazione","contentDisposition","headers","get","fileName","getFileNameFromContentDisposition","blob","body","url","window","URL","createObjectURL","document","createElement","href","download","appendChild","click","removeChild","revokeObjectURL","downloadFileAspetto","getFileAspetti","filenameRegex","matches","exec","replace","filenameStarRegex","matchesStar","decodeURIComponent","selectors","decls","vars","consts","template","ctx","Aree","ProdottiService","FormBuilder","FormControl","Validators","MatStepper","StepperDialogModificaComponent","StepperDialogCreazioneAspettoComponent","SettoreMateriaService","TerritorioService","ContenziosoService","MatTable","PopupErroreInserimentoComponent","map","startWith","ctx_r32","ctx_r35","ctx_r44","ctx_r46","ctx_r48","_r40","ctx_r49","ctx_r51","ctx_r66","ctx_r70","ctx_r78","ctx_r80","ctx_r97","ctx_r101","ctx_r110","ctx_r115","ctx_r117","ctx_r120","ctx_r128","ctx_r144","ctx_r150","ctx_r154","ctx_r157","RilevazioniNuovaComponent","prodottiSrv","_formBuilder","settoreMateriaService","areeProdottiService","territorioService","contenziosoService","group","settoreMateria","required","areaProdotto","sede","tipologiaContenzioso","step2Criticita","step2Aspetti","step2ArrayAspettiCriticita","step3Aspetti","step3Suggerimenti","filterValue","formatToSixDigits","_a","toString","_b","toLowerCase","_c","filter","option","nome","_d","tipologieContenzioso","formattedId","numberValue","isNaN","padStart","codiceSedeString","role","loadTipoSegnalazioni","getSettoriMaterie","getAllAreaProdotto","loadTipologieContenzioso","loadAspettiDaValutare","getSedi","ensureSediLoaded","savedSegnalazioneProdotto","savedSegnalazioneContenzioso","selectRole","showGestioneFileDatiGenerali","isFileDatiGenerali","fileSize","size","fileSizeMb","fileData","dataFileSegnalazione","settore","settoreId","settoreCtrl","setValue","firstFormGroup","patchValue","newGetAllByIdSettore","toPromise","area","areaId","areaCtrl","sedeIdFormatted","_e","sedeId","_f","sedeCtrl","loadDettagliSegnalazioneProdotto","_g","_h","_j","_k","_l","_m","tipologia","_o","contenziosoId","tipologiaCtrl","loadDettagliSegnalazioneContenzioso","filteredSettoreMateria","valueChanges","pipe","_p","_filterSettore","filteredAreaProdotto","_q","_filterArea","filteredSede","_r","_filterSede","filteredTipologia","_s","_filterTipologia","filteredAspettiDaValutare","aspettiCtrl","_t","_filterAspetti","Promise","resolve","setTimeout","item","nomeAspetto","descrizioneCriticita","criticita","descrizioneSuggerimento","suggerimento","nuovoAspetto","i","checkNuovoAspetto","aspettiDaValutare","some","aggiunto","isFileAspetti","aspettoFileName","nomiFileAspetti","allegato","displayAspetto","getSettoriConAreeProdotti","emptyObject","Array","isArray","settoreSelected","event","selectedSettore","selectedId","warn","areaSelected","selectedArea","selectedAreaId","selectedSettoreId","idSettore","sedeSelected","selectedSede","selectedSedeId","tipologiaSelected","selectedTipologia","aspettoSelected","selectedAspetto","secondFormGroup","clearSettore","clearArea","clearSede","clearTipologia","clearAspetto","maxIdAspettiDaValutare","pop","onFocus","ctrl","displaySettore","displayArea","displayTipologia","areaProdottoSelezionato","tipoSegnalazione","toggleAllegaDatiGenerali","onFilesAddedDatiGenerali","file","fileSegnalazione","removeFileSegnalazione","name","removeFileAspetti","index","filesAspetti","findIndex","f","onFilesAddedCriticita","ruoliTrimmed","split","trim","ruoloRegionale","ruoloProvinciale","alert","results","getAllTioplogie","unshift","contenziosoDesc","stepperChange","formatIdToNameStep1","selectedIndex","tableStep3","renderRows","tableStep4","aggiungiAspettoCriticita","checkStringOnlySpaces","aspettoId","sort","b","reset","tableStep2","rimuoviAspettoAggiunto","idAspettoAggiunto","descrizioneAspetto","deleteFileAspetto","modifica","aspettiAggiunti","casoDaModificare","datiAspetto$","setTitolo","dialogStepperModifica","show","nota","disableClose","result","dialogStepperCreazioneAspetto","nuovoAspetto$","ultimoAspetto","invia","datiSegnalazione","Id","idSegnalazioneCasoInvia","openErrorDialog","isValidFormGroup","inviaSegnalazioneProdotto","inviaSegnalazioneContenzioso","creato","Date","toISOString","aggiornato","confermata","matricolaIns","scadenza","matricolaIncarico","idStatoSalvataggioRilevazione","ruoloIns","idArea","aspettiSegnalazione","idSegnalazioneProdotto","formData","FormData","Object","keys","key","aspettoKey","fieldKey","fieldValue","append","JSON","stringify","salvaSegnalazioneProdotto","message","salvaSegnalazioneContenzioso","success","isValidDatiGenerali","requiredFields","every","field","checkFields","nomeSettoreMateria","parseInt","nomeAreaProdotto","numeroCodiceSede","nomeTipologiaContenzioso","mostraNotaCompleta","moveToStep","stepper","checkFormEGriglia","control","getAspettiEDescrizioni","max","reduce","prev","current","codiceFormattato","canAddAspect","isAllFieldsValidContenzioso","isValid","isAllFieldsValidProdotto","deleteFileSegnalazione","nomeFile","getNomeFileAspetto","fileInfo","truncateText","text","limit","viewQuery","_r2","_r5","_r8","_r14","TablesDataService","MtxDialog","Rilevazione","switchMap","tap","XLSX","saveAs","MatAutocompleteTrigger","moment","ctx_r36","ctx_r39","ctx_r67","ctx_r75","ctx_r83","ctx_r85","ctx_r87","ctx_r88","ctx_r91","ctx_r94","ctx_r96","ctx_r98","ctx_r104","ctx_r127","ctx_r136","ctx_r139","ctx_r141","ctx_r146","ctx_r148","ctx_r149","EXCEL_TYPE","EXCEL_EXTENSION","RilevazioniComponent","rilevazioniSrv","formBuilder","dialog2","idSottoarea","idProdotto","idProdottoTipLav","idAttore","idTipologiaRicorso","idProceduraRiferimento","dataInizio","dataFine","dataScadenza","dimensione","pagina","filtroperSede","idStatoSegnalazione","idTipologiaContenzioso","date","currentDate","checkCurrentComponent","tabNomeSegnalazione$","checkCurrentTab","resetPaginazioneProdotto","resetPaginazioneContenzioso","isLoading","getAreaProdotto","filteredSettore","filteredArea","filteredTipologiaContenzioso","tipologiaContenziosoCtrl","_filterTipologiaContenzioso","ngAfterViewInit","areaAutocompleteTrigger","panelClosingActions","filtered","sedeAutocompleteTrigger","tipologiaContenziosoAutocompleteTrigger","tabProdotto","tabClick","tab","textLabel","settoreMateriaSelezionatoConId","errorMessage","tipologiaContenziosoSelected","clearTipologiaContenzioso","clearDate","controlName","formatDate","dataInizioContenzioso","dataFineContenzioso","inizializzaPaginazione","pageCurrProdotto","baseProdotto","layoutDimProdotto","layoutNumbersProdotto","pageCurrContenzioso","baseContenzioso","layoutDimContenzioso","layoutNumbersContenzioso","validitaDal","startOf","format","validitaAl","inizializzaPaginazioneProdotto","inizializzaPaginazioneContenzioso","contaRicercaProdotto","selectSede","elemNumProdotto","totale","count","pageNumProdotto","Math","ceil","pageDimProdotto","scorriLayoutProdotto","ricercaProdotto","contaRicercaContenzioso","elemNumContenzioso","pageNumContenzioso","pageDimContenzioso","scorriLayoutContenzioso","ricercaContenzioso","currStart","floor","currEnd","min","modificaPaginazione","pageNextProdotto","pagePrevProdotto","setPageCurrProdotto","page","pageFirstProdotto","pageLastProdotto","pageNextContenzioso","pagePrevContenzioso","setPageCurrContenzioso","pageFirstContenzioso","pageLastContenzioso","statoImages","sortData","ordine","direction","active","ordineColonna","vaiNuova","setTipoSegnalazione","getAppliedFilters","filters","Filtro","Valore","formRicerca","exportAsXLSX","exportProdottoAsXLSX","exportContenziosoAsXLSX","prodotti","mappedData","data1","data2","statoDesc","exportDataToExcel","contenziosi","filtersWorksheet","utils","json_to_sheet","dataWorksheet","workbook","Sheets","SheetNames","range","decode_range","R","s","r","e","C","c","cell_address","cell_ref","encode_cell","t","v","border","top","style","color","rgb","bottom","left","right","excelBuffer","write","bookType","type","saveAsExcelFile","getNomeFile","buffer","Blob","locale","oggi","baseFileName","toLocaleDateString","year","month","day","toLocaleTimeString","hour","minute","second","hour12","getMilliseconds","resetRicerca","handleRowClickProdotto","segnalazioneSelezionata","handleRowClickContenzioso","ruoli","ruoloSelezionato","ruoloAmministratore","listaCodeSedi","sedeCode","formValues","getRicercaProdotto","getRicercaContenzioso","log","onDateChange","typeDate","openAreaPanel","openPanel","openSedePanel","openTipologiaContenziosoPanel","formatDateToISO","_r0","_r3","_r10","_r29"],"sourceRoot":"webpack:///"}